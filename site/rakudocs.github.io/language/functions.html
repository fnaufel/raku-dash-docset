<!doctype html>
<html lang="en">
<head>
    <title>Functions</title>
    <meta charset="UTF-8"/>
    <meta name=viewport content="width=device-width, initial-scale=1">
    <link rel="icon" href="../favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" href="../css/app.css" media="screen" title="default" />
    <noscript> <style> #search { visibility: hidden; } </style> </noscript>
</head>

<body class="pod">

    <div id="___top"></div>

    <div id="header" class="pretty-box green">

        <a href="../index.html">
            <img src="../images/Camelia.svg" alt="»ö«" id="logo" width="62" height="48"/> &nbsp;Raku Documentation
        </a>

        <div id="search" class="ui-widget">
            <div class="green">
                <input placeholder="Loading..." id="query" accesskey="f" title="Enter term to search for (hit Esc to focus)"/>
            </div>
            <p id="not-found-message">
                Not in Index (<a href="functions.html" id="try-web-search">try site search</a>)
            </p>
        </div>

        <div class="menu">

            <div class="menu-items dark-green">
                <a class='menu-item darker-green' href='https://raku.org'><strong>Raku homepage</strong></a>
                    <a class="menu-item selected darker-green" href="../language.html"> Language </a>
                    <a class="menu-item " href="../type.html"> Types </a>
                    <a class="menu-item " href="../routine.html"> Routines </a>
                    <a class="menu-item " href="../programs.html"> Programs </a>
                    <a class="menu-item " href="https://web.libera.chat/?channel=#raku"> Chat with us </a>
            </div>

            
            

        </div>
    </div>

    <div id="content" class="pretty-box yellow content_fragment">

        <div align="right" style="display:;">
            <button title="Edit this page"  class="pencil" onclick="location='https://github.com/Raku/doc/edit/master/doc//Language/functions.pod6'">
                <svg width="14px" height="16px" viewBox="0 0 14 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                    <defs></defs>
                    <g id="Octicons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                        <g id="pencil" fill="#000000">
                            <path d="M0,12 L0,15 L3,15 L11,7 L8,4 L0,12 L0,12 Z M3,14 L1,14 L1,12 L2,12 L2,13 L3,13 L3,14 L3,14 Z M13.3,4.7 L12,6 L9,3 L10.3,1.7 C10.69,1.31 11.32,1.31 11.71,1.7 L13.3,3.29 C13.69,3.68 13.69,4.31 13.3,4.7 L13.3,4.7 Z" id="Shape"></path>
                        </g>
                    </g>
                </svg>
            </button>
        </div>

        <h1 class="title">Functions</h1>
        <p class="subtitle">Functions and functional programming in Raku</p>

        <nav class="indexgroup">
<table id="TOC">
<caption><h2 id="TOC_Title">Table of Contents</h2></caption>
<tr class="toc-level-1"><td class="toc-number">1</td><td class="toc-text"><a href="functions.html#Defining/Creating/Using_functions">Defining/Creating/Using functions</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">1.1</td><td class="toc-text"><a href="functions.html#Subroutines">Subroutines</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">1.2</td><td class="toc-text"><a href="functions.html#Blocks_and_lambdas">Blocks and lambdas</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">1.3</td><td class="toc-text"><a href="functions.html#Signatures">Signatures</a></td></tr>
<tr class="toc-level-3"><td class="toc-number">1.3.1</td><td class="toc-text"><a href="functions.html#Automatic_signatures">Automatic signatures</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">1.4</td><td class="toc-text"><a href="functions.html#Arguments">Arguments </a></td></tr>
<tr class="toc-level-2"><td class="toc-number">1.5</td><td class="toc-text"><a href="functions.html#Return_values">Return values</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">1.6</td><td class="toc-text"><a href="functions.html#Return_type_constraints">Return type constraints</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">1.7</td><td class="toc-text"><a href="functions.html#Multi-dispatch">Multi-dispatch</a></td></tr>
<tr class="toc-level-3"><td class="toc-number">1.7.1</td><td class="toc-text"><a href="functions.html#proto">proto</a></td></tr>
<tr class="toc-level-3"><td class="toc-number">1.7.2</td><td class="toc-text"><a href="functions.html#only">only</a></td></tr>
<tr class="toc-level-3"><td class="toc-number">1.7.3</td><td class="toc-text"><a href="functions.html#multi_resolution_by_order_of_definition">multi resolution by order of definition</a></td></tr>
<tr class="toc-level-1"><td class="toc-number">2</td><td class="toc-text"><a href="functions.html#Conventions_and_idioms">Conventions and idioms</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">2.1</td><td class="toc-text"><a href="functions.html#Slurpy_conventions">Slurpy conventions</a></td></tr>
<tr class="toc-level-1"><td class="toc-number">3</td><td class="toc-text"><a href="functions.html#Functions_are_first-class_objects">Functions are first-class objects</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">3.1</td><td class="toc-text"><a href="functions.html#Infix_form">Infix form</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">3.2</td><td class="toc-text"><a href="functions.html#Closures">Closures</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">3.3</td><td class="toc-text"><a href="functions.html#Routines">Routines</a></td></tr>
<tr class="toc-level-1"><td class="toc-number">4</td><td class="toc-text"><a href="functions.html#Defining_operators">Defining operators</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">4.1</td><td class="toc-text"><a href="functions.html#Precedence">Precedence</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">4.2</td><td class="toc-text"><a href="functions.html#Associativity">Associativity</a></td></tr>
<tr class="toc-level-1"><td class="toc-number">5</td><td class="toc-text"><a href="functions.html#Traits">Traits</a></td></tr>
<tr class="toc-level-1"><td class="toc-number">6</td><td class="toc-text"><a href="functions.html#Re-dispatching">Re-dispatching</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">6.1</td><td class="toc-text"><a href="functions.html#sub_callsame">sub callsame</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">6.2</td><td class="toc-text"><a href="functions.html#sub_callwith">sub callwith</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">6.3</td><td class="toc-text"><a href="functions.html#sub_nextsame">sub nextsame</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">6.4</td><td class="toc-text"><a href="functions.html#sub_nextwith">sub nextwith</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">6.5</td><td class="toc-text"><a href="functions.html#sub_samewith">sub samewith</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">6.6</td><td class="toc-text"><a href="functions.html#sub_nextcallee">sub nextcallee</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">6.7</td><td class="toc-text"><a href="functions.html#Wrapped_routines">Wrapped routines</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">6.8</td><td class="toc-text"><a href="functions.html#Routines_of_parent_class">Routines of parent class</a></td></tr>
<tr class="toc-level-1"><td class="toc-number">7</td><td class="toc-text"><a href="functions.html#Coercion_types">Coercion types</a></td></tr>
<tr class="toc-level-1"><td class="toc-number">8</td><td class="toc-text"><a href="functions.html#sub_MAIN">sub MAIN</a></td></tr>

</table>
</nav>

        <div class="pod-body ">
            <p>Routines are one of the means Raku has to reuse code. They come in several forms, most notably <a href="../type/Method.html">methods</a>, which belong in classes and roles and are associated with an object; and functions (also called <em>subroutines</em> or <a href="../type/Sub.html">sub</a>s, for short), which can be called independently of objects.</p>
<p>Subroutines default to lexical (<code>my</code>) scoping, and calls to them are generally resolved at compile time.</p>
<p>Subroutines can have a <a href="../type/Signature.html">signature</a>, also called <em>parameter list</em>, which specifies which, if any, arguments the signature expects. It can specify (or leave open) both the number and types of arguments, and the return value.</p>
<p>Introspection on subroutines is provided via <a href="../type/Routine.html"><code>Routine</code></a>.</p>
<h1 id="Defining/Creating/Using_functions"><a class="u" href="functions.html#___top" title="go to top of document">Defining/Creating/Using functions</a></h1>
<h2 id="Subroutines"><a class="u" href="functions.html#___top" title="go to top of document"><a name="index-entry-declarator_sub-Subroutines"><span class="index-entry">Subroutines</span></a></a></h2>
<p>The basic way to create a subroutine is to use the <code>sub</code> declarator followed by an optional <a href="syntax.html#Identifiers">identifier</a>:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>my-func</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Look&nbsp;ma,&nbsp;no&nbsp;args!</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>my-func</span></span><span>;</span></span></div></pre><p>The sub declarator returns a value of type <a href="../type/Sub.html">Sub</a> that can be stored in any container:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>&amp;</span></span><span class="variable other identifier raku"><span>c</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="routine name raku"><span>sub</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Look&nbsp;ma,&nbsp;no&nbsp;name!</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>c</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«Look&nbsp;ma,&nbsp;no&nbsp;name!␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="support type raku"><span>Any</span></span><span class="meta adverb definedness raku"><span class="keyword operator adverb raku"><span>:</span></span><span class="keyword other special-method definedness raku"><span>D</span></span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>f</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="routine name raku"><span>sub</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>Still&nbsp;nameless...</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>f</span></span></span><span>();&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«Still&nbsp;nameless...␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="support type raku"><span>Code</span></span><span>&nbsp;\</span><span class="routine name raku"><span>a</span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="routine name raku"><span>sub</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted single low-q_left_single raku"><span class="punctuation definition string begin raku"><span>‚</span></span><span>raw&nbsp;containers&nbsp;don&#39;t&nbsp;implement&nbsp;postcircumfix:&lt;(&nbsp;)&gt;</span><span class="punctuation definition string end raku"><span>‘</span></span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>a</span></span><span class="keyword operator generic raku"><span>.</span></span><span>();&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«raw&nbsp;containers&nbsp;don&#39;t&nbsp;implement&nbsp;postcircumfix:&lt;(&nbsp;)&gt;␤»</span></span></span></div></pre><p>The declarator <code>sub</code> will declare a new name in the current scope at compile time. As such, any indirection has to be resolved at compile time:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>constant</span></span><span>&nbsp;</span><span class="routine name raku"><span>aname</span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>foo</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span>::</span><span>(</span><span class="routine name raku"><span>aname</span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>oi‽</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>foo</span></span><span>;</span></span></div></pre><p>This will become more useful once macros are added to Raku.</p>
<p>To have the subroutine take arguments, a <a href="../type/Signature.html">signature</a> goes between the subroutine&#39;s name and its body, in parentheses:</p>
<pre class="pod-block-code">sub exclaim <strong>($phrase)</strong> {
    say $phrase ~ &quot;!!!!&quot;
}
exclaim &quot;Howdy, World&quot;;
</pre>
<p>By default, subroutines are <a href="../syntax/my.html">lexically scoped</a>. That is, <code>sub foo {...}</code> is the same as <code>my sub foo {...}</code> and is only defined within the current scope.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>escape</span></span><span>(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>str</span></span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation whitespace comment leading raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;Puts&nbsp;a&nbsp;slash&nbsp;before&nbsp;non-alphanumeric&nbsp;characters</span><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string regexp construct bracket raku"><span>S</span></span><span class="entity name section adverb regexp bracket raku"><span>:g</span></span><span class="punctuation definition regexp bracket raku"><span>[</span></span><span class="string regexp bracket raku"><span class="meta property regexp raku"><span class="punctuation delimiter property regexp raku"><span>&lt;</span></span><span class="keyword operator property regexp raku"><span>-</span></span><span class="variable other identifier regexname raku"><span>alpha</span></span><span>&nbsp;</span><span class="keyword operator property regexp raku"><span>-</span></span><span class="variable other identifier regexname raku"><span>digit</span></span><span class="punctuation delimiter property regexp raku"><span>&gt;</span></span></span></span><span class="punctuation definition regexp bracket raku"><span>]</span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span class="constant character escape raku"><span>\\</span></span><span>$/</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword control repeat raku"><span>given</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>str</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="routine name raku"><span>escape</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>foo#bar?</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«foo\#bar\?␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>escape</span></span><span>(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>str</span></span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="punctuation whitespace comment leading raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;Writes&nbsp;each&nbsp;non-alphanumeric&nbsp;character&nbsp;in&nbsp;its&nbsp;hexadecimal&nbsp;escape</span><span>&nbsp;</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string regexp construct bracket raku"><span>S</span></span><span class="entity name section adverb regexp bracket raku"><span>:g</span></span><span class="punctuation definition regexp bracket raku"><span>[</span></span><span class="string regexp bracket raku"><span class="meta property regexp raku"><span class="punctuation delimiter property regexp raku"><span>&lt;</span></span><span class="keyword operator property regexp raku"><span>-</span></span><span class="variable other identifier regexname raku"><span>alpha</span></span><span>&nbsp;</span><span class="keyword operator property regexp raku"><span>-</span></span><span class="variable other identifier regexname raku"><span>digit</span></span><span class="punctuation delimiter property regexp raku"><span>&gt;</span></span></span></span><span class="punctuation definition regexp bracket raku"><span>]</span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span class="constant character escape raku"><span>\\</span></span><span>x[</span><span class="meta interpolation raku"><span class="punctuation section embedded begin raku"><span>{</span></span><span>&nbsp;</span><span class="keyword other special-method raku"><span>$/</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>ord</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>base</span></span><span>(</span><span class="constant numeric raku"><span>16</span></span><span>)&nbsp;</span><span class="punctuation section embedded end raku"><span>}</span></span></span><span>]</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword control repeat raku"><span>given</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>str</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="routine name raku"><span>escape</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>foo#bar?</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«foo\x[23]bar\x[3F]␤»</span><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;Back&nbsp;to&nbsp;original&nbsp;escape&nbsp;function</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="routine name raku"><span>escape</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>foo#bar?</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«foo\#bar\?␤»</span><span>&nbsp;</span></span></span></div></pre><p>Subroutines don&#39;t have to be named. If unnamed, they&#39;re called <em>anonymous</em> subroutines.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="routine name raku"><span>sub</span></span><span>&nbsp;(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>a</span></span></span><span>,&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>b</span></span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>a</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>**</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>2</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>+</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>b</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>**</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>2</span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>(</span><span class="constant numeric raku"><span>3</span></span><span>,&nbsp;</span><span class="constant numeric raku"><span>4</span></span><span>)&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«25␤»</span></span></span></div></pre><p>But in this case, it&#39;s often desirable to use the more succinct <a href="../type/Block.html">block</a> syntax. Subroutines and blocks can be called in place, as in the example above.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>-&gt;</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>a</span></span></span><span>,&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>b</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>a</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>**</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>2</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>+</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>b</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>**</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>2</span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>(</span><span class="constant numeric raku"><span>3</span></span><span>,&nbsp;</span><span class="constant numeric raku"><span>4</span></span><span>)&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«25␤»</span></span></span></div></pre><p>Or even</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>^</span></span><span class="variable other identifier raku"><span>a</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>**</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>2</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>+</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>^</span></span><span class="variable other identifier raku"><span>b</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>**</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>2</span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>(</span><span class="constant numeric raku"><span>3</span></span><span>,&nbsp;</span><span class="constant numeric raku"><span>4</span></span><span>)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«25␤»</span></span></span></div></pre><p><a name="index-entry-pointy_blocks"></a></p>
<h2 id="Blocks_and_lambdas"><a class="u" href="functions.html#___top" title="go to top of document"><a name="index-entry-->_syntax-Blocks_and_lambdas"><span class="index-entry">Blocks and lambdas</span></a></a></h2>
<p>Whenever you see something like <code>{ $_ + 42 }</code>, <code>-&gt; $a, $b { $a ** $b }</code>, or <code>{ $^text.indent($:spaces) }</code>, that&#39;s <a href="../type/Block.html">Block</a> syntax; the <code>-&gt;</code> is considered also part of the block. Statements such as <code>if</code>, <code>for</code>, <code>while</code> are followed by these kind of blocks.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="keyword control repeat raku"><span>for</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>1</span></span><span>,&nbsp;</span><span class="constant numeric raku"><span>2</span></span><span>,&nbsp;</span><span class="constant numeric raku"><span>3</span></span><span>,&nbsp;</span><span class="constant numeric raku"><span>4</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>-&gt;</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>a</span></span></span><span>,&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>b</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>a</span></span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>~</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>b</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«12␤34␤»</span></span></span></div></pre><p>They can also be used on their own as anonymous blocks of code.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>^</span></span><span class="variable other identifier raku"><span>a</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>**</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>2</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>+</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>^</span></span><span class="variable other identifier raku"><span>b</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>**</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>2</span></span><span class="punctuation definition block raku"><span>}</span></span></span><span>(</span><span class="constant numeric raku"><span>3</span></span><span>,&nbsp;</span><span class="constant numeric raku"><span>4</span></span><span>)&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«25␤»</span></span></span></div></pre><p>Please note that this implies that, despite the fact that statements such as <code>if</code> do not define a topic variable, they actually can:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>foo</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>33</span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="keyword control conditional raku"><span>if</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>foo</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>**</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>33</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>-&gt;</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>a</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>a</span></span><span>&nbsp;is&nbsp;not&nbsp;null</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span><span>&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«129110040087761027839616029934664535539337183380513&nbsp;is&nbsp;not&nbsp;null␤»</span><span>&nbsp;</span></span></span></div></pre><p>For block syntax details, see the documentation for the <a href="../type/Block.html">Block</a> type.</p>
<h2 id="Signatures"><a class="u" href="functions.html#___top" title="go to top of document">Signatures</a></h2>
<p>The parameters that a function accepts are described in its <em>signature</em>.</p>
<pre class="pod-block-code">sub format<strong>(Str $s)</strong> { ... }
-&gt; <strong>$a, $b</strong> { ... }
</pre>
<p>Details about the syntax and use of signatures can be found in the <a href="../type/Signature.html">documentation on the <code>Signature</code> class</a>.</p>
<h3 id="Automatic_signatures"><a class="u" href="functions.html#___top" title="go to top of document">Automatic signatures</a></h3>
<p><a name="index-entry-@__"></a><a name="index-entry-%__"></a> If no signature is provided but either of the two automatic variables <code>@_</code> or <code>%_</code> are used in the function body, a signature with <code>*@_</code> or <code>*%_</code> will be generated. Both automatic variables can be used at the same time.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>s</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>@</span></span><span class="variable other identifier raku"><span>_</span></span></span><span>,&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>%</span></span><span class="variable other identifier raku"><span>_</span></span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>&amp;</span></span><span class="variable other identifier raku"><span>s</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>signature</span></span><span>&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«(*@_,&nbsp;*%_)␤»</span></span></span></div></pre><h2 id="Arguments"><a class="u" href="functions.html#___top" title="go to top of document">Arguments <a name="index-entry-Argument"></a></a></h2>
<p>Arguments are supplied as a comma separated list. To disambiguate nested calls, use parentheses:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>f</span></span><span>(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>&amp;</span></span><span class="variable other identifier raku"><span>c</span></span></span><span>)</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="routine name raku"><span>c</span></span><span>()&nbsp;</span><span class="keyword operator generic raku"><span>*</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>2</span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;call&nbsp;the&nbsp;function&nbsp;reference&nbsp;c&nbsp;with&nbsp;empty&nbsp;parameter&nbsp;list</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>g</span></span><span>(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>p</span></span></span><span>)</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>p</span></span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>-</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>2</span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>(</span><span class="routine name raku"><span>g</span></span><span>(</span><span class="constant numeric raku"><span>42</span></span><span>),&nbsp;</span><span class="constant numeric raku"><span>45</span></span><span>);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;pass&nbsp;only&nbsp;42&nbsp;to&nbsp;g()</span></span></span></div></pre><p>When calling a function, positional arguments should be supplied in the same order as the function&#39;s signature. Named arguments may be supplied in any order, but it&#39;s considered good form to place named arguments after positional arguments. Inside the argument list of a function call, some special syntax is supported:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>f</span></span><span>(</span><span class="keyword operator generic raku"><span>|</span></span><span class="routine name raku"><span>c</span></span><span>)</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span><span>}</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>f</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>named</span></span><span>(</span><span class="constant numeric raku"><span>35</span></span><span>);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;A&nbsp;named&nbsp;argument&nbsp;(in&nbsp;&quot;adverb&quot;&nbsp;form)</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>f</span></span><span>&nbsp;</span><span class="string pair key raku"><span>named&nbsp;</span></span><span class="keyword operator multi-symbol raku"><span>=&gt;</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>35</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;Also&nbsp;a&nbsp;named&nbsp;argument</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>f</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="constant numeric raku"><span>35</span></span><span>named;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;A&nbsp;named&nbsp;argument&nbsp;using&nbsp;abbreviated&nbsp;adverb&nbsp;form</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>f</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>named</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>=&gt;</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>35</span></span><span>;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;Not&nbsp;a&nbsp;named&nbsp;argument,&nbsp;a&nbsp;Pair&nbsp;in&nbsp;a&nbsp;positional&nbsp;argument</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>f</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>hi</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="constant numeric raku"><span>1</span></span><span>x,&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="constant numeric raku"><span>2</span></span><span>y;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;Positional&nbsp;and&nbsp;named&nbsp;arguments</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;\</span><span class="routine name raku"><span>c</span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="span keyword operator array words raku"><span>&lt;</span></span><span class="string array words raku"><span>a&nbsp;b&nbsp;c</span></span><span class="span keyword operator array words raku"><span>&gt;</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support type raku"><span>Capture</span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>f</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>|</span></span><span class="routine name raku"><span>c</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;Merge&nbsp;the&nbsp;contents&nbsp;of&nbsp;Capture&nbsp;$c&nbsp;as&nbsp;if&nbsp;they&nbsp;were&nbsp;supplied</span></span></span></div></pre><p>Arguments passed to a function are conceptually first collected in a <code>Capture</code> container. Details about the syntax and use of these containers can be found in the <a href="../type/Capture.html">documentation on the <code>Capture</code> class</a>.</p>
<p>When using named arguments, note that normal list &quot;pair-chaining&quot; allows one to skip commas between named arguments.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>f</span></span><span>(</span><span class="keyword operator generic raku"><span>|</span></span><span class="routine name raku"><span>c</span></span><span>)</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span><span>}</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>f</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>dest</span></span><span class="span keyword operator array words raku"><span>&lt;</span></span><span class="string array words raku"><span>/tmp/foo</span></span><span class="span keyword operator array words raku"><span>&gt;</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>src</span></span><span class="span keyword operator array words raku"><span>&lt;</span></span><span class="string array words raku"><span>/tmp/bar</span></span><span class="span keyword operator array words raku"><span>&gt;</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>lines</span></span><span>(</span><span class="constant numeric raku"><span>512</span></span><span>);</span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>f</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="constant numeric raku"><span>32</span></span><span>x&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="constant numeric raku"><span>50</span></span><span>y&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="constant numeric raku"><span>110</span></span><span>z;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;This&nbsp;flavor&nbsp;of&nbsp;&quot;adverb&quot;&nbsp;works,&nbsp;too</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>f</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>a</span></span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>b</span></span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>c</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;The&nbsp;spaces&nbsp;are&nbsp;also&nbsp;optional.</span></span></span></div></pre><p>If positional arguments are also passed, then either they must be passed within parentheses placed <em>immediately</em> after the function&#39;s name or the comma after the last positional argument must be kept when chaining named arguments in abbreviated adverb form. The spaces between chained named arguments and the list of positional arguments is optional.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>p</span></span><span>(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>x</span></span></span><span>,&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>y</span></span></span><span>,&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>translate</span></span></span><span>,&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>rotate</span></span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span><span>}</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>p</span></span><span>(</span><span class="constant numeric raku"><span>1</span></span><span>,&nbsp;</span><span class="constant numeric raku"><span>1</span></span><span>,&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>translate</span></span><span>,&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>rotate</span></span><span>);&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;normal&nbsp;way</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>p</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>1</span></span><span>,&nbsp;</span><span class="constant numeric raku"><span>1</span></span><span>,&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>translate</span></span><span>,&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>rotate</span></span><span>;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;also&nbsp;normal&nbsp;way</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>p</span></span><span>(</span><span class="constant numeric raku"><span>1</span></span><span>,&nbsp;</span><span class="constant numeric raku"><span>1</span></span><span>)&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>translate</span></span><span>&nbsp;&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>rotate</span></span><span>;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;parentheses&nbsp;+&nbsp;chained&nbsp;named&nbsp;arguments</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>p</span></span><span>(</span><span class="constant numeric raku"><span>1</span></span><span>,&nbsp;</span><span class="constant numeric raku"><span>1</span></span><span>)&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>translate</span></span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>rotate</span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>p</span></span><span>(</span><span class="constant numeric raku"><span>1</span></span><span>,&nbsp;</span><span class="constant numeric raku"><span>1</span></span><span>)</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>translate</span></span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>rotate</span></span><span>;</span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>p</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>1</span></span><span>,&nbsp;</span><span class="constant numeric raku"><span>1</span></span><span>,&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>translate</span></span><span>&nbsp;&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>rotate</span></span><span>;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;dangling&nbsp;comma&nbsp;+&nbsp;chained&nbsp;named&nbsp;arguments</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>p</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>1</span></span><span>,&nbsp;</span><span class="constant numeric raku"><span>1</span></span><span>,&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>translate</span></span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>rotate</span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>p</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>1</span></span><span>,&nbsp;</span><span class="constant numeric raku"><span>1</span></span><span>,</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>translate</span></span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>rotate</span></span><span>;</span></span></div></pre><h2 id="Return_values"><a class="u" href="functions.html#___top" title="go to top of document">Return values</a></h2>
<p>Any <code>Block</code> or <code>Routine</code> will provide the value of its last expression as a return value to the caller. If either <a href="control.html#return">return</a> or <a href="control.html#return-rw">return-rw</a> is called, then its parameter, if any, will become the return value. The default return value is <a href="../type/Nil.html">Nil</a>.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>a</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>42</span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>b</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="routine name raku"><span>a</span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>c</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>b</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«42␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="routine name raku"><span>c</span></span><span>;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«Nil␤»</span></span></span></div></pre><p>Multiple return values are returned as a list or by creating a <a href="../type/Capture.html">Capture</a>. Destructuring can be used to untangle multiple return values.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>a</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>42</span></span><span>,&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>answer</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>put</span></span><span>&nbsp;</span><span class="routine name raku"><span>a</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>raku</span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«(42,&nbsp;&quot;answer&quot;)␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>n</span></span></span><span>,&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>s</span></span></span><span>)&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="routine name raku"><span>a</span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>put</span></span><span>&nbsp;[</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>s</span></span></span><span>,&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>n</span></span></span><span>];</span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«answer&nbsp;42␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>b</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="span keyword operator array words raku"><span>&lt;</span></span><span class="string array words raku"><span>a&nbsp;b&nbsp;c</span></span><span class="span keyword operator array words raku"><span>&gt;</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support type raku"><span>Capture</span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>put</span></span><span>&nbsp;</span><span class="routine name raku"><span>b</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>raku</span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«\(&quot;a&quot;,&nbsp;&quot;b&quot;,&nbsp;&quot;c&quot;)␤»</span></span></span></div></pre><h2 id="Return_type_constraints"><a class="u" href="functions.html#___top" title="go to top of document">Return type constraints</a></h2>
<p>Raku has many ways to specify a function&#39;s return type:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>foo</span></span><span>(</span><span class="keyword operator multi-symbol raku"><span>--&gt;</span></span><span>&nbsp;</span><span class="support type raku"><span>Int</span></span><span>)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span><span>}</span></span></span><span>;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>&amp;</span></span><span class="variable other identifier raku"><span>foo</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="storage modifier type constraints raku"><span>returns</span></span><span>;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«(Int)␤»</span><span>&nbsp;</span></span></span></div></pre><pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>foo</span></span><span>()&nbsp;</span><span class="storage modifier type constraints raku"><span>returns</span></span><span>&nbsp;</span><span class="support type raku"><span>Int</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span><span>}</span></span></span><span>;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>&amp;</span></span><span class="variable other identifier raku"><span>foo</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="storage modifier type constraints raku"><span>returns</span></span><span>;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«(Int)␤»</span><span>&nbsp;</span></span></span></div></pre><pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>foo</span></span><span>()&nbsp;</span><span class="storage modifier type constraints raku"><span>of</span></span><span>&nbsp;</span><span class="support type raku"><span>Int</span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span><span>}</span></span></span><span>;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>&amp;</span></span><span class="variable other identifier raku"><span>foo</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="storage modifier type constraints raku"><span>returns</span></span><span>;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«(Int)␤»</span><span>&nbsp;</span></span></span></div></pre><pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="support type raku"><span>Int</span></span><span>&nbsp;</span><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>foo</span></span><span>()&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span><span>}</span></span></span><span>;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>&amp;</span></span><span class="variable other identifier raku"><span>foo</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="storage modifier type constraints raku"><span>returns</span></span><span>;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«(Int)␤»</span><span>&nbsp;</span></span></span></div></pre><p>Attempting to return values of another type will cause a compilation error.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>foo</span></span><span>()&nbsp;</span><span class="storage modifier type constraints raku"><span>returns</span></span><span>&nbsp;</span><span class="support type raku"><span>Int</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>a</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>;&nbsp;</span><span class="routine name raku"><span>foo</span></span><span>;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;Type&nbsp;check&nbsp;fails</span><span>&nbsp;</span></span></span></div></pre><p><code>returns</code> and <code>of</code> are equivalent, and both take only a Type since they are declaring a trait of the <a href="../type/Callable.html">Callable</a>. The last declaration is, in fact, a type declaration, which obviously can take only a type. In the other hand, <code>--&gt;</code> can take either undefined or definite values.</p>
<p>Note that <code>Nil</code> and <code>Failure</code> are exempt from return type constraints and can be returned from any routine, regardless of its constraint:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>foo</span></span><span>()&nbsp;</span><span class="storage modifier type constraints raku"><span>returns</span></span><span>&nbsp;</span><span class="support type raku"><span>Int</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="keyword control control-handlers raku"><span>fail</span></span><span>&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>;&nbsp;</span><span class="routine name raku"><span>foo</span></span><span>;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;Failure&nbsp;returned</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>bar</span></span><span>()&nbsp;</span><span class="storage modifier type constraints raku"><span>returns</span></span><span>&nbsp;</span><span class="support type raku"><span>Int</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="keyword control flowcontrol raku"><span>return</span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>;&nbsp;</span><span class="routine name raku"><span>bar</span></span><span>;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;Nil&nbsp;returned</span><span>&nbsp;</span></span></span></div></pre><h2 id="Multi-dispatch"><a class="u" href="functions.html#___top" title="go to top of document"><a name="index-entry-declarator_multi-Multi-dispatch"><span class="index-entry">Multi-dispatch</span></a></a></h2>
<p>Raku allows for writing several routines with the same name but different signatures. When the routine is called by name, the runtime environment determines the proper <em>candidate</em> and invokes it.</p>
<p>Each candidate is declared with the <code>multi</code> keyword. Dispatch happens depending on the parameter <a href="../type/Code.html#method_arity">arity</a> (number), type and name; and under some circumstances the order of the multi declarations. Consider the following example:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;version&nbsp;1</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>multi</span></span><span>&nbsp;</span><span class="entity name function raku"><span>happy-birthday</span></span><span>(&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>name</span></span></span><span>&nbsp;)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Happy&nbsp;Birthday&nbsp;</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>name</span></span><span>&nbsp;!</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;version&nbsp;2</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>multi</span></span><span>&nbsp;</span><span class="entity name function raku"><span>happy-birthday</span></span><span>(&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>name</span></span></span><span>,&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>age</span></span></span><span>&nbsp;)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Happy&nbsp;</span><span class="meta interpolation raku"><span class="punctuation section embedded begin raku"><span>{</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>age</span></span></span><span class="punctuation section embedded end raku"><span>}</span></span></span><span>th&nbsp;Birthday&nbsp;</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>name</span></span><span>&nbsp;!</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;version&nbsp;3</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>multi</span></span><span>&nbsp;</span><span class="entity name function raku"><span>happy-birthday</span></span><span>(&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>name</span></span></span><span>,&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>age</span></span></span><span>,&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>title</span></span></span><span>&nbsp;&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>Mr</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>&nbsp;)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Happy&nbsp;</span><span class="meta interpolation raku"><span class="punctuation section embedded begin raku"><span>{</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>age</span></span></span><span class="punctuation section embedded end raku"><span>}</span></span></span><span>th&nbsp;Birthday&nbsp;</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>title</span></span><span>&nbsp;</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>name</span></span><span>&nbsp;!</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;calls&nbsp;version&nbsp;1&nbsp;(arity)</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>happy-birthday</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>Larry</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«Happy&nbsp;Birthday&nbsp;Larry&nbsp;!␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;calls&nbsp;version&nbsp;2&nbsp;(arity)</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>happy-birthday</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>Luca</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="constant numeric raku"><span>40</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«Happy&nbsp;40th&nbsp;Birthday&nbsp;Luca&nbsp;!␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;calls&nbsp;version&nbsp;3</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;(named&nbsp;arguments&nbsp;win&nbsp;against&nbsp;arity)</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>happy-birthday</span></span><span>(&nbsp;</span><span class="string pair key raku"><span>age&nbsp;</span></span><span class="keyword operator multi-symbol raku"><span>=&gt;</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>50</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="string pair key raku"><span>name&nbsp;</span></span><span class="keyword operator multi-symbol raku"><span>=&gt;</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>John</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>&nbsp;);&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«Happy&nbsp;50th&nbsp;Birthday&nbsp;Mr&nbsp;John&nbsp;!␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;calls&nbsp;version&nbsp;2&nbsp;(arity)</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>happy-birthday</span></span><span>(&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>Jack</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="constant numeric raku"><span>25</span></span><span>&nbsp;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«Happy&nbsp;25th&nbsp;Birthday&nbsp;Jack&nbsp;!␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div></pre><p>The first two versions of the <code>happy-birthday</code> sub differs only in the arity (number of arguments), while the third version uses named arguments and is chosen only when named arguments are used, even if the arity is the same of another <code>multi</code> candidate.</p>
<p>When two sub have the same arity, the type of the arguments drive the dispatch; when there are named arguments they drive the dispatch even when their type is the same as another candidate:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>multi</span></span><span>&nbsp;</span><span class="entity name function raku"><span>happy-birthday</span></span><span>(&nbsp;</span><span class="support type raku"><span>Str</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>name</span></span></span><span>,&nbsp;</span><span class="support type raku"><span>Int</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>age</span></span></span><span>&nbsp;)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Happy&nbsp;</span><span class="meta interpolation raku"><span class="punctuation section embedded begin raku"><span>{</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>age</span></span></span><span class="punctuation section embedded end raku"><span>}</span></span></span><span>th&nbsp;Birthday&nbsp;</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>name</span></span><span>&nbsp;!</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>multi</span></span><span>&nbsp;</span><span class="entity name function raku"><span>happy-birthday</span></span><span>(&nbsp;</span><span class="support type raku"><span>Str</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>name</span></span></span><span>,&nbsp;</span><span class="support type raku"><span>Str</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>title</span></span></span><span>&nbsp;)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Happy&nbsp;Birthday&nbsp;</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>title</span></span><span>&nbsp;</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>name</span></span><span>&nbsp;!</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>multi</span></span><span>&nbsp;</span><span class="entity name function raku"><span>happy-birthday</span></span><span>(&nbsp;</span><span class="support type raku"><span>Str</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>name</span></span></span><span>,&nbsp;</span><span class="support type raku"><span>Int</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>age</span></span></span><span>&nbsp;)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Happy&nbsp;Birthday&nbsp;</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>name</span></span><span>,&nbsp;you&nbsp;turned&nbsp;</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>age</span></span><span>&nbsp;!</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>happy-birthday</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>Luca</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="constant numeric raku"><span>40</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«Happy&nbsp;40th&nbsp;Birthday&nbsp;Luca&nbsp;!␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>happy-birthday</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>Luca</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>Mr</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«Happy&nbsp;Birthday&nbsp;Mr&nbsp;Luca&nbsp;!␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>happy-birthday</span></span><span>&nbsp;</span><span class="string pair key raku"><span>age&nbsp;</span></span><span class="keyword operator multi-symbol raku"><span>=&gt;</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>40</span></span><span>,&nbsp;</span><span class="string pair key raku"><span>name&nbsp;</span></span><span class="keyword operator multi-symbol raku"><span>=&gt;</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>Luca</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«Happy&nbsp;Birthday&nbsp;Luca,&nbsp;you&nbsp;turned&nbsp;40&nbsp;!␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div></pre><p>Named parameters participate in the dispatch even if they are not provided in the call. Therefore a multi candidate with named parameters will be given precedence.</p>
<p>For more information about type constraints see the documentation for the <a href="../type/Signature.html#Type_constraints">Signature</a> class.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>multi</span></span><span>&nbsp;</span><span class="entity name function raku"><span>as-json</span></span><span>(</span><span class="support type raku"><span>Bool</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>d</span></span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>d</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>??</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>true</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>!!</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>false</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>multi</span></span><span>&nbsp;</span><span class="entity name function raku"><span>as-json</span></span><span>(</span><span class="support type raku"><span>Real</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>d</span></span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>~</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>d</span></span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>multi</span></span><span>&nbsp;</span><span class="entity name function raku"><span>as-json</span></span><span>(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>@</span></span><span class="variable other identifier raku"><span>d</span></span></span><span>)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="support function raku"><span>sprintf</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>[%s]</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>@</span></span><span class="variable other identifier raku"><span>d</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>map</span></span><span>(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>&amp;</span></span><span class="variable other identifier raku"><span>as-json</span></span></span><span>)</span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>join</span></span><span>(</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>,&nbsp;</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>)&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="routine name raku"><span>as-json</span></span><span>(&nbsp;</span><span class="constant language boolean raku"><span>True</span></span><span>&nbsp;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«true␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="routine name raku"><span>as-json</span></span><span>(&nbsp;</span><span class="constant numeric raku"><span>10.3</span></span><span>&nbsp;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«10.3␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="routine name raku"><span>as-json</span></span><span>(&nbsp;[&nbsp;</span><span class="constant language boolean raku"><span>True</span></span><span>,&nbsp;</span><span class="constant numeric raku"><span>10.3</span></span><span>,&nbsp;</span><span class="constant language boolean raku"><span>False</span></span><span>,&nbsp;</span><span class="constant numeric raku"><span>24</span></span><span>&nbsp;]&nbsp;);&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«[true,&nbsp;10.3,&nbsp;false,&nbsp;24]␤»</span></span></span></div></pre><p>For some signature differences (notably when using a where clause or a subset) the order of definition of the multi methods or subs is used, evaluating each possibility in turn. See <a href="https://rakudocs.github.io/language/language/functions#multi_resolution_by_order_of_definition">multi resolution by order of definition</a> below for examples.</p>
<p><code>multi</code> without any specific routine type always defaults to a <code>sub</code>, but you can use it on methods as well. The candidates are all the multi methods of the object:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>class</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>Congrats</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type declarator multi raku"><span>multi</span></span><span>&nbsp;</span><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>congratulate</span></span><span>(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>reason</span></span></span><span>,&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>name</span></span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Hooray&nbsp;for&nbsp;your&nbsp;</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>reason</span></span><span>,&nbsp;</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>name</span></span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>role</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>BirthdayCongrats</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type declarator multi raku"><span>multi</span></span><span>&nbsp;</span><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>congratulate</span></span><span>(</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>birthday</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>name</span></span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Happy&nbsp;birthday,&nbsp;</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>name</span></span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type declarator multi raku"><span>multi</span></span><span>&nbsp;</span><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>congratulate</span></span><span>(</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>birthday</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>name</span></span></span><span>,&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>age</span></span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Happy&nbsp;</span><span class="meta interpolation raku"><span class="punctuation section embedded begin raku"><span>{</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>age</span></span></span><span class="punctuation section embedded end raku"><span>}</span></span></span><span>th&nbsp;birthday,&nbsp;</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>name</span></span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>congrats</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="routine name raku"><span>Congrats</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>new</span></span><span>&nbsp;</span><span class="storage modifier type constraints raku"><span>does</span></span><span>&nbsp;</span><span class="routine name raku"><span>BirthdayCongrats</span></span><span>;</span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>congrats</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>congratulate</span></span><span>(</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>promotion</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>,</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>Cindy</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>);&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«Hooray&nbsp;for&nbsp;your&nbsp;promotion,&nbsp;Cindy␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>congrats</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>congratulate</span></span><span>(</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>birthday</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>,</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>Bob</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>);&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«Happy&nbsp;birthday,&nbsp;Bob␤»</span></span></span></div></pre><p>Unlike <code>sub</code>, if you use named parameters with multi methods, the parameters must be required parameters to behave as expected.</p>
<p>Please note that a non-multi sub or operator will hide multi candidates of the same name in any parent scope or child scope. The same is true for imported non-multi candidates.</p>
<p>Multi-dispatch can also work on parameter traits, with routines with <code>is rw</code> parameters having a higher priority than those that do not:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="routine name raku"><span>proto</span></span><span>&nbsp;</span><span class="routine name raku"><span>þoo</span></span><span>&nbsp;</span><span class="keyword operator setbagmix raku"><span>(|)</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span class="keyword operator generic raku"><span>*</span></span><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span class="storage type declarator multi raku"><span>multi</span></span><span>&nbsp;</span><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>þoo</span></span><span>(&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>ðar</span></span></span><span>&nbsp;</span><span class="storage modifier type constraints raku"><span>is</span></span><span>&nbsp;</span><span class="entity name type trait raku"><span>rw</span></span><span>&nbsp;)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>ðar</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>42</span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span class="storage type declarator multi raku"><span>multi</span></span><span>&nbsp;</span><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>þoo</span></span><span>(&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>ðar</span></span></span><span>&nbsp;)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>ðar</span></span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>+</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>42</span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>bar</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>7</span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="routine name raku"><span>þoo</span></span><span>(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>bar</span></span></span><span>);&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«42»</span><span>&nbsp;</span></span></span></div></pre><h3 id="proto"><a class="u" href="functions.html#___top" title="go to top of document"><a name="index-entry-declarator-proto"><span class="index-entry">proto</span></a></a></h3>
<p><code>proto</code> is a way to formally declare commonalities between <code>multi</code> candidates. It acts as a wrapper that can validate but not modify arguments. Consider this basic example:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="routine name raku"><span>proto</span></span><span>&nbsp;</span><span class="routine name raku"><span>congratulate</span></span><span>(</span><span class="support type raku"><span>Str</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>reason</span></span></span><span>,&nbsp;</span><span class="support type raku"><span>Str</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>name</span></span></span><span>,&nbsp;</span><span class="keyword operator generic raku"><span>|</span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span class="keyword operator generic raku"><span>*</span></span><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>multi</span></span><span>&nbsp;</span><span class="entity name function raku"><span>congratulate</span></span><span>(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>reason</span></span></span><span>,&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>name</span></span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Hooray&nbsp;for&nbsp;your&nbsp;</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>reason</span></span><span>,&nbsp;</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>name</span></span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>multi</span></span><span>&nbsp;</span><span class="entity name function raku"><span>congratulate</span></span><span>(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>reason</span></span></span><span>,&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>name</span></span></span><span>,&nbsp;</span><span class="support type raku"><span>Int</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>rank</span></span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Hooray&nbsp;for&nbsp;your&nbsp;</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>reason</span></span><span>,&nbsp;</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>name</span></span><span>&nbsp;--&nbsp;got&nbsp;rank&nbsp;</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>rank</span></span><span>!</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>congratulate</span></span><span>(</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>being&nbsp;a&nbsp;cool&nbsp;number</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>Fred</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OK</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>congratulate</span></span><span>(</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>being&nbsp;a&nbsp;cool&nbsp;number</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>Fred</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="constant numeric raku"><span>42</span></span><span>);&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OK</span></span></span></div></pre><pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="routine name raku"><span>congratulate</span></span><span>(</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>being&nbsp;a&nbsp;cool&nbsp;number</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="constant numeric raku"><span>42</span></span><span>);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;Proto&nbsp;match&nbsp;error</span><span>&nbsp;</span></span></span></div></pre><p>The proto insists that all <code>multi congratulate</code> subs conform to the basic signature of two strings, optionally followed by further parameters. The <code>|</code> is an un-named <code>Capture</code> parameter, and allows a <code>multi</code> to take additional arguments. The first two calls succeed, but the third fails (at compile time) because <code>42</code> doesn&#39;t match <code>Str</code>.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>&amp;</span></span><span class="variable other identifier raku"><span>congratulate</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>signature</span></span><span>&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«(Str&nbsp;$reason,&nbsp;Str&nbsp;$name,&nbsp;|&nbsp;is&nbsp;raw)␤»</span><span>&nbsp;</span></span></span></div></pre><p>You can give the <code>proto</code> a function body, and place the <code>{*}</code> (note there is no whitespace inside the curly braces) where you want the dispatch to be done. This can be useful when you have a &quot;hole&quot; in your routine that gives it different behavior depending on the arguments given:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;attempts&nbsp;to&nbsp;notify&nbsp;someone&nbsp;--&nbsp;False&nbsp;if&nbsp;unsuccessful</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>proto</span></span><span>&nbsp;</span><span class="routine name raku"><span>notify</span></span><span>(</span><span class="support type raku"><span>Str</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>user</span></span></span><span>,&nbsp;</span><span class="support type raku"><span>Str</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>msg</span></span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;\</span><span class="routine name raku"><span>hour</span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="support type raku"><span>DateTime</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>now</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>hour</span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;</span><span class="keyword control conditional raku"><span>if</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>8</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>&lt;</span></span><span>&nbsp;</span><span class="routine name raku"><span>hour</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>&lt;</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>22</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control flowcontrol raku"><span>return</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span class="keyword operator generic raku"><span>*</span></span><span class="punctuation definition block raku"><span>}</span></span></span><span>;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>&nbsp;</span><span class="keyword control conditional raku"><span>else</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="punctuation whitespace comment leading raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;we&nbsp;can&#39;t&nbsp;notify&nbsp;someone&nbsp;when&nbsp;they&nbsp;might&nbsp;be&nbsp;sleeping</span><span>&nbsp;</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control flowcontrol raku"><span>return</span></span><span>&nbsp;</span><span class="constant language boolean raku"><span>False</span></span><span>;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div></pre><p>Since <code>proto</code> is a wrapper for <code>multi</code> candidates, the signatures of the routine&#39;s <code>multi</code> candidates do not necessarily have to match that of the <code>proto</code>; arguments of <code>multi</code> candidates may have subtypes of those of the <code>proto</code>, and the return types of the <code>multi</code> candidates may be entirely different from that of the <code>proto</code>. Using differing types like this is especially useful when giving <code>proto</code> a function body:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>enum</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>DebugType</span></span></span><span>&nbsp;</span><span class="span keyword operator array words raku"><span>&lt;</span></span><span class="string array words raku"><span>LOG&nbsp;WARNING&nbsp;ERROR</span></span><span class="span keyword operator array words raku"><span>&gt;</span></span><span>;</span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="meta documentation block declarator raku"><span class="comment punctuation pound raku"><span>#</span></span><span class="meta declarator raku"><span>|</span></span><span class="comment inline declarator raku"><span>[&nbsp;Prints&nbsp;a&nbsp;message&nbsp;to&nbsp;stderr&nbsp;with&nbsp;a&nbsp;color-coded&nbsp;key.&nbsp;]</span></span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>proto</span></span><span>&nbsp;</span><span class="routine name raku"><span>debug</span></span><span>(</span><span class="routine name raku"><span>DebugType</span></span><span class="meta adverb definedness raku"><span class="keyword operator adverb raku"><span>:</span></span><span class="keyword other special-method definedness raku"><span>D</span></span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>type</span></span></span><span>,&nbsp;</span><span class="support type raku"><span>Str</span></span><span class="meta adverb definedness raku"><span class="keyword operator adverb raku"><span>:</span></span><span class="keyword other special-method definedness raku"><span>D</span></span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>message</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>--&gt;</span></span><span>&nbsp;</span><span class="support type raku"><span>Bool</span></span><span class="meta adverb definedness raku"><span class="keyword operator adverb raku"><span>:</span></span><span class="keyword other special-method definedness raku"><span>_</span></span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>note</span></span><span>&nbsp;</span><span class="support function raku"><span>sprintf</span></span><span>&nbsp;</span><span class="string quoted q operator raku"><span>qb</span></span><span class="punctuation definition string raku"><span>/</span></span><span class="string quoted q slash quote raku"><span>\e[1;%dm[%s]\e[0m&nbsp;%s</span></span><span class="punctuation definition string raku"><span>/</span></span><span>,&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span class="keyword operator generic raku"><span>*</span></span><span class="punctuation definition block raku"><span>}</span></span></span><span>,&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>type</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>key</span></span><span>,&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>message</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>multi</span></span><span>&nbsp;</span><span class="entity name function raku"><span>debug</span></span><span>(</span><span class="routine name raku"><span>LOG</span></span><span>;;&nbsp;</span><span class="support type raku"><span>Str</span></span><span class="meta adverb definedness raku"><span class="keyword operator adverb raku"><span>:</span></span><span class="keyword other special-method definedness raku"><span>D</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>--&gt;</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>32</span></span><span>)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>multi</span></span><span>&nbsp;</span><span class="entity name function raku"><span>debug</span></span><span>(</span><span class="routine name raku"><span>WARNING</span></span><span>;;&nbsp;</span><span class="support type raku"><span>Str</span></span><span class="meta adverb definedness raku"><span class="keyword operator adverb raku"><span>:</span></span><span class="keyword other special-method definedness raku"><span>D</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>--&gt;</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>33</span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>multi</span></span><span>&nbsp;</span><span class="entity name function raku"><span>debug</span></span><span>(</span><span class="routine name raku"><span>ERROR</span></span><span>;;&nbsp;</span><span class="support type raku"><span>Str</span></span><span class="meta adverb definedness raku"><span class="keyword operator adverb raku"><span>:</span></span><span class="keyword other special-method definedness raku"><span>D</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>--&gt;</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>31</span></span><span>)&nbsp;&nbsp;&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></div></pre><p><code>{*}</code> always dispatches to candidates with the parameters it&#39;s called with. Parameter defaults and type coercions will work but are not passed on.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="routine name raku"><span>proto</span></span><span>&nbsp;</span><span class="routine name raku"><span>mistake-proto</span></span><span>(</span><span class="support type raku"><span>Str</span></span><span>()&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>str</span></span></span><span>,&nbsp;</span><span class="support type raku"><span>Int</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>number</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>42</span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span class="keyword operator generic raku"><span>*</span></span><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>multi</span></span><span>&nbsp;</span><span class="entity name function raku"><span>mistake-proto</span></span><span>(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>str</span></span></span><span>,&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>number</span></span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>str</span></span></span><span class="keyword operator generic raku"><span>.</span><span>^</span></span><span class="support function raku"><span>name</span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>mistake-proto</span></span><span>(</span><span class="constant numeric raku"><span>7</span></span><span>,&nbsp;</span><span class="constant numeric raku"><span>42</span></span><span>);&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«Int␤»&nbsp;--&nbsp;not&nbsp;passed&nbsp;on</span><span>&nbsp;</span></span></span></div></pre><pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="routine name raku"><span>mistake-proto</span></span><span>(</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>test</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>);&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;fails&nbsp;--&nbsp;not&nbsp;passed&nbsp;on</span><span>&nbsp;</span></span></span></div></pre><p>A longer example using <code>proto</code> for methods shows how to extract common functionality into a proto method.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>class</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>NewClass</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator raku"><span>has</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>.</span></span><span class="variable other identifier raku"><span>debug</span></span></span><span>&nbsp;</span><span class="storage modifier type constraints raku"><span>is</span></span><span>&nbsp;</span><span class="entity name type trait raku"><span>rw</span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="constant language boolean raku"><span>False</span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator raku"><span>has</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>.</span></span><span class="variable other identifier raku"><span>value</span></span></span><span>&nbsp;</span><span class="storage modifier type constraints raku"><span>is</span></span><span>&nbsp;</span><span class="entity name type trait raku"><span>rw</span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>Initial&nbsp;value</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type declarator multi raku"><span>proto</span></span><span>&nbsp;</span><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>handle</span></span><span>(&nbsp;</span><span class="keyword operator generic raku"><span>|</span></span><span>&nbsp;)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>note</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>before&nbsp;value&nbsp;is&nbsp;｢</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil interpolated raku"><span>.</span></span><span>value</span></span><span>｣</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword control conditional raku"><span>if</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>.</span></span><span class="variable other identifier raku"><span>debug</span></span></span><span>;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span class="keyword operator generic raku"><span>*</span></span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>note</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>after&nbsp;value&nbsp;is&nbsp;｢</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil interpolated raku"><span>.</span></span><span>value</span></span><span>｣</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword control conditional raku"><span>if</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>.</span></span><span class="variable other identifier raku"><span>debug</span></span></span><span>;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type declarator multi raku"><span>multi</span></span><span>&nbsp;</span><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>handle</span></span><span>(</span><span class="support type raku"><span>Str</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>s</span></span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>.</span></span><span class="variable other identifier raku"><span>value</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>s</span></span></span><span>;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>in&nbsp;string</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type declarator multi raku"><span>multi</span></span><span>&nbsp;</span><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>handle</span></span><span>(</span><span class="support type raku"><span>Positional</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>s</span></span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>.</span></span><span class="variable other identifier raku"><span>value</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>s</span></span></span><span>[</span><span class="constant numeric raku"><span>0</span></span><span>];</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>in&nbsp;positional</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type declarator multi raku"><span>multi</span></span><span>&nbsp;</span><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>handle</span></span><span>(&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>a</span></span></span><span>,&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>b</span></span></span><span>&nbsp;)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>.</span></span><span class="variable other identifier raku"><span>value</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>a</span></span><span>&nbsp;is&nbsp;looking&nbsp;askance&nbsp;at&nbsp;</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>b</span></span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>with&nbsp;more&nbsp;than&nbsp;one&nbsp;value</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="routine name raku"><span>NewClass</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>x</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>.=</span></span><span>&nbsp;</span><span class="support function raku"><span>new</span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>x</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>handle</span></span><span>(</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>hello&nbsp;world</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>);</span></span></div><div class="line"><span class="source raku"><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>x</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>handle</span></span><span>(</span><span class="span keyword operator array words raku"><span>&lt;</span></span><span class="string array words raku"><span>hello&nbsp;world</span></span><span class="span keyword operator array words raku"><span>&gt;</span></span><span>);</span></span></div><div class="line"><span class="source raku"><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>x</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>debug</span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="constant language boolean raku"><span>True</span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>x</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>handle</span></span><span>(</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>hello&nbsp;world</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>);</span></span></div><div class="line"><span class="source raku"><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>x</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>handle</span></span><span>(</span><span class="span keyword operator array words raku"><span>&lt;</span></span><span class="string array words raku"><span>hello&nbsp;world</span></span><span class="span keyword operator array words raku"><span>&gt;</span></span><span>);</span></span></div><div class="line"><span class="source raku"><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>x</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>handle</span></span><span>(</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>Claire</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>John</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>);</span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;in&nbsp;string</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;in&nbsp;positional</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;before&nbsp;value&nbsp;is&nbsp;｢hello｣</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;in&nbsp;string</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;after&nbsp;value&nbsp;is&nbsp;｢hello&nbsp;world｣</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;before&nbsp;value&nbsp;is&nbsp;｢hello&nbsp;world｣</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;in&nbsp;positional</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;after&nbsp;value&nbsp;is&nbsp;｢hello｣</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;before&nbsp;value&nbsp;is&nbsp;｢hello｣</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;with&nbsp;more&nbsp;than&nbsp;one&nbsp;value</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;after&nbsp;value&nbsp;is&nbsp;｢Claire&nbsp;is&nbsp;looking&nbsp;askance&nbsp;at&nbsp;John｣</span><span>&nbsp;</span></span></span></div></pre><h3 id="only"><a class="u" href="functions.html#___top" title="go to top of document"><a name="index-entry-declarator-only"><span class="index-entry">only</span></a></a></h3>
<p>The <code>only</code> keyword preceding <code>sub</code> or <code>method</code> indicates that it will be the only function with that name that inhabits a given namespace.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>only</span></span><span>&nbsp;</span><span class="entity name function raku"><span>sub</span></span><span>&nbsp;</span><span class="routine name raku"><span>you</span></span><span>&nbsp;()&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Can&nbsp;make&nbsp;all&nbsp;the&nbsp;world&nbsp;seem&nbsp;right</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span class="punctuation definition block raku"><span>}</span></span></span><span>;</span></span></div></pre><p>This will make other declarations in the same namespace, such as</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>you</span></span><span>&nbsp;(&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>can</span></span></span><span>&nbsp;)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Make&nbsp;the&nbsp;darkness&nbsp;bright</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></div></pre><p>fail with an exception of type <code>X::Redeclaration</code>. <code>only</code> is the default value for all subs; in the case above, not declaring the first subroutine as <code>only</code> will yield exactly the same error; however, nothing prevents future developers from declaring a proto and preceding the names with <code>multi</code>. Using <code>only</code> before a routine is a <a href="https://en.wikipedia.org/wiki/Defensive_programming">defensive programming</a> feature that declares the intention of not having routines with the same name declared in the same namespace in the future.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span>(</span><span class="keyword control flowcontrol raku"><span>exit</span></span><span>&nbsp;</span><span class="routine name raku"><span>code</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>1</span></span><span>)</span></span></div><div class="line"><span class="source raku"><span class="keyword operator multi-symbol raku"><span>===</span></span><span class="routine name raku"><span>SORRY</span></span><span class="keyword operator generic raku"><span>!</span></span><span class="keyword operator multi-symbol raku"><span>===</span></span><span>&nbsp;</span><span class="routine name raku"><span>Error</span></span><span>&nbsp;</span><span class="keyword control repeat raku"><span>while</span></span><span>&nbsp;</span><span class="routine name raku"><span>compiling</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>/</span></span><span class="routine name raku"><span>tmp</span></span><span class="keyword operator generic raku"><span>/</span></span><span class="routine name raku"><span>only-redeclaration</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>p6</span></span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>Redeclaration</span></span><span>&nbsp;</span><span class="storage modifier type constraints raku"><span>of</span></span><span>&nbsp;</span><span class="routine name raku"><span>routine</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>you</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>&nbsp;(</span><span class="routine name raku"><span>did</span></span><span>&nbsp;</span><span class="routine name raku"><span>you</span></span><span>&nbsp;</span><span class="routine name raku"><span>mean</span></span><span>&nbsp;</span><span class="support function raku"><span>to</span></span><span>&nbsp;</span><span class="routine name raku"><span>declare</span></span><span>&nbsp;</span><span class="routine name raku"><span>a</span></span><span>&nbsp;</span><span class="routine name raku"><span>multi-sub</span></span><span class="keyword operator generic raku"><span>?</span></span><span>)</span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>at</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>/</span></span><span class="routine name raku"><span>tmp</span></span><span class="keyword operator generic raku"><span>/</span></span><span class="routine name raku"><span>only-redeclaration</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>p6</span></span><span class="keyword operator generic raku"><span>:</span></span><span class="constant numeric raku"><span>3</span></span></span></div><div class="line"><span class="source raku"><span class="keyword operator multi-symbol raku"><span>--</span><span>--</span><span>--&gt;</span></span><span>&nbsp;</span><span class="span keyword operator array words raku"><span>&lt;</span></span><span class="string array words raku"><span>BOL</span></span><span class="span keyword operator array words raku"><span>&gt;</span></span><span>⏏</span><span class="span keyword operator array words raku"><span>&lt;</span></span><span class="string array words raku"><span>EOL</span></span><span class="span keyword operator array words raku"><span>&gt;</span></span></span></div></pre><p>Anonymous subs cannot be declared <code>only</code>. <code>only sub {}</code> will throw an error of type, surprisingly, <code>X::Anon::Multi</code>.</p>
<h3 id="multi_resolution_by_order_of_definition"><a class="u" href="functions.html#___top" title="go to top of document">multi resolution by order of definition</a></h3>
<p>When the breakdown by parameter type is not enough to find an unambiguous match, there are some different tie breakers that may be evaluated in order of declaration of the methods or subs: these include where clauses and subsets, named parameters, and signature unpacks.</p>
<p>In this code example, two multi subs are distinguished only by where clauses where there&#39;s one ambiguous case that might pass either of them, the value 4. In this case, which ever multi sub is defined first wins:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;</span><span class="storage type declarator multi raku"><span>multi</span></span><span>&nbsp;</span><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>check_range</span></span><span>&nbsp;(&nbsp;</span><span class="support type raku"><span>Int</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>n</span></span></span><span>&nbsp;</span><span class="storage modifier type constraints raku"><span>where</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>_</span></span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>&gt;</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>3</span></span><span class="punctuation definition block raku"><span>}</span></span></span><span>&nbsp;)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control flowcontrol raku"><span>return</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>over&nbsp;3</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;</span><span class="storage type declarator multi raku"><span>multi</span></span><span>&nbsp;</span><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>check_range</span></span><span>&nbsp;(&nbsp;</span><span class="support type raku"><span>Int</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>n</span></span></span><span>&nbsp;</span><span class="storage modifier type constraints raku"><span>where</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>_</span></span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>&lt;</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>5</span></span><span class="punctuation definition block raku"><span>}</span></span></span><span>&nbsp;)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control flowcontrol raku"><span>return</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>under&nbsp;5</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="routine name raku"><span>check_range</span></span><span>(</span><span class="constant numeric raku"><span>4</span></span><span>);&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;over&nbsp;3</span><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;</span><span class="storage type declarator multi raku"><span>multi</span></span><span>&nbsp;</span><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>check_range</span></span><span>&nbsp;(&nbsp;</span><span class="support type raku"><span>Int</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>n</span></span></span><span>&nbsp;</span><span class="storage modifier type constraints raku"><span>where</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>_</span></span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>&lt;</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>5</span></span><span class="punctuation definition block raku"><span>}</span></span></span><span>&nbsp;)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control flowcontrol raku"><span>return</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>under&nbsp;5</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;</span><span class="storage type declarator multi raku"><span>multi</span></span><span>&nbsp;</span><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>check_range</span></span><span>&nbsp;(&nbsp;</span><span class="support type raku"><span>Int</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>n</span></span></span><span>&nbsp;</span><span class="storage modifier type constraints raku"><span>where</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>_</span></span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>&gt;</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>3</span></span><span class="punctuation definition block raku"><span>}</span></span></span><span>&nbsp;)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control flowcontrol raku"><span>return</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>over&nbsp;3</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="routine name raku"><span>check_range</span></span><span>(</span><span class="constant numeric raku"><span>4</span></span><span>);&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;under&nbsp;5</span><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div></pre><p>In the following example, three subsets are used to restrict strings to certain allowed values, where there are overlaps between all three:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>subset</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>Monster</span></span></span><span>&nbsp;&nbsp;</span><span class="storage modifier type constraints raku"><span>of</span></span><span>&nbsp;</span><span class="support type raku"><span>Str</span></span><span>&nbsp;</span><span class="storage modifier type constraints raku"><span>where</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>_</span></span></span><span>&nbsp;</span><span class="keyword operator word raku"><span>eq</span></span><span>&nbsp;</span><span class="support function raku"><span>any</span></span><span>(</span><span>&nbsp;</span><span class="span keyword operator array words raku"><span>&lt;</span></span><span class="string array words raku"><span>godzilla&nbsp;gammera&nbsp;ghidora</span></span><span class="span keyword operator array words raku"><span>&gt;</span></span><span>&nbsp;)&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>subset</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>Hero</span></span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier type constraints raku"><span>of</span></span><span>&nbsp;</span><span class="support type raku"><span>Str</span></span><span>&nbsp;</span><span class="storage modifier type constraints raku"><span>where</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>_</span></span></span><span>&nbsp;</span><span class="keyword operator word raku"><span>eq</span></span><span>&nbsp;</span><span class="support function raku"><span>any</span></span><span>(</span><span>&nbsp;</span><span class="span keyword operator array words raku"><span>&lt;</span></span><span class="string array words raku"><span>godzilla&nbsp;ultraman&nbsp;inframan</span></span><span class="span keyword operator array words raku"><span>&gt;</span></span><span>&nbsp;)&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>subset</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>Knockoff</span></span></span><span>&nbsp;</span><span class="storage modifier type constraints raku"><span>of</span></span><span>&nbsp;</span><span class="support type raku"><span>Str</span></span><span>&nbsp;</span><span class="storage modifier type constraints raku"><span>where</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>_</span></span></span><span>&nbsp;</span><span class="keyword operator word raku"><span>eq</span></span><span>&nbsp;</span><span class="support function raku"><span>any</span></span><span>(</span><span>&nbsp;</span><span class="span keyword operator array words raku"><span>&lt;</span></span><span class="string array words raku"><span>gammera&nbsp;inframan&nbsp;thorndike</span></span><span class="span keyword operator array words raku"><span>&gt;</span></span><span>&nbsp;)&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type declarator multi raku"><span>multi</span></span><span>&nbsp;</span><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>speak</span></span><span>&nbsp;(</span><span class="routine name raku"><span>Monster</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>name</span></span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>The&nbsp;monster,&nbsp;</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>name</span></span><span>&nbsp;roars!</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type declarator multi raku"><span>multi</span></span><span>&nbsp;</span><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>speak</span></span><span>&nbsp;(</span><span class="routine name raku"><span>Hero</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>name</span></span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>The&nbsp;hero,&nbsp;</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>name</span></span><span>&nbsp;shouts!</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type declarator multi raku"><span>multi</span></span><span>&nbsp;</span><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>speak</span></span><span>&nbsp;(</span><span class="routine name raku"><span>Knockoff</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>name</span></span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>The&nbsp;knockoff,&nbsp;</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>name</span></span><span>,&nbsp;slinks&nbsp;away...</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="routine name raku"><span>speak</span></span><span>(</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>godzilla</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;The&nbsp;monster,&nbsp;godzilla&nbsp;roars!</span><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="routine name raku"><span>speak</span></span><span>(</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>gammera</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;The&nbsp;monster,&nbsp;gammera&nbsp;roars!</span><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="routine name raku"><span>speak</span></span><span>(</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>inframan</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;The&nbsp;hero,&nbsp;inframan&nbsp;shouts!</span><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div></pre><p>Note that here &#39;godzilla&#39; is treated as Monster, not as Hero, because the Monster multi comes first; and neither &#39;gammera&#39; or &#39;inframan&#39; are treated as Knockoff, because that multi comes last.</p>
<p>It should be noted that the order of definition is the order in which Raku sees them, which might not be easy to discern if, for example, the multi subs were imported from different modules. As the organization of a code base becomes more complex, object classes may scale better than using subsets as types, as in this example.</p>
<h1 id="Conventions_and_idioms"><a class="u" href="functions.html#___top" title="go to top of document">Conventions and idioms</a></h1>
<p>While the dispatch system described above provides a lot of flexibility, there are some conventions that most internal functions, and those in many modules, will follow.</p>
<h2 id="Slurpy_conventions"><a class="u" href="functions.html#___top" title="go to top of document">Slurpy conventions</a></h2>
<p>Perhaps the most important one of these conventions is the way slurpy list arguments are handled. Most of the time, functions will not automatically flatten slurpy lists. The rare exceptions are those functions that don&#39;t have a reasonable behavior on lists of lists (e.g., <a href="../routine/chrs.html">chrs</a>) or where there is a conflict with an established idiom (e.g., <a href="../routine/pop.html">pop</a> being the inverse of <a href="../routine/push.html">push</a>).</p>
<p>If you wish to match this look and feel, any <a href="../type/Iterable.html">Iterable</a> argument must be broken out element-by-element using a <code>**@</code> slurpy, with two nuances:</p>
<ul><li><p>An <a href="../type/Iterable.html">Iterable</a> inside a <a href="containers.html#Scalar_containers">Scalar container</a> doesn&#39;t count.</p>
</li>
<li><p><a href="../type/List.html">List</a>s created with a <a href="../routine/,.html"><code>,</code></a> at the top level only count as one <a href="../type/Iterable.html">Iterable</a>.</p>
</li>
</ul>
<p>This can be achieved by using a slurpy with a <a href="../type/Signature.html#index-entry-trait__is_raw"><code>+</code></a> or <code>+@</code> instead of <code>**@</code>:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>grab</span></span><span>(</span><span class="keyword operator generic raku"><span>+</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>@</span></span><span class="variable other identifier raku"><span>a</span></span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>grab&nbsp;</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>_</span></span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="keyword control repeat raku"><span>for</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>@</span></span><span class="variable other identifier raku"><span>a</span></span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></div></pre><p>which is shorthand for something very close to:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator multi raku"><span>multi</span></span><span>&nbsp;</span><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>grab</span></span><span>(</span><span class="keyword operator multi-symbol raku"><span>**</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>@</span></span><span class="variable other identifier raku"><span>a</span></span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>grab&nbsp;</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>_</span></span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="keyword control repeat raku"><span>for</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>@</span></span><span class="variable other identifier raku"><span>a</span></span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span class="storage type declarator multi raku"><span>multi</span></span><span>&nbsp;</span><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>grab</span></span><span>(\</span><span class="routine name raku"><span>a</span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="routine name raku"><span>a</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>~~</span></span><span>&nbsp;</span><span class="support type raku"><span>Iterable</span></span><span>&nbsp;</span><span class="keyword operator word raku"><span>and</span></span><span>&nbsp;</span><span class="routine name raku"><span>a</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>VAR</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>!</span></span><span class="keyword operator multi-symbol raku"><span>~~</span></span><span>&nbsp;</span><span class="routine name raku"><span>Scalar</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>??</span></span><span>&nbsp;</span><span class="support function raku"><span>nextwith</span></span><span>(</span><span class="keyword operator generic raku"><span>|</span></span><span class="routine name raku"><span>a</span></span><span>)&nbsp;</span><span class="keyword operator multi-symbol raku"><span>!!</span></span><span>&nbsp;</span><span class="support function raku"><span>nextwith</span></span><span>(</span><span class="routine name raku"><span>a</span></span><span>,)</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div></pre><p>This results in the following behavior, which is known as the <em>&quot;single argument rule&quot;</em> and is important to understand when invoking slurpy functions:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="routine name raku"><span>grab</span></span><span>(</span><span class="constant numeric raku"><span>1</span></span><span>,&nbsp;</span><span class="constant numeric raku"><span>2</span></span><span>);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«grab&nbsp;1␤grab&nbsp;2␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>grab</span></span><span>((</span><span class="constant numeric raku"><span>1</span></span><span>,&nbsp;</span><span class="constant numeric raku"><span>2</span></span><span>));&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«grab&nbsp;1␤grab&nbsp;2␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>grab</span></span><span>(</span><span class="keyword other special-method raku"><span>$</span></span><span>(</span><span class="constant numeric raku"><span>1</span></span><span>,&nbsp;</span><span class="constant numeric raku"><span>2</span></span><span>));&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«grab&nbsp;1&nbsp;2␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>grab</span></span><span>((</span><span class="constant numeric raku"><span>1</span></span><span>,&nbsp;</span><span class="constant numeric raku"><span>2</span></span><span>),&nbsp;</span><span class="constant numeric raku"><span>3</span></span><span>);&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«grab&nbsp;1&nbsp;2␤grab&nbsp;3␤»</span><span>&nbsp;</span></span></span></div></pre><p>This also makes user-requested flattening feel consistent whether there is one sublist, or many:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="routine name raku"><span>grab</span></span><span>(</span><span class="support function raku"><span>flat</span></span><span>&nbsp;(</span><span class="constant numeric raku"><span>1</span></span><span>,&nbsp;</span><span class="constant numeric raku"><span>2</span></span><span>),&nbsp;(</span><span class="constant numeric raku"><span>3</span></span><span>,&nbsp;</span><span class="constant numeric raku"><span>4</span></span><span>));&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«grab&nbsp;1␤grab&nbsp;2␤grab&nbsp;3␤grab&nbsp;4␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>grab</span></span><span>(</span><span class="support function raku"><span>flat</span></span><span>&nbsp;</span><span class="keyword other special-method raku"><span>$</span></span><span>(</span><span class="constant numeric raku"><span>1</span></span><span>,&nbsp;</span><span class="constant numeric raku"><span>2</span></span><span>),&nbsp;</span><span class="keyword other special-method raku"><span>$</span></span><span>(</span><span class="constant numeric raku"><span>3</span></span><span>,&nbsp;</span><span class="constant numeric raku"><span>4</span></span><span>));&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«grab&nbsp;1&nbsp;2␤grab&nbsp;3&nbsp;4␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>grab</span></span><span>(</span><span class="support function raku"><span>flat</span></span><span>&nbsp;(</span><span class="constant numeric raku"><span>1</span></span><span>,&nbsp;</span><span class="constant numeric raku"><span>2</span></span><span>));&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«grab&nbsp;1␤grab&nbsp;2␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>grab</span></span><span>(</span><span class="support function raku"><span>flat</span></span><span>&nbsp;</span><span class="keyword other special-method raku"><span>$</span></span><span>(</span><span class="constant numeric raku"><span>1</span></span><span>,&nbsp;</span><span class="constant numeric raku"><span>2</span></span><span>));&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«grab&nbsp;1␤grab&nbsp;2␤»</span><span>&nbsp;</span></span></span></div></pre><p>It&#39;s worth noting that mixing binding and sigilless variables in these cases requires a bit of finesse, because there is no <a href="../type/Scalar.html">Scalar</a> intermediary used during binding.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>a</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;(</span><span class="constant numeric raku"><span>1</span></span><span>,&nbsp;</span><span class="constant numeric raku"><span>2</span></span><span>);&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;Normal&nbsp;assignment,&nbsp;equivalent&nbsp;to&nbsp;$(1,&nbsp;2)</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>grab</span></span><span>(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>a</span></span></span><span>);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«grab&nbsp;1&nbsp;2␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>b</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>:=</span></span><span>&nbsp;(</span><span class="constant numeric raku"><span>1</span></span><span>,&nbsp;</span><span class="constant numeric raku"><span>2</span></span><span>);&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;Binding,&nbsp;$b&nbsp;links&nbsp;directly&nbsp;to&nbsp;a&nbsp;bare&nbsp;(1,&nbsp;2)</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>grab</span></span><span>(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>b</span></span></span><span>);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«grab&nbsp;1␤grab&nbsp;2␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;\</span><span class="routine name raku"><span>c</span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;(</span><span class="constant numeric raku"><span>1</span></span><span>,&nbsp;</span><span class="constant numeric raku"><span>2</span></span><span>);&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;Sigilless&nbsp;variables&nbsp;always&nbsp;bind,&nbsp;even&nbsp;with&nbsp;&#39;=&#39;</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>grab</span></span><span>(</span><span class="routine name raku"><span>c</span></span><span>);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«grab&nbsp;1␤grab&nbsp;2␤»</span><span>&nbsp;</span></span></span></div></pre><p>See the <a href="../type/List.html#routine_list">documentation of the <code>list</code> subroutine</a> for more examples of how to use a routine that adheres to the single argument rule.</p>
<h1 id="Functions_are_first-class_objects"><a class="u" href="functions.html#___top" title="go to top of document">Functions are first-class objects</a></h1>
<p>Functions and other code objects can be passed around as values, just like any other object.</p>
<p>There are several ways to get hold of a code object. You can assign it to a variable at the point of declaration:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>square</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="routine name raku"><span>sub</span></span><span>&nbsp;(</span><span class="support type raku"><span>Numeric</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>x</span></span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>x</span></span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>*</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>x</span></span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;and&nbsp;then&nbsp;use&nbsp;it:</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>square</span></span></span><span>(</span><span class="constant numeric raku"><span>6</span></span><span>);&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«36␤»</span></span></span></div></pre><p><a name="index-entry-prefix_&"></a> Or you can reference an existing named function by using the <code>&amp;</code>-sigil in front of it.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>square</span></span><span>(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>x</span></span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>x</span></span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>*</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>x</span></span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;get&nbsp;hold&nbsp;of&nbsp;a&nbsp;reference&nbsp;to&nbsp;the&nbsp;function:</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>func</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>&amp;</span></span><span class="variable other identifier raku"><span>square</span></span></span></span></div></pre><p>This is very useful for <em>higher order functions</em>, that is, functions that take other functions as input. A simple one is <a href="../type/List.html#routine_map">map</a>, which applies a function to each input element:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>square</span></span><span>(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>x</span></span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>x</span></span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>*</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>x</span></span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>@</span></span><span class="variable other identifier raku"><span>squared</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="support function raku"><span>map</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>&amp;</span></span><span class="variable other identifier raku"><span>square</span></span></span><span>,&nbsp;&nbsp;</span><span class="constant numeric raku"><span>1</span></span><span class="keyword operator multi-symbol raku"><span>..</span></span><span class="constant numeric raku"><span>5</span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="support function raku"><span>join</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>,&nbsp;</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>@</span></span><span class="variable other identifier raku"><span>squared</span></span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«1,&nbsp;4,&nbsp;9,&nbsp;16,&nbsp;25␤»</span></span></span></div></pre><p>You can use the same for operators, except that in that case the name with which they have been declared, using <code>infix:</code>, must be used:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>exp</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>:=</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>&amp;</span></span><span class="variable other identifier raku"><span>infix</span></span></span><span class="keyword operator generic raku"><span>:</span></span><span class="span keyword operator array words raku"><span>&lt;</span></span><span class="string array words raku"><span>**</span></span><span class="span keyword operator array words raku"><span>&gt;</span></span><span>;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>exp</span></span></span><span>(</span><span class="constant numeric raku"><span>7</span></span><span>,</span><span class="constant numeric raku"><span>3</span></span><span>);&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«343»</span></span></span></div></pre><p>This can be done even in cases where operators have been <em>auto-generated</em>, for instance in this case where <code>XX</code> is the metaoperator <code>X</code> applied to the <code>X</code> operator.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>XX</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>:=</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>&amp;</span></span><span class="variable other identifier raku"><span>infix</span></span></span><span class="keyword operator generic raku"><span>:</span></span><span class="span keyword operator array words raku"><span>&lt;</span></span><span class="string array words raku"><span>XX</span></span><span class="span keyword operator array words raku"><span>&gt;</span></span><span>;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>XX</span></span></span><span>(&nbsp;[</span><span class="constant numeric raku"><span>1</span></span><span>,(</span><span class="constant numeric raku"><span>2</span></span><span>,</span><span class="constant numeric raku"><span>3</span></span><span>)]&nbsp;,&nbsp;[(</span><span class="constant numeric raku"><span>4</span></span><span>,</span><span class="constant numeric raku"><span>5</span></span><span>),</span><span class="constant numeric raku"><span>6</span></span><span>]&nbsp;&nbsp;);</span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«(((1&nbsp;(4&nbsp;5)))&nbsp;((1&nbsp;6))&nbsp;(((2&nbsp;3)&nbsp;(4&nbsp;5)))&nbsp;(((2&nbsp;3)&nbsp;6)))»</span></span></span></div></pre><p>Baseline is that, in case of operators, you don&#39;t really need to worry about the actual way they were defined, just use the <code>&amp;infix&lt; &gt;</code> to grab a pointer to them.</p>
<h2 id="Infix_form"><a class="u" href="functions.html#___top" title="go to top of document">Infix form</a></h2>
<p>To call a subroutine with 2 arguments like an infix operator, use a subroutine reference surrounded by <code>[</code> and <code>]</code>.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>plus</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>^</span></span><span class="variable other identifier raku"><span>a</span></span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>+</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>^</span></span><span class="variable other identifier raku"><span>b</span></span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>21</span></span><span>&nbsp;[</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>&amp;</span></span><span class="variable other identifier raku"><span>plus</span></span></span><span>]&nbsp;</span><span class="constant numeric raku"><span>21</span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«42␤»</span></span></span></div></pre><p><a name="index-entry-closures"></a></p>
<h2 id="Closures"><a class="u" href="functions.html#___top" title="go to top of document">Closures</a></h2>
<p>All code objects in Raku are <em>closures</em>, which means they can reference lexical variables from an outer scope.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>generate-sub</span></span><span>(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>x</span></span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>y</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>2</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>*</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>x</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control flowcontrol raku"><span>return</span></span><span>&nbsp;</span><span class="routine name raku"><span>sub</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>y</span></span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation whitespace comment leading raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;^^^^^^^^^^^^^^&nbsp;&nbsp;inner&nbsp;sub,&nbsp;uses&nbsp;$y</span><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>generated</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="routine name raku"><span>generate-sub</span></span><span>(</span><span class="constant numeric raku"><span>21</span></span><span>);</span></span></div><div class="line"><span class="source raku"><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>generated</span></span></span><span>();&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«42␤»</span></span></span></div></pre><p>Here, <code>$y</code> is a lexical variable inside <code>generate-sub</code>, and the inner subroutine that is returned uses it. By the time that inner sub is called, <code>generate-sub</code> has already exited. Yet the inner sub can still use <code>$y</code>, because it <em>closed</em> over the variable.</p>
<p>Another closure example is the use of <a href="../type/List.html#routine_map">map</a> to multiply a list of numbers:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>multiply-by</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>5</span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="support function raku"><span>join</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>,&nbsp;</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="support function raku"><span>map</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>_</span></span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>*</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>multiply-by</span></span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>,&nbsp;</span><span class="constant numeric raku"><span>1</span></span><span class="keyword operator multi-symbol raku"><span>..</span></span><span class="constant numeric raku"><span>5</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«5,&nbsp;10,&nbsp;15,&nbsp;20,&nbsp;25␤»</span></span></span></div></pre><p>Here, the block passed to <code>map</code> references the variable <code>$multiply-by</code> from the outer scope, making the block a closure.</p>
<p>Languages without closures cannot easily provide higher-order functions that are as easy to use and powerful as <code>map</code>.</p>
<h2 id="Routines"><a class="u" href="functions.html#___top" title="go to top of document">Routines</a></h2>
<p>Routines are code objects that conform to <a href="../type/Routine.html">type <code>Routine</code></a>, most notably <a href="../type/Sub.html"><code>Sub</code></a>, <a href="../type/Method.html"><code>Method</code></a>, <a href="../type/Regex.html"><code>Regex</code></a> and <a href="../type/Submethod.html"><code>Submethod</code></a>.</p>
<p>They carry extra functionality in addition to what a <a href="../type/Block.html"><code>Block</code></a> supplies: they can come as <a href="functions.html#Multi-dispatch">multis</a>, you can <a href="../type/Routine.html#method_wrap">wrap</a> them, and exit early with <code>return</code>:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>keywords</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="routine name raku"><span>set</span></span><span>&nbsp;</span><span class="span keyword operator array words raku"><span>&lt;</span></span><span class="string array words raku"><span>if&nbsp;for&nbsp;unless&nbsp;while</span></span><span class="span keyword operator array words raku"><span>&gt;</span></span><span>;</span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>has-keyword</span></span><span>(</span><span class="keyword operator generic raku"><span>*</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>@</span></span><span class="variable other identifier raku"><span>words</span></span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control repeat raku"><span>for</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>@</span></span><span class="variable other identifier raku"><span>words</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>-&gt;</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>word</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control flowcontrol raku"><span>return</span></span><span>&nbsp;</span><span class="constant language boolean raku"><span>True</span></span><span>&nbsp;</span><span class="keyword control conditional raku"><span>if</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>word</span></span></span><span>&nbsp;</span><span class="keyword operator setbagmix raku"><span>(elem)</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>keywords</span></span></span><span>;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="constant language boolean raku"><span>False</span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="routine name raku"><span>has-keyword</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>not</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>one</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>here</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«False␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="routine name raku"><span>has-keyword</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>but</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>here</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>for</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«True␤»</span></span></span></div></pre><p>Here, <code>return</code> doesn&#39;t just leave the block inside which it was called, but the whole routine. In general, blocks are transparent to <code>return</code>, they attach to the outermost routine.</p>
<p><a name="index-entry-use_soft_(pragma)"></a> Routines can be inlined and as such provide an obstacle for wrapping. Use the pragma <code>use soft;</code> to prevent inlining to allow wrapping at runtime.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>testee</span></span><span>(</span><span class="support type raku"><span>Int</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>i</span></span></span><span>,&nbsp;</span><span class="support type raku"><span>Str</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>s</span></span></span><span>)</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>rand</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support type raku"><span>Rat</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>*</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>i</span></span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>~</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>s</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>wrap-to-debug</span></span><span>(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>&amp;</span></span><span class="variable other identifier raku"><span>c</span></span></span><span>)</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>wrapping&nbsp;</span><span class="meta interpolation raku"><span class="punctuation section embedded begin raku"><span>{</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>&amp;</span></span><span class="variable other identifier raku"><span>c</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>name</span></span><span class="punctuation section embedded end raku"><span>}</span></span></span><span>&nbsp;with&nbsp;arguments&nbsp;</span><span class="meta interpolation raku"><span class="punctuation section embedded begin raku"><span>{</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>&amp;</span></span><span class="variable other identifier raku"><span>c</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>signature</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>raku</span></span><span class="punctuation section embedded end raku"><span>}</span></span></span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>&amp;</span></span><span class="variable other identifier raku"><span>c</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>wrap</span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="routine name raku"><span>sub</span></span><span>&nbsp;(</span><span class="keyword operator generic raku"><span>|</span></span><span class="routine name raku"><span>args</span></span><span>)</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>note</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>calling&nbsp;</span><span class="meta interpolation raku"><span class="punctuation section embedded begin raku"><span>{</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>&amp;</span></span><span class="variable other identifier raku"><span>c</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>name</span></span><span class="punctuation section embedded end raku"><span>}</span></span></span><span>&nbsp;with&nbsp;</span><span class="meta interpolation raku"><span class="punctuation section embedded begin raku"><span>{</span></span><span class="routine name raku"><span>args</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>gist</span></span><span class="punctuation section embedded end raku"><span>}</span></span></span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;\</span><span class="routine name raku"><span>ret-val</span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>:=</span></span><span>&nbsp;</span><span class="support function raku"><span>callwith</span></span><span>(</span><span class="keyword operator generic raku"><span>|</span></span><span class="routine name raku"><span>args</span></span><span>);</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>note</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>returned&nbsp;from&nbsp;</span><span class="meta interpolation raku"><span class="punctuation section embedded begin raku"><span>{</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>&amp;</span></span><span class="variable other identifier raku"><span>c</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>name</span></span><span class="punctuation section embedded end raku"><span>}</span></span></span><span>&nbsp;with&nbsp;return&nbsp;value&nbsp;</span><span class="meta interpolation raku"><span class="punctuation section embedded begin raku"><span>{</span></span><span class="routine name raku"><span>ret-val</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>raku</span></span><span class="punctuation section embedded end raku"><span>}</span></span></span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="routine name raku"><span>ret-val</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>testee-handler</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="routine name raku"><span>wrap-to-debug</span></span><span>(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>&amp;</span></span><span class="variable other identifier raku"><span>testee</span></span></span><span>);</span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«wrapping&nbsp;testee&nbsp;with&nbsp;arguments&nbsp;:(Int&nbsp;$i,&nbsp;Str&nbsp;$s)»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="routine name raku"><span>testee</span></span><span>(</span><span class="constant numeric raku"><span>10</span></span><span>,&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>ten</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>);</span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«calling&nbsp;testee&nbsp;with&nbsp;\(10,&nbsp;&quot;ten&quot;)␤returned&nbsp;from&nbsp;testee&nbsp;with&nbsp;return&nbsp;value&nbsp;&quot;6.151190ten&quot;␤6.151190ten»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>&amp;</span></span><span class="variable other identifier raku"><span>testee</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>unwrap</span></span><span>(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>testee-handler</span></span></span><span>);</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="routine name raku"><span>testee</span></span><span>(</span><span class="constant numeric raku"><span>10</span></span><span>,&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>ten</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>);</span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«6.151190ten␤»</span></span></span></div></pre><h1 id="Defining_operators"><a class="u" href="functions.html#___top" title="go to top of document">Defining operators</a></h1>
<p>Operators are just subroutines with funny names. The funny names are composed of the category name (<code>infix</code>, <code>prefix</code>, <code>postfix</code>, <code>circumfix</code>, <code>postcircumfix</code>), followed by a colon, and a list of the operator name or names (two components in the case of circumfix and postcircumfix). A expanded explanation of all these operators and what they mean is included <a href="operators.html#Operator_classification">in this table</a>.</p>
<p>This works both for adding multi candidates to existing operators and for defining new ones. In the latter case, the definition of the new subroutine automatically installs the new operator into the grammar, but only in the current lexical scope. Importing an operator via <code>use</code> or <code>import</code> also makes it available.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;adding&nbsp;a&nbsp;multi&nbsp;candidate&nbsp;to&nbsp;an&nbsp;existing&nbsp;operator:</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>multi</span></span><span>&nbsp;</span><span class="entity name function raku"><span>infix</span></span><span class="punctuation definition function adverb raku"><span>:</span></span><span class="span keyword operator array words raku"><span>&lt;</span></span><span class="string array words raku"><span>+</span></span><span class="span keyword operator array words raku"><span>&gt;</span></span><span>(</span><span class="support type raku"><span>Int</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>x</span></span></span><span>,&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>same</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>2</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>*</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>x</span></span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>21</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>+</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>same</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«42␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;defining&nbsp;a&nbsp;new&nbsp;operator</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>postfix</span></span><span class="punctuation definition function adverb raku"><span>:</span></span><span class="span keyword operator array words raku"><span>&lt;</span></span><span class="string array words raku"><span>!</span></span><span class="span keyword operator array words raku"><span>&gt;</span></span><span>(</span><span class="support type raku"><span>Int</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>x</span></span></span><span>&nbsp;</span><span class="storage modifier type constraints raku"><span>where</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>x</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>&gt;=</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>0</span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;[</span><span class="constant language whatever hack raku"><span>*</span></span><span>]&nbsp;</span><span class="constant numeric raku"><span>1</span></span><span class="keyword operator multi-symbol raku"><span>..</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>x</span></span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>6</span></span><span class="keyword operator generic raku"><span>!</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«720␤»</span><span>&nbsp;</span></span></span></div></pre><p>The operator declaration becomes available as soon as possible, so you can recurse into a just-defined operator:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>postfix</span></span><span class="punctuation definition function adverb raku"><span>:</span></span><span class="span keyword operator array words raku"><span>&lt;</span></span><span class="string array words raku"><span>!</span></span><span class="span keyword operator array words raku"><span>&gt;</span></span><span>(</span><span class="support type raku"><span>Int</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>x</span></span></span><span>&nbsp;</span><span class="storage modifier type constraints raku"><span>where</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>x</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>&gt;=</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>0</span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>x</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>==</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>0</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>??</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>1</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>!!</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>x</span></span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>*</span></span><span>&nbsp;(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>x</span></span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>-</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>1</span></span><span>)</span><span class="keyword operator generic raku"><span>!</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>6</span></span><span class="keyword operator generic raku"><span>!</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«720␤»</span><span>&nbsp;</span></span></span></div></pre><p>Circumfix and postcircumfix operators are made of two delimiters, one opening and one closing.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>circumfix</span></span><span class="punctuation definition function adverb raku"><span>:</span></span><span class="keyword operator generic raku"><span>&lt;</span></span><span class="keyword control closure trait raku"><span>START</span></span><span>&nbsp;</span><span class="keyword control closure trait raku"><span>END</span></span><span class="keyword operator generic raku"><span>&gt;</span></span><span>(</span><span class="keyword operator generic raku"><span>*</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>@</span></span><span class="variable other identifier raku"><span>elems</span></span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>start</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>,&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>@</span></span><span class="variable other identifier raku"><span>elems</span></span></span><span>,&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>end</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="keyword control closure trait raku"><span>START</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>a</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>b</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>c</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword control closure trait raku"><span>END</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«(start&nbsp;[a&nbsp;b&nbsp;c]&nbsp;end)␤»</span><span>&nbsp;</span></span></span></div></pre><p>Postcircumfixes also receive the term after which they are parsed as an argument:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>postcircumfix</span></span><span class="punctuation definition function adverb raku"><span>:</span></span><span class="keyword operator generic raku"><span>&lt;</span></span><span class="keyword operator multi-symbol raku"><span>!!</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>!!</span></span><span class="keyword operator generic raku"><span>&gt;</span></span><span>(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>left</span></span></span><span>,&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>inside</span></span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>left</span></span><span>&nbsp;-&gt;&nbsp;(&nbsp;</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>inside</span></span><span>&nbsp;)</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>42</span></span><span class="keyword operator multi-symbol raku"><span>!!</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>1</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>!!</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«42&nbsp;-&gt;&nbsp;(&nbsp;1&nbsp;)␤»</span><span>&nbsp;</span></span></span></div></pre><p>Blocks can be assigned directly to operator names. Use a variable declarator and prefix the operator name with a <code>&amp;</code>-sigil.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>&amp;</span></span><span class="variable other identifier raku"><span>infix</span></span></span><span class="keyword operator generic raku"><span>:</span></span><span class="span keyword operator array words raku"><span>&lt;</span></span><span class="string array words raku"><span>ieq</span></span><span class="span keyword operator array words raku"><span>&gt;</span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>-&gt;</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>|</span></span><span class="routine name raku"><span>l</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;[</span><span class="keyword operator word raku"><span>eq</span></span><span>]&nbsp;</span><span class="routine name raku"><span>l</span></span><span class="keyword operator generic raku"><span>&gt;</span><span>&gt;</span><span>.</span></span><span class="routine name raku"><span>fc</span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>abc</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>&nbsp;</span><span class="routine name raku"><span>ieq</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Abc</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«True␤»</span></span></span></div></pre><p><a name="index-entry-is_tighter"></a><a name="index-entry-is_equiv"></a><a name="index-entry-is_looser"></a></p>
<h2 id="Precedence"><a class="u" href="functions.html#___top" title="go to top of document">Precedence</a></h2>
<p>Operator precedence in Raku is specified relative to existing operators. The traits <code>is tighter</code>, <code>is equiv</code> and <code>is looser</code> can be provided with an operator to indicate how the precedence of the new operator is related to other, existing ones. More than one trait can be applied.</p>
<p>For example, <code>infix:&lt;*&gt;</code> has a tighter precedence than <code>infix:&lt;+&gt;</code>, and squeezing one in between works like this:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>infix</span></span><span class="punctuation definition function adverb raku"><span>:</span></span><span class="span keyword operator array words raku"><span>&lt;</span></span><span class="string array words raku"><span>!!</span></span><span class="span keyword operator array words raku"><span>&gt;</span></span><span>(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>a</span></span></span><span>,&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>b</span></span></span><span>)&nbsp;</span><span class="storage modifier type constraints raku"><span>is</span></span><span>&nbsp;</span><span class="entity name type trait raku"><span>tighter</span></span><span>(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>&amp;</span></span><span class="variable other identifier raku"><span>infix</span></span></span><span class="keyword operator generic raku"><span>:</span></span><span class="span keyword operator array words raku"><span>&lt;</span></span><span class="string array words raku"><span>+</span></span><span class="span keyword operator array words raku"><span>&gt;</span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="constant numeric raku"><span>2</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>*</span></span><span>&nbsp;(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>a</span></span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>+</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>b</span></span></span><span>)</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>1</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>+</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>2</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>*</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>3</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>!!</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>4</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«21␤»</span><span>&nbsp;</span></span></span></div></pre><p>Here, the <code>1 + 2 * 3 !! 4</code> is parsed as <code>1 + ((2 * 3) !! 4)</code>, because the precedence of the new <code>!!</code> operator is between that of <code>+</code> and <code>*</code>.</p>
<p>The same effect could have been achieved with:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>infix</span></span><span class="punctuation definition function adverb raku"><span>:</span></span><span class="span keyword operator array words raku"><span>&lt;</span></span><span class="string array words raku"><span>!!</span></span><span class="span keyword operator array words raku"><span>&gt;</span></span><span>(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>a</span></span></span><span>,&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>b</span></span></span><span>)&nbsp;</span><span class="storage modifier type constraints raku"><span>is</span></span><span>&nbsp;</span><span class="entity name type trait raku"><span>looser</span></span><span>(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>&amp;</span></span><span class="variable other identifier raku"><span>infix</span></span></span><span class="keyword operator generic raku"><span>:</span></span><span class="span keyword operator array words raku"><span>&lt;</span></span><span class="string array words raku"><span>*</span></span><span class="span keyword operator array words raku"><span>&gt;</span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>...</span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></div></pre><p>To put a new operator on the same precedence level as an existing operator, use <code>is equiv(&amp;other-operator)</code> instead.</p>
<h2 id="Associativity"><a class="u" href="functions.html#___top" title="go to top of document">Associativity</a></h2>
<p>When the same operator appears several times in a row, there are multiple possible interpretations. For example:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="constant numeric raku"><span>1</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>+</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>2</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>+</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>3</span></span></span></div></pre><p>could be parsed as</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span>(</span><span class="constant numeric raku"><span>1</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>+</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>2</span></span><span>)&nbsp;</span><span class="keyword operator generic raku"><span>+</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>3</span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;left&nbsp;associative</span></span></span></div></pre><p>or as</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="constant numeric raku"><span>1</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>+</span></span><span>&nbsp;(</span><span class="constant numeric raku"><span>2</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>+</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>3</span></span><span>)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;right&nbsp;associative</span></span></span></div></pre><p>For addition of real numbers, the distinction is somewhat moot, because <code>+</code> is <a href="https://en.wikipedia.org/wiki/Associative_property">mathematically associative</a>.</p>
<p>But for other operators it matters a great deal. For example, for the exponentiation/power operator, <code>infix:&lt;**&gt;</code>:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>2</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>**</span></span><span>&nbsp;(</span><span class="constant numeric raku"><span>2</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>**</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>3</span></span><span>);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«256␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;(</span><span class="constant numeric raku"><span>2</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>**</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>2</span></span><span>)&nbsp;</span><span class="keyword operator multi-symbol raku"><span>**</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>3</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«64␤»</span></span></span></div></pre><p>Raku has the following possible associativity configurations:</p>
<table class="pod-table">
<thead><tr>
<th>Associativity</th> <th>Meaning of $a ! $b ! $c</th>
</tr></thead>
<tbody>
<tr> <td>left</td> <td>($a ! $b) ! $c</td> </tr> <tr> <td>right</td> <td>$a ! ($b ! $c)</td> </tr> <tr> <td>non</td> <td>ILLEGAL</td> </tr> <tr> <td>chain</td> <td>($a ! $b) and ($b ! $c)</td> </tr> <tr> <td>list</td> <td>infix:&lt;!&gt;($a; $b; $c)</td> </tr>
</tbody>
</table><p>The <a href="https://rakudocs.github.io/language/language/operators.html#Operator_associativity">Operator docs</a> contain additional details about operator associativity.</p>
<p><a name="index-entry-is_assoc_(trait)"></a> You can specify the associativity of an infix operator with the <code>is assoc</code> trait, where <code>left</code> is the default associativity. Specifying the associativity of non-infix operators is planed but not yet implemented.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>infix</span></span><span class="punctuation definition function adverb raku"><span>:</span></span><span class="span keyword operator array words raku"><span>&lt;</span></span><span class="string array words raku"><span>§</span></span><span class="span keyword operator array words raku"><span>&gt;</span></span><span>(</span><span class="keyword operator generic raku"><span>*</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>@</span></span><span class="variable other identifier raku"><span>a</span></span></span><span>)&nbsp;</span><span class="storage modifier type constraints raku"><span>is</span></span><span>&nbsp;</span><span class="entity name type trait raku"><span>assoc</span></span><span class="span keyword operator array words raku"><span>&lt;</span></span><span class="string array words raku"><span>list</span></span><span class="span keyword operator array words raku"><span>&gt;</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>(</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>~</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>@</span></span><span class="variable other identifier raku"><span>a</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>join</span></span><span>(</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>|</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>)&nbsp;</span><span class="keyword operator generic raku"><span>~</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>)</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>1</span></span><span>&nbsp;§&nbsp;</span><span class="constant numeric raku"><span>2</span></span><span>&nbsp;§&nbsp;</span><span class="constant numeric raku"><span>3</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«(1|2|3)␤»</span><span>&nbsp;</span></span></span></div></pre><h1 id="Traits"><a class="u" href="functions.html#___top" title="go to top of document">Traits</a></h1>
<p><em>Traits</em> are subroutines that run at compile time and modify the behavior of a type, variable, routine, attribute, or other language object.</p>
<p>Examples of traits are:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>class</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>ChildClass</span></span></span><span>&nbsp;</span><span class="storage modifier type constraints raku"><span>is</span></span><span>&nbsp;</span><span class="routine name raku"><span>ParentClass</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>...</span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;^^&nbsp;trait,&nbsp;with&nbsp;argument&nbsp;ParentClass</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>has</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>.</span></span><span class="variable other identifier raku"><span>attrib</span></span></span><span>&nbsp;</span><span class="storage modifier type constraints raku"><span>is</span></span><span>&nbsp;</span><span class="entity name type trait raku"><span>rw</span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;^^^^^&nbsp;&nbsp;trait&nbsp;with&nbsp;name&nbsp;&#39;rw&#39;</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>class</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>SomeClass</span></span></span><span>&nbsp;</span><span class="storage modifier type constraints raku"><span>does</span></span><span>&nbsp;</span><span class="routine name raku"><span>AnotherRole</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>...</span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;^^^^&nbsp;trait</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>has</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>!</span></span><span class="variable other identifier raku"><span>another-attribute</span></span></span><span>&nbsp;</span><span class="storage modifier type constraints raku"><span>handles</span></span><span>&nbsp;</span><span class="span keyword operator array words raku"><span>&lt;</span></span><span class="string array words raku"><span>close</span></span><span class="span keyword operator array words raku"><span>&gt;</span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;^^^^^^^&nbsp;trait</span><span>&nbsp;</span></span></span></div></pre><p>... and also <code>is tighter</code>, <code>is looser</code>, <code>is equiv</code> and <code>is assoc</code> from the previous section.</p>
<p>Traits are subs declared in the form <code>trait_mod&lt;VERB&gt;</code>, where <code>VERB</code> stands for the name like <code>is</code>, <code>does</code> or <code>handles</code>. It receives the modified thing as argument, and the name as a named argument. See <a href="../type/Sub.html#Traits">Sub</a> for details.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator multi raku"><span>multi</span></span><span>&nbsp;</span><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>trait_mod</span></span><span class="punctuation definition function adverb raku"><span>:</span></span><span class="span keyword operator array words raku"><span>&lt;</span></span><span class="string array words raku"><span>is</span></span><span class="span keyword operator array words raku"><span>&gt;</span></span><span>(</span><span class="support type raku"><span>Routine</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>r</span></span></span><span>,&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>doubles</span></span></span><span class="keyword operator generic raku"><span>!</span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>r</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>wrap</span></span><span>(</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="constant numeric raku"><span>2</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>*</span></span><span>&nbsp;</span><span class="support function raku"><span>callsame</span></span><span>;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>);</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>square</span></span><span>(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>x</span></span></span><span>)&nbsp;</span><span class="storage modifier type constraints raku"><span>is</span></span><span>&nbsp;</span><span class="routine name raku"><span>doubles</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>x</span></span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>*</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>x</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="routine name raku"><span>square</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>3</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«18␤»</span><span>&nbsp;</span></span></span></div></pre><p>See <a href="../type/Routine.html">type Routine</a> for the documentation of built-in routine traits.</p>
<h1 id="Re-dispatching"><a class="u" href="functions.html#___top" title="go to top of document">Re-dispatching</a></h1>
<p>There are cases in which a routine might want to call the next method from a chain. This chain could be a list of parent classes in a class hierarchy, or it could be less specific multi candidates from a multi dispatch, or it could be the inner routine from a <code>wrap</code>.</p>
<p>Fortunately, we have a series of re-dispatching tools that help us to make it easy.</p>
<h2 id="sub_callsame"><a class="u" href="functions.html#___top" title="go to top of document">sub callsame</a></h2>
<p><a name="index-entry-dispatch_callsame"></a></p>
<p><code>callsame</code> calls the next matching candidate with the same arguments that were used for the current candidate and returns that candidate&#39;s return value.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="routine name raku"><span>proto</span></span><span>&nbsp;</span><span class="routine name raku"><span>a</span></span><span class="keyword operator setbagmix raku"><span>(|)</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span class="keyword operator generic raku"><span>*</span></span><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>multi</span></span><span>&nbsp;</span><span class="entity name function raku"><span>a</span></span><span>(</span><span class="support type raku"><span>Any</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>x</span></span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Any&nbsp;</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>x</span></span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control flowcontrol raku"><span>return</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>5</span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>multi</span></span><span>&nbsp;</span><span class="entity name function raku"><span>a</span></span><span>(</span><span class="support type raku"><span>Int</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>x</span></span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Int&nbsp;</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>x</span></span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>res</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="support function raku"><span>callsame</span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Back&nbsp;in&nbsp;Int&nbsp;with&nbsp;</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>res</span></span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>a</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>1</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«Int&nbsp;1␤Any&nbsp;1␤Back&nbsp;in&nbsp;Int&nbsp;with&nbsp;5␤»</span><span>&nbsp;</span></span></span></div></pre><h2 id="sub_callwith"><a class="u" href="functions.html#___top" title="go to top of document">sub callwith</a></h2>
<p><a name="index-entry-dispatch_callwith"></a></p>
<p><code>callwith</code> calls the next candidate matching the original signature, that is, the next function that could possibly be used with the arguments provided by users and returns that candidate&#39;s return value.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="routine name raku"><span>proto</span></span><span>&nbsp;</span><span class="routine name raku"><span>a</span></span><span class="keyword operator setbagmix raku"><span>(|)</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span class="keyword operator generic raku"><span>*</span></span><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>multi</span></span><span>&nbsp;</span><span class="entity name function raku"><span>a</span></span><span>(</span><span class="support type raku"><span>Any</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>x</span></span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Any&nbsp;</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>x</span></span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control flowcontrol raku"><span>return</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>5</span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>multi</span></span><span>&nbsp;</span><span class="entity name function raku"><span>a</span></span><span>(</span><span class="support type raku"><span>Int</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>x</span></span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Int&nbsp;</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>x</span></span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>res</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="support function raku"><span>callwith</span></span><span>(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>x</span></span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>+</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>1</span></span><span>);</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Back&nbsp;in&nbsp;Int&nbsp;with&nbsp;</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>res</span></span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>a</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>1</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«Int&nbsp;1␤Any&nbsp;2␤Back&nbsp;in&nbsp;Int&nbsp;with&nbsp;5␤»</span><span>&nbsp;</span></span></span></div></pre><p>Here, <code>a 1</code> calls the most specific <code>Int</code> candidate first, and <code>callwith</code> re-dispatches to the less specific <code>Any</code> candidate. Note that although our parameter <code>$x + 1</code> is an <code>Int</code>, still we call the next candidate in the chain.</p>
<p>In this case, for example:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="routine name raku"><span>proto</span></span><span>&nbsp;</span><span class="routine name raku"><span>how-many</span></span><span class="keyword operator setbagmix raku"><span>(|)</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span class="keyword operator generic raku"><span>*</span></span><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>multi</span></span><span>&nbsp;</span><span class="entity name function raku"><span>how-many</span></span><span>(&nbsp;</span><span class="support type raku"><span>Associative</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>a</span></span></span><span>&nbsp;)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Associative&nbsp;</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>a</span></span><span>&nbsp;</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>calling</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="support function raku"><span>callwith</span></span><span>(&nbsp;</span><span class="constant numeric raku"><span>1</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>=&gt;</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>a</span></span></span><span>&nbsp;);</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control flowcontrol raku"><span>return</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>calling</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>multi</span></span><span>&nbsp;</span><span class="entity name function raku"><span>how-many</span></span><span>(&nbsp;</span><span class="support type raku"><span>Pair</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>a</span></span></span><span>&nbsp;)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Pair&nbsp;</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>a</span></span><span>&nbsp;</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control flowcontrol raku"><span>return</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>There&nbsp;is&nbsp;</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>a</span></span><span>&nbsp;</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>multi</span></span><span>&nbsp;</span><span class="entity name function raku"><span>how-many</span></span><span>(&nbsp;</span><span class="support type raku"><span>Hash</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>a</span></span></span><span>&nbsp;)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Hash&nbsp;</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>a</span></span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control flowcontrol raku"><span>return</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Hashing&nbsp;</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>a</span></span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>little-piggy</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="string pair key raku"><span>little&nbsp;</span></span><span class="keyword operator multi-symbol raku"><span>=&gt;</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>piggy</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>little-piggy</span></span></span><span class="keyword operator generic raku"><span>.</span><span>^</span></span><span class="support function raku"><span>name</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«Pair␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>&amp;</span></span><span class="variable other identifier raku"><span>how-many</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>cando</span></span><span>(&nbsp;\(&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>little-piggy</span></span></span><span>&nbsp;));</span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«(sub&nbsp;how-many&nbsp;(Pair&nbsp;$a)&nbsp;{&nbsp;#`(Sub|68970512)&nbsp;...&nbsp;}&nbsp;sub&nbsp;how-many&nbsp;(Associative&nbsp;$a)&nbsp;{&nbsp;#`(Sub|68970664)&nbsp;...&nbsp;})␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="routine name raku"><span>how-many</span></span><span>(&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>little-piggy</span></span></span><span>&nbsp;&nbsp;);&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«Pair&nbsp;little&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;piggy␤There&nbsp;is&nbsp;little&nbsp;piggy␤»</span><span>&nbsp;</span></span></span></div></pre><p>the only candidates that take the <code>Pair</code> argument supplied by the user are the two functions defined first. Although a <code>Pair</code> can be easily coerced to a <code>Hash</code>, here is how signatures match:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span>(&nbsp;</span><span class="support type raku"><span>Pair</span></span><span>&nbsp;)&nbsp;</span><span class="keyword operator multi-symbol raku"><span>~~</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span>(&nbsp;</span><span class="support type raku"><span>Associative</span></span><span>&nbsp;);&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«True␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span>(&nbsp;</span><span class="support type raku"><span>Pair</span></span><span>&nbsp;)&nbsp;</span><span class="keyword operator multi-symbol raku"><span>~~</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span>(&nbsp;</span><span class="support type raku"><span>Hash</span></span><span>&nbsp;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«False␤»</span><span>&nbsp;</span></span></span></div></pre><p>The arguments provided by us are a <code>Pair</code>. It does not match a <code>Hash</code>, so the corresponding function is thus not included in the list of candidates, as can be seen by the output of <code>&amp;how-many.cando( \( $little-piggy ));</code>.</p>
<h2 id="sub_nextsame"><a class="u" href="functions.html#___top" title="go to top of document">sub nextsame</a></h2>
<p><a name="index-entry-dispatch_nextsame"></a></p>
<p><code>nextsame</code> calls the next matching candidate with the same arguments that were used for the current candidate and <strong>never</strong> returns.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="routine name raku"><span>proto</span></span><span>&nbsp;</span><span class="routine name raku"><span>a</span></span><span class="keyword operator setbagmix raku"><span>(|)</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span class="keyword operator generic raku"><span>*</span></span><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>multi</span></span><span>&nbsp;</span><span class="entity name function raku"><span>a</span></span><span>(</span><span class="support type raku"><span>Any</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>x</span></span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Any&nbsp;</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>x</span></span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control flowcontrol raku"><span>return</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>5</span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>multi</span></span><span>&nbsp;</span><span class="entity name function raku"><span>a</span></span><span>(</span><span class="support type raku"><span>Int</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>x</span></span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Int&nbsp;</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>x</span></span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>nextsame</span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>never&nbsp;executed&nbsp;because&nbsp;nextsame&nbsp;doesn&#39;t&nbsp;return</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>a</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>1</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«Int&nbsp;1␤Any&nbsp;1␤»</span><span>&nbsp;</span></span></span></div></pre><h2 id="sub_nextwith"><a class="u" href="functions.html#___top" title="go to top of document">sub nextwith</a></h2>
<p><a name="index-entry-dispatch_nextwith"></a></p>
<p><code>nextwith</code> calls the next matching candidate with arguments provided by users and <strong>never</strong> returns.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="routine name raku"><span>proto</span></span><span>&nbsp;</span><span class="routine name raku"><span>a</span></span><span class="keyword operator setbagmix raku"><span>(|)</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span class="keyword operator generic raku"><span>*</span></span><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>multi</span></span><span>&nbsp;</span><span class="entity name function raku"><span>a</span></span><span>(</span><span class="support type raku"><span>Any</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>x</span></span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Any&nbsp;</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>x</span></span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control flowcontrol raku"><span>return</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>5</span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>multi</span></span><span>&nbsp;</span><span class="entity name function raku"><span>a</span></span><span>(</span><span class="support type raku"><span>Int</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>x</span></span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Int&nbsp;</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>x</span></span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>nextwith</span></span><span>(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>x</span></span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>+</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>1</span></span><span>);</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>never&nbsp;executed&nbsp;because&nbsp;nextwith&nbsp;doesn&#39;t&nbsp;return</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>a</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>1</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«Int&nbsp;1␤Any&nbsp;2␤»</span><span>&nbsp;</span></span></span></div></pre><h2 id="sub_samewith"><a class="u" href="functions.html#___top" title="go to top of document">sub samewith</a></h2>
<p><a name="index-entry-dispatch_samewith"></a></p>
<p><code>samewith</code> calls the multi again with arguments provided at the call site and returns the value provided by the call. This can be used for self-recursion.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="routine name raku"><span>proto</span></span><span>&nbsp;</span><span class="routine name raku"><span>factorial</span></span><span class="keyword operator setbagmix raku"><span>(|)</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span class="keyword operator generic raku"><span>*</span></span><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>multi</span></span><span>&nbsp;</span><span class="entity name function raku"><span>factorial</span></span><span>(</span><span class="support type raku"><span>Int</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>x</span></span></span><span>&nbsp;</span><span class="storage modifier type constraints raku"><span>where</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>*</span></span><span>&nbsp;≤&nbsp;</span><span class="constant numeric raku"><span>1</span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>1</span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>multi</span></span><span>&nbsp;</span><span class="entity name function raku"><span>factorial</span></span><span>(</span><span class="support type raku"><span>Int</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>x</span></span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>x</span></span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>*</span></span><span>&nbsp;</span><span class="routine name raku"><span>samewith</span></span><span>(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>x</span></span></span><span>-1);</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;(</span><span class="routine name raku"><span>factorial</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>10</span></span><span>);&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«36288000␤»</span><span>&nbsp;</span></span></span></div></pre><p><a name="index-entry-dispatch_nextcallee"></a></p>
<h2 id="sub_nextcallee"><a class="u" href="functions.html#___top" title="go to top of document">sub nextcallee</a></h2>
<p>Redispatch may be required to call a block that is not the current scope what provides <code>nextsame</code> and friends with the problem to referring to the wrong scope. Use <code>nextcallee</code> to capture the right candidate and call it at the desired time.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="routine name raku"><span>proto</span></span><span>&nbsp;</span><span class="routine name raku"><span>pick-winner</span></span><span class="keyword operator setbagmix raku"><span>(|)</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span class="keyword operator generic raku"><span>*</span></span><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>multi</span></span><span>&nbsp;</span><span class="entity name function raku"><span>pick-winner</span></span><span>&nbsp;(</span><span class="support type raku"><span>Int</span></span><span>&nbsp;\</span><span class="routine name raku"><span>s</span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>&amp;</span></span><span class="variable other identifier raku"><span>nextone</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="routine name raku"><span>nextcallee</span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support type raku"><span>Promise</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>in</span></span><span>(π²)</span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>then</span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="routine name raku"><span>nextone</span></span><span>&nbsp;</span><span class="string regexp construct any raku"><span>s</span></span><span class="punctuation definition regexp any raku"><span>&nbsp;</span></span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>multi</span></span><span>&nbsp;</span><span class="entity name function raku"><span>pick-winner</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Woot!&nbsp;</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil interpolated raku"><span>^</span></span><span>w</span></span><span>&nbsp;won</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="keyword control conditional raku"><span>with</span></span><span>&nbsp;</span><span class="routine name raku"><span>pick-winner</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>^</span></span><span class="constant numeric raku"><span>5</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>pick</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>-&gt;</span></span><span>&nbsp;\</span><span class="routine name raku"><span>result</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>And&nbsp;the&nbsp;winner&nbsp;is...</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control flowcontrol raku"><span>await</span></span><span>&nbsp;</span><span class="routine name raku"><span>result</span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;And&nbsp;the&nbsp;winner&nbsp;is...</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;Woot!&nbsp;3&nbsp;won</span><span>&nbsp;</span></span></span></div></pre><p>The <code>Int</code> candidate takes the <code>nextcallee</code> and then fires up a <code>Promise</code> to be executed in parallel, after some timeout, and then returns. We can&#39;t use <code>nextsame</code> here, because it&#39;d be trying to <code>nextsame</code> the Promise&#39;s block instead of our original routine.</p>
<p><a name="index-entry-dispatch_wrapped_routines"></a></p>
<h2 id="Wrapped_routines"><a class="u" href="functions.html#___top" title="go to top of document">Wrapped routines</a></h2>
<p>Besides those already mentioned above, re-dispatch is helpful in many more situations. For instance, for dispatching to wrapped routines:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;enable&nbsp;wrapping:</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="keyword other include raku"><span>use</span></span><span>&nbsp;</span><span class="constant language pragma raku"><span>soft</span></span><span>;</span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;function&nbsp;to&nbsp;be&nbsp;wrapped:</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>square-root</span></span><span>(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>x</span></span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>x</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>sqrt</span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>&amp;</span></span><span class="variable other identifier raku"><span>square-root</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>wrap</span></span><span>(</span><span class="routine name raku"><span>sub</span></span><span>&nbsp;(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>num</span></span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>nextsame</span></span><span>&nbsp;</span><span class="keyword control conditional raku"><span>if</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>num</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>&gt;=</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>0</span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;</span><span class="constant numeric raku"><span>1</span></span><span>i&nbsp;</span><span class="keyword operator generic raku"><span>*</span></span><span>&nbsp;</span><span class="support function raku"><span>callwith</span></span><span>(</span><span class="support function raku"><span>abs</span></span><span>(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>num</span></span></span><span>));</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span><span>);</span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="routine name raku"><span>square-root</span></span><span>(</span><span class="constant numeric raku"><span>4</span></span><span>);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«2␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="routine name raku"><span>square-root</span></span><span>(</span><span class="constant numeric raku"><span>-4</span></span><span>);&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«0+2i␤»</span><span>&nbsp;</span></span></span></div></pre><h2 id="Routines_of_parent_class"><a class="u" href="functions.html#___top" title="go to top of document">Routines of parent class</a></h2>
<p>Another use case is to re-dispatch to methods from parent classes.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="support type raku"><span>Version</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>new</span></span><span>(</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>1.0.2</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>)&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;v1.0.2</span><span>&nbsp;</span></span></span></div></pre><pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>class</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>LoggedVersion</span></span></span><span>&nbsp;</span><span class="storage modifier type constraints raku"><span>is</span></span><span>&nbsp;</span><span class="support type raku"><span>Version</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>new</span></span><span>(</span><span class="keyword operator generic raku"><span>|</span></span><span class="routine name raku"><span>c</span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>note</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>New&nbsp;version&nbsp;object&nbsp;created&nbsp;with&nbsp;arguments&nbsp;</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>~</span></span><span>&nbsp;</span><span class="routine name raku"><span>c</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>raku</span></span><span>;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>nextsame</span></span><span>;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="routine name raku"><span>LoggedVersion</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>new</span></span><span>(</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>1.0.2</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>);</span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;New&nbsp;version&nbsp;object&nbsp;created&nbsp;with&nbsp;arguments&nbsp;\(&quot;1.0.2&quot;)</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;v1.0.2</span><span>&nbsp;</span></span></span></div></pre><h1 id="Coercion_types"><a class="u" href="functions.html#___top" title="go to top of document">Coercion types</a></h1>
<p>Coercion types force a specific type for routine arguments while allowing the routine itself to accept a wider input. When invoked, the arguments are narrowed automatically to the stricter type, and therefore within the routine the arguments have always the desired type.</p>
<p>In the case the arguments cannot be converted to the stricter type, a <em>Type Check</em> error is thrown.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>double</span></span><span>(</span><span class="support type raku"><span>Int</span></span><span>(</span><span class="support type raku"><span>Cool</span></span><span>)&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>x</span></span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="constant numeric raku"><span>2</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>*</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>x</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="routine name raku"><span>double</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>21</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«42␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="routine name raku"><span>double</span></span><span>&nbsp;&nbsp;</span><span class="constant numeric raku"><span>21</span></span><span>;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«42␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="routine name raku"><span>double</span></span><span>&nbsp;</span><span class="support type raku"><span>Any</span></span><span>;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;Type&nbsp;check&nbsp;failed&nbsp;in&nbsp;binding&nbsp;$x;&nbsp;expected&nbsp;&#39;Cool&#39;&nbsp;but&nbsp;got&nbsp;&#39;Any&#39;</span><span>&nbsp;</span></span></span></div></pre><p>In the above example, the <a href="../type/Int.html">Int</a> is the target type to which the argument <code>$x</code> will be coerced, and <a href="../type/Cool.html">Cool</a> is the type that the routine accepts as wider input.</p>
<p>If the accepted wider input type is <a href="../type/Any.html">Any</a>, it is possible to abbreviate the coercion <code>Int(Any)</code> by omitting the <code>Any</code> type, thus resulting in <code>Int()</code>.</p>
<p>The coercion works by looking for a method with the same name as the target type: if such method is found on the argument, it is invoked to convert the latter to the expected narrow type. From the above, it is clear that it is possible to provide coercion among user types just providing the required methods:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>class</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>Bar</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator raku"><span>has</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>.</span></span><span class="variable other identifier raku"><span>msg</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>class</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>Foo</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator raku"><span>has</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>.</span></span><span class="variable other identifier raku"><span>msg</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>I&#39;m&nbsp;a&nbsp;foo!</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation whitespace comment leading raku"><span>&nbsp;&nbsp;&nbsp;</span></span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;allows&nbsp;coercion&nbsp;from&nbsp;Foo&nbsp;to&nbsp;Bar</span><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;</span><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>Bar</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="routine name raku"><span>Bar</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>new</span></span><span>(</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>msg</span></span><span>(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>.</span></span><span class="variable other identifier raku"><span>msg</span></span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>~</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>&nbsp;But&nbsp;I&nbsp;am&nbsp;now&nbsp;Bar.</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>));</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;wants&nbsp;a&nbsp;Bar,&nbsp;but&nbsp;accepts&nbsp;Any</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>print-bar</span></span><span>(</span><span class="routine name raku"><span>Bar</span></span><span>()&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>bar</span></span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>bar</span></span></span><span class="keyword operator generic raku"><span>.</span><span>^</span></span><span class="support function raku"><span>name</span></span><span>;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«Bar␤»</span><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>bar</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>msg</span></span><span>;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«I&#39;m&nbsp;a&nbsp;foo!&nbsp;But&nbsp;I&nbsp;am&nbsp;now&nbsp;Bar.␤»</span><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>print-bar</span></span><span>&nbsp;</span><span class="routine name raku"><span>Foo</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>new</span></span><span>;</span></span></div></pre><p>In the above code, once a <code>Foo</code> instance is passed as argument to <code>print-bar</code>, the <code>Foo.Bar</code> method is called and the result is placed into <code>$bar</code>.</p>
<p>Coercion types are supposed to work wherever types work, but Rakudo currently (2018.05) only implements them in signatures, for both parameters and return types.</p>
<p>Coercion also works with return types:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>are-equal</span></span><span>&nbsp;(</span><span class="support type raku"><span>Int</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>x</span></span></span><span>,&nbsp;</span><span class="support type raku"><span>Int</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>y</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>--&gt;</span></span><span>&nbsp;</span><span class="support type raku"><span>Bool</span></span><span>(</span><span class="support type raku"><span>Int</span></span><span>)&nbsp;)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>x</span></span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>-</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>y</span></span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="keyword control repeat raku"><span>for</span></span><span>&nbsp;(</span><span class="constant numeric raku"><span>2</span></span><span>,</span><span class="constant numeric raku"><span>4</span></span><span>)&nbsp;</span><span class="support type exception raku"><span>X</span></span><span>&nbsp;(</span><span class="constant numeric raku"><span>1</span></span><span>,</span><span class="constant numeric raku"><span>2</span></span><span>)&nbsp;</span><span class="keyword operator multi-symbol raku"><span>-&gt;</span></span><span>&nbsp;(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>a</span></span></span><span>,</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>b</span></span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Are&nbsp;</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>a</span></span><span>&nbsp;and&nbsp;</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>b</span></span><span>&nbsp;equal?&nbsp;</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>,&nbsp;</span><span class="routine name raku"><span>are-equal</span></span><span>(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>a</span></span></span><span>,&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>b</span></span></span><span>);</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span><span>&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;&nbsp;OUTPUT:&nbsp;«Are&nbsp;2&nbsp;and&nbsp;1&nbsp;equal?&nbsp;True␤Are&nbsp;2&nbsp;and&nbsp;2&nbsp;equal?&nbsp;False␤Are&nbsp;4&nbsp;and&nbsp;1&nbsp;equal?&nbsp;True␤Are&nbsp;4&nbsp;and&nbsp;2&nbsp;equal?&nbsp;True␤»</span><span>&nbsp;</span></span></span></div></pre><p>In this case, we are coercing an <code>Int</code> to a <code>Bool</code>, which is then printed (put into a string context) in the <code>for</code> loop that calls the function.</p>
<h1 id="sub_MAIN"><a class="u" href="functions.html#___top" title="go to top of document">sub MAIN</a></h1>
<p>Declaring a <code>sub MAIN</code> is not compulsory in Raku scripts, but you can provide one to create a <a href="create-cli.html">command line interface</a> for your script.</p>

        </div>
    </div>

    

    <footer class="pretty-box yellow">
        <p style="display:;">
            Generated from <a href="https://github.com/Raku/doc/edit/master/doc//Language/functions.pod6">https://github.com/Raku/doc/edit/master/doc//Language/functions.pod6</a>.
        </p>
        <p>
            This is a work in progress to document Raku (formerly known as Perl 6), and
            known to be incomplete.
        </p>
        <p>
            <a href="https://github.com/Raku/doc/blob/master/CONTRIBUTING.md#reporting-bugs">
                Please report any issues
            </a>
            Your contribution is appreciated.
        </p>
        <p>
            This documentation is provided under the terms of the
            <a href="https://raw.githubusercontent.com/Raku/doc/master/LICENSE">
                Artistic License 2.0
            </a>. The Camelia image is
            <a href="https://raw.githubusercontent.com/Raku/mu/master/misc/camelia.txt">
                copyright © 2009 by Larry Wall.
            </a>
            <!-- CREDITS -->
            <!--External Link Image by Zapyon, CCA-SA 4.0. Derived from Wikimedia Foundation https://commons.wikimedia.org/wiki/File:External-link-04-bold-12x12.svg -->
        </p>
    </footer>

    <script type="text/javascript" src="../js/app.js%3Fv=1"></script>
    <script type="text/javascript" src="../js/search.js%3Fv=3"></script>
</body>
</html>
