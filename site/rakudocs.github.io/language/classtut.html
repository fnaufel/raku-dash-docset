<!doctype html>
<html lang="en">
<head>
    <title>Classes and objects</title>
    <meta charset="UTF-8"/>
    <meta name=viewport content="width=device-width, initial-scale=1">
    <link rel="icon" href="../favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" href="../css/app.css" media="screen" title="default" />
    <noscript> <style> #search { visibility: hidden; } </style> </noscript>
</head>

<body class="pod">

    <div id="___top"></div>

    <div id="header" class="pretty-box green">

        <a href="../index.html">
            <img src="../images/Camelia.svg" alt="»ö«" id="logo" width="62" height="48"/> &nbsp;Raku Documentation
        </a>

        <div id="search" class="ui-widget">
            <div class="green">
                <input placeholder="Loading..." id="query" accesskey="f" title="Enter term to search for (hit Esc to focus)"/>
            </div>
            <p id="not-found-message">
                Not in Index (<a href="classtut.html" id="try-web-search">try site search</a>)
            </p>
        </div>

        <div class="menu">

            <div class="menu-items dark-green">
                <a class='menu-item darker-green' href='https://raku.org'><strong>Raku homepage</strong></a>
                    <a class="menu-item selected darker-green" href="../language.html"> Language </a>
                    <a class="menu-item " href="../type.html"> Types </a>
                    <a class="menu-item " href="../routine.html"> Routines </a>
                    <a class="menu-item " href="../programs.html"> Programs </a>
                    <a class="menu-item " href="https://web.libera.chat/?channel=#raku"> Chat with us </a>
            </div>

            
            

        </div>
    </div>

    <div id="content" class="pretty-box yellow content_fragment">

        <div align="right" style="display:;">
            <button title="Edit this page"  class="pencil" onclick="location='https://github.com/Raku/doc/edit/master/doc//Language/classtut.pod6'">
                <svg width="14px" height="16px" viewBox="0 0 14 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                    <defs></defs>
                    <g id="Octicons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                        <g id="pencil" fill="#000000">
                            <path d="M0,12 L0,15 L3,15 L11,7 L8,4 L0,12 L0,12 Z M3,14 L1,14 L1,12 L2,12 L2,13 L3,13 L3,14 L3,14 Z M13.3,4.7 L12,6 L9,3 L10.3,1.7 C10.69,1.31 11.32,1.31 11.71,1.7 L13.3,3.29 C13.69,3.68 13.69,4.31 13.3,4.7 L13.3,4.7 Z" id="Shape"></path>
                        </g>
                    </g>
                </svg>
            </button>
        </div>

        <h1 class="title">Classes and objects</h1>
        <p class="subtitle">A tutorial about creating and using classes in Raku</p>

        <nav class="indexgroup">
<table id="TOC">
<caption><h2 id="TOC_Title">Table of Contents</h2></caption>
<tr class="toc-level-1"><td class="toc-number">1</td><td class="toc-text"><a href="classtut.html#Starting_with_class">Starting with class</a></td></tr>
<tr class="toc-level-1"><td class="toc-number">2</td><td class="toc-text"><a href="classtut.html#State">State</a></td></tr>
<tr class="toc-level-1"><td class="toc-number">3</td><td class="toc-text"><a href="classtut.html#Static_fields?">Static fields?</a></td></tr>
<tr class="toc-level-1"><td class="toc-number">4</td><td class="toc-text"><a href="classtut.html#Methods">Methods</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">4.1</td><td class="toc-text"><a href="classtut.html#Private_methods">Private methods</a></td></tr>
<tr class="toc-level-1"><td class="toc-number">5</td><td class="toc-text"><a href="classtut.html#Constructors">Constructors</a></td></tr>
<tr class="toc-level-1"><td class="toc-number">6</td><td class="toc-text"><a href="classtut.html#Consuming_our_class">Consuming our class</a></td></tr>
<tr class="toc-level-1"><td class="toc-number">7</td><td class="toc-text"><a href="classtut.html#Inheritance">Inheritance</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">7.1</td><td class="toc-text"><a href="classtut.html#Overriding_inherited_methods">Overriding inherited methods</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">7.2</td><td class="toc-text"><a href="classtut.html#Multiple_inheritance">Multiple inheritance</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">7.3</td><td class="toc-text"><a href="classtut.html#The_also_declarator">The <code class="pod-code-inline">also</code> declarator</a></td></tr>
<tr class="toc-level-1"><td class="toc-number">8</td><td class="toc-text"><a href="classtut.html#Introspection">Introspection</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">8.1</td><td class="toc-text"><a href="classtut.html#Overriding_default_gist_method">Overriding default gist method</a></td></tr>

</table>
</nav>

        <div class="pod-body ">
            <p><a name="index-entry-OOP"></a></p>
<p>Raku has a rich built-in syntax for defining and using classes.</p>
<p>A default constructor allows the setting of attributes for the created object:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>class</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>Point</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator raku"><span>has</span></span><span>&nbsp;</span><span class="support type raku"><span>Int</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>.</span></span><span class="variable other identifier raku"><span>x</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator raku"><span>has</span></span><span>&nbsp;</span><span class="support type raku"><span>Int</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>.</span></span><span class="variable other identifier raku"><span>y</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>class</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>Rectangle</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator raku"><span>has</span></span><span>&nbsp;</span><span class="routine name raku"><span>Point</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>.</span></span><span class="variable other identifier raku"><span>lower</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator raku"><span>has</span></span><span>&nbsp;</span><span class="routine name raku"><span>Point</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>.</span></span><span class="variable other identifier raku"><span>upper</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>area</span></span><span>(</span><span class="keyword operator multi-symbol raku"><span>--&gt;</span></span><span>&nbsp;</span><span class="support type raku"><span>Int</span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>!</span></span><span class="variable other identifier raku"><span>upper</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="keyword operator word raku"><span>x</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>-</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>!</span></span><span class="variable other identifier raku"><span>lower</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="keyword operator word raku"><span>x</span></span><span>)&nbsp;</span><span class="keyword operator generic raku"><span>*</span></span><span>&nbsp;(&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>!</span></span><span class="variable other identifier raku"><span>upper</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>y</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>-</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>!</span></span><span class="variable other identifier raku"><span>lower</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>y</span></span><span>);</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;Create&nbsp;a&nbsp;new&nbsp;Rectangle&nbsp;from&nbsp;two&nbsp;Points</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>r</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="routine name raku"><span>Rectangle</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>new</span></span><span>(</span><span class="string pair key raku"><span>lower&nbsp;</span></span><span class="keyword operator multi-symbol raku"><span>=&gt;</span></span><span>&nbsp;</span><span class="routine name raku"><span>Point</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>new</span></span><span>(</span><span class="keyword operator word raku"><span>x</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>=&gt;</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>0</span></span><span>,&nbsp;</span><span class="string pair key raku"><span>y&nbsp;</span></span><span class="keyword operator multi-symbol raku"><span>=&gt;</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>0</span></span><span>),</span></span></div><div class="line"><span class="source raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string pair key raku"><span>upper&nbsp;</span></span><span class="keyword operator multi-symbol raku"><span>=&gt;</span></span><span>&nbsp;</span><span class="routine name raku"><span>Point</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>new</span></span><span>(</span><span class="keyword operator word raku"><span>x</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>=&gt;</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>10</span></span><span>,&nbsp;</span><span class="string pair key raku"><span>y&nbsp;</span></span><span class="keyword operator multi-symbol raku"><span>=&gt;</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>10</span></span><span>));</span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>r</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>area</span></span><span>();&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«100␤»</span><span>&nbsp;</span></span></span></div></pre><p>In the two classes, the default constructor is being used. This constructor will use named parameters in its invocation: <code>Point.new(x =&gt; 0, y =&gt; 0)</code>.</p>
<p>You can also provide your own constructor and <code>BUILD</code> implementation. You need to do it for cases in which there are private attributes that might need to be populated during object construction, as in the example below:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;Example&nbsp;taken&nbsp;from</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;</span><span class="markup underline link https hyperlink"><span>https://medium.freecodecamp.org/a-short-overview-of-object-oriented-software-design-c7aa0a622c83</span></span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>class</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>Hero</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator raku"><span>has</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>@</span></span><span class="support class twigil raku"><span>!</span></span><span class="variable other identifier raku"><span>inventory</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator raku"><span>has</span></span><span>&nbsp;</span><span class="support type raku"><span>Str</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>.</span></span><span class="variable other identifier raku"><span>name</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type declarator type raku"><span>submethod</span></span><span>&nbsp;</span><span class="entity name function raku"><span>BUILD</span></span><span>(&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>name</span></span></span><span>,&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>@</span></span><span class="variable other identifier raku"><span>inventory</span></span></span><span>&nbsp;)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>!</span></span><span class="variable other identifier raku"><span>name</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>name</span></span></span><span>;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>@</span></span><span class="support class twigil raku"><span>!</span></span><span class="variable other identifier raku"><span>inventory</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>@</span></span><span class="variable other identifier raku"><span>inventory</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>act</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control flowcontrol raku"><span>return</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>@</span></span><span class="support class twigil raku"><span>!</span></span><span class="variable other identifier raku"><span>inventory</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>pick</span></span><span>;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>hero</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="routine name raku"><span>Hero</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>new</span></span><span>(</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>name</span></span><span>(</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>Þor</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>),</span></span></div><div class="line"><span class="source raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>inventory</span></span><span>([</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>Mjölnir</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>,</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>Chariot</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>,</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>Bilskirnir</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>]));</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>hero</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>act</span></span><span>;</span></span></div></pre><p>In this case, we <em>encapsulate</em> the private attribute <code>@!inventory</code>; but private instance variables cannot be set by the default constructor, which is why we add a <code>BUILD</code> submethod that takes care of that.</p>
<p>The following, more elaborate example, shows how a dependency handler might look in Raku. It showcases custom constructors, private and public attributes, <a href="../type/Submethod.html">Submethod</a>s, methods, and various aspects of signatures. It&#39;s not a lot of code, and yet the result is interesting and useful.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>class</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>Task</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator raku"><span>has</span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>&amp;</span></span><span class="support class twigil raku"><span>!</span></span><span class="variable other identifier raku"><span>callback</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator raku"><span>has</span></span><span>&nbsp;</span><span class="routine name raku"><span>Task</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>@</span></span><span class="support class twigil raku"><span>!</span></span><span class="variable other identifier raku"><span>dependencies</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator raku"><span>has</span></span><span>&nbsp;</span><span class="support type raku"><span>Bool</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>.</span></span><span class="variable other identifier raku"><span>done</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation whitespace comment leading raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;Normally&nbsp;doesn&#39;t&nbsp;need&nbsp;to&nbsp;be&nbsp;written</span><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>new</span></span><span>(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>&amp;</span></span><span class="variable other identifier raku"><span>callback</span></span></span><span>,&nbsp;</span><span class="keyword operator generic raku"><span>*</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>@</span></span><span class="variable other identifier raku"><span>dependencies</span></span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control flowcontrol raku"><span>return</span></span><span>&nbsp;</span><span class="variable language raku"><span>self</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>bless</span></span><span>(</span><span class="keyword operator generic raku"><span>:</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>&amp;</span></span><span class="variable other identifier raku"><span>callback</span></span></span><span>,&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>@</span></span><span class="variable other identifier raku"><span>dependencies</span></span></span><span>);</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation whitespace comment leading raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;BUILD&nbsp;is&nbsp;the&nbsp;equivalent&nbsp;of&nbsp;a&nbsp;constructor&nbsp;in&nbsp;other&nbsp;languages</span><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type declarator type raku"><span>submethod</span></span><span>&nbsp;</span><span class="entity name function raku"><span>BUILD</span></span><span>(</span><span class="keyword operator generic raku"><span>:</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>&amp;</span></span><span class="support class twigil raku"><span>!</span></span><span class="variable other identifier raku"><span>callback</span></span></span><span>,&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>@</span></span><span class="support class twigil raku"><span>!</span></span><span class="variable other identifier raku"><span>dependencies</span></span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>add-dependency</span></span><span>(</span><span class="routine name raku"><span>Task</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>dependency</span></span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>push</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>@</span></span><span class="support class twigil raku"><span>!</span></span><span class="variable other identifier raku"><span>dependencies</span></span></span><span>,&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>dependency</span></span></span><span>;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>perform</span></span><span>()&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control conditional raku"><span>unless</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>!</span></span><span class="variable other identifier raku"><span>done</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>perform</span></span><span>()&nbsp;</span><span class="keyword control repeat raku"><span>for</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>@</span></span><span class="support class twigil raku"><span>!</span></span><span class="variable other identifier raku"><span>dependencies</span></span></span><span>;</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>&amp;</span></span><span class="support class twigil raku"><span>!</span></span><span class="variable other identifier raku"><span>callback</span></span></span><span>();</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>!</span></span><span class="variable other identifier raku"><span>done</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="constant language boolean raku"><span>True</span></span><span>;</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>eat</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="routine name raku"><span>Task</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>new</span></span><span>(</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>eating&nbsp;dinner.&nbsp;NOM!</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>,</span></span></div><div class="line"><span class="source raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="routine name raku"><span>Task</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>new</span></span><span>(</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>making&nbsp;dinner</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>,</span></span></div><div class="line"><span class="source raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="routine name raku"><span>Task</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>new</span></span><span>(</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>buying&nbsp;food</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>,</span></span></div><div class="line"><span class="source raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="routine name raku"><span>Task</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>new</span></span><span>(</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>making&nbsp;some&nbsp;money</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>),</span></span></div><div class="line"><span class="source raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="routine name raku"><span>Task</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>new</span></span><span>(</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>going&nbsp;to&nbsp;the&nbsp;store</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>)</span></span></div><div class="line"><span class="source raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;),</span></span></div><div class="line"><span class="source raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="routine name raku"><span>Task</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>new</span></span><span>(</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>cleaning&nbsp;kitchen</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>)</span></span></div><div class="line"><span class="source raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</span></span></div><div class="line"><span class="source raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;);</span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>eat</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>perform</span></span><span>();</span></span></div></pre><p>In this case, <code>BUILD</code> is needed since we have overridden the default <code>new</code> constructor. <code>bless</code> is eventually invoking it with the two named arguments that correspond to the two properties without a default value. With its signature, <code>BUILD</code> converts the two positionals to the two attributes, <code>&amp;!callback</code> and <code>@!dependencies</code>, and returns the object (or turns it in to the next phase, <code>TWEAK</code>, if available).</p>
<p>Declaring <code>new</code> as a <code>method</code> and not as a <code>multi method</code> prevents us from using the default constructor; this implicit constructor uses the attributes as named parameters. This is one of the reasons why using <code>new</code> as a method&#39;s name is discouraged. If you need to declare it anyway, use <code>multi method new</code> if you do not want to disable the default constructor.</p>
<p><code>TWEAK</code> is the last submethod to be called, and it has the advantage of having the object properties available without needing to use the metaobject protocol. It can be used, for instance, to assign values to instance variables based on the values of other attributes or instance variables:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>class</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>Str-with-ID</span></span></span><span>&nbsp;</span><span class="storage modifier type constraints raku"><span>is</span></span><span>&nbsp;</span><span class="support type raku"><span>Str</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>counter</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>0</span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator raku"><span>has</span></span><span>&nbsp;</span><span class="support type raku"><span>Str</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>.</span></span><span class="variable other identifier raku"><span>string</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator raku"><span>has</span></span><span>&nbsp;</span><span class="support type raku"><span>Int</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>.</span></span><span class="variable other identifier raku"><span>ID</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type declarator type raku"><span>submethod</span></span><span>&nbsp;</span><span class="entity name function raku"><span>TWEAK</span></span><span>()&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>!</span></span><span class="variable other identifier raku"><span>ID</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>counter</span></span></span><span class="keyword operator multi-symbol raku"><span>++</span></span><span>;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="support type raku"><span>Str</span></span><span>-</span><span class="routine name raku"><span>with-ID</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>new</span></span><span>(</span><span class="string pair key raku"><span>string&nbsp;</span></span><span class="keyword operator multi-symbol raku"><span>=&gt;</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>First</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>)</span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>ID</span></span><span>;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«0»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="support type raku"><span>Str</span></span><span>-</span><span class="routine name raku"><span>with-ID</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>new</span></span><span>(</span><span class="string pair key raku"><span>string&nbsp;</span></span><span class="keyword operator multi-symbol raku"><span>=&gt;</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>Second</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>)</span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>ID</span></span><span>;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«1»</span><span>&nbsp;</span></span></span></div></pre><p>In this case, we need to compute <code>$.ID</code> from the value of a counter that is a class variable, <code>$counter</code>, thus we simply assign a value to it and increment the counter at the same time. Please check also <a href="objects.html#index-entry-TWEAK">this section on <code>TWEAK</code> in the Object Orientation (OO) document</a> for the mechanics of object construction.</p>
<p><a name="index-entry-DESTROY"></a> <a name="index-entry-submethod_DESTROY"></a></p>
<p><code>DESTROY</code> is the submethod that gets called when an object is garbage collected. That is going to happen only if the runtime needs the memory, so we can&#39;t rely on when it&#39;s going to happen. In particular, it could happen in the middle of some running code in a thread, so we must take special care to not assume any context during that event. We can use it to close any kind of handles or supplies or delete temporary files that are no longer going to be used.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>in_destructor</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>0</span></span><span>;</span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>class</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>Foo</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type declarator type raku"><span>submethod</span></span><span>&nbsp;</span><span class="entity name function raku"><span>DESTROY</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>in_destructor</span></span></span><span class="keyword operator multi-symbol raku"><span>++</span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>foo</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="keyword control repeat raku"><span>for</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>1</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>..</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>6000</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>foo</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="routine name raku"><span>Foo</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>new</span></span><span>();</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>DESTROY&nbsp;called&nbsp;</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>in_destructor</span></span><span>&nbsp;times</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></div></pre><p>This might print something like <code>DESTROY called 5701 times</code>, but it only kicks in after we have stomped over former instances of <code>Foo</code> 6000 times. We can&#39;t rely, however, on the order of destruction, for instance.</p>
<h1 id="Starting_with_class"><a class="u" href="classtut.html#___top" title="go to top of document">Starting with class</a></h1>
<p><a name="index-entry-class"></a> <a name="index-entry-classes"></a></p>
<p><a name="index-entry-state"></a> <a name="index-entry-has"></a> <a name="index-entry-classes_has"></a> <a name="index-entry-behavior"></a> <a name="index-entry-classes_behavior"></a></p>
<p>Raku, like many other languages, uses the <code>class</code> keyword to define a class. The block that follows may contain arbitrary code, just as with any other block, but classes commonly contain state and behavior declarations. The example code includes attributes (state), introduced through the <code>has</code> keyword, and behaviors, introduced through the <code>method</code> keyword.</p>
<p><a name="index-entry-type_object"></a> <a name="index-entry-DEFINITE"></a> <a name="index-entry-.DEFINITE"></a></p>
<p>Declaring a class creates a new <em>type object</em> which, by default, is installed into the current package (just like a variable declared with <code>our</code> scope). This type object is an &quot;empty instance&quot; of the class. For example, types such as <code>Int</code> and <code>Str</code> refer to the type object of one of the Raku built-in classes. The example above uses the class name <code>Task</code> so that other code can refer to it later, such as to create class instances by calling the <code>new</code> method.</p>
<p>You can use the <code>.DEFINITE</code> method to find out if what you have is an instance or a type object:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="support type raku"><span>Int</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>DEFINITE</span></span><span>;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«False␤»&nbsp;(type&nbsp;object)</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>426</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>DEFINITE</span></span><span>;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«True␤»&nbsp;&nbsp;(instance)</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>class</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>Foo</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span><span>}</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="routine name raku"><span>Foo</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>DEFINITE</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«False␤»&nbsp;(type&nbsp;object)</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="routine name raku"><span>Foo</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>new</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>DEFINITE</span></span><span>;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«True␤»&nbsp;&nbsp;(instance)</span><span>&nbsp;</span></span></span></div></pre><p>You can also use type &quot;smileys&quot; to only accept instances or type objects:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>multi</span></span><span>&nbsp;</span><span class="entity name function raku"><span>foo</span></span><span>&nbsp;(</span><span class="support type raku"><span>Int</span></span><span class="meta adverb definedness raku"><span class="keyword operator adverb raku"><span>:</span></span><span class="keyword other special-method definedness raku"><span>U</span></span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>It&#39;s&nbsp;a&nbsp;type&nbsp;object!</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>multi</span></span><span>&nbsp;</span><span class="entity name function raku"><span>foo</span></span><span>&nbsp;(</span><span class="support type raku"><span>Int</span></span><span class="meta adverb definedness raku"><span class="keyword operator adverb raku"><span>:</span></span><span class="keyword other special-method definedness raku"><span>D</span></span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>It&#39;s&nbsp;an&nbsp;instance!</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="routine name raku"><span>foo</span></span><span>&nbsp;</span><span class="support type raku"><span>Int</span></span><span>;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«It&#39;s&nbsp;a&nbsp;type&nbsp;object!␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="routine name raku"><span>foo</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>42</span></span><span>;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«It&#39;s&nbsp;an&nbsp;instance!␤»</span><span>&nbsp;</span></span></span></div></pre><p><a name="index-entry-attributes"></a> <a name="index-entry-classes_attributes"></a> <a name="index-entry-encapsulation"></a> <a name="index-entry-classes_encapsulation"></a></p>
<h1 id="State"><a class="u" href="classtut.html#___top" title="go to top of document">State</a></h1>
<p>In the <code>Task</code> class, the first three lines inside the block all declare attributes (called <em>fields</em> or <em>instance storage</em> in other languages). Just as a <code>my</code> variable cannot be accessed from outside its declared scope, attributes are not accessible outside of the class. This <em>encapsulation</em> is one of the key principles of object oriented design.</p>
<p>The first declaration specifies instance storage for a callback (i.e., a bit of code to invoke in order to perform the task that an object represents):</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>has</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>&amp;</span></span><span class="support class twigil raku"><span>!</span></span><span class="variable other identifier raku"><span>callback</span></span></span><span>;</span></span></div></pre><p><a name="index-entry-sigils_&"></a> <a name="index-entry-twigils"></a> <a name="index-entry-twigils_!"></a></p>
<p>The <code>&amp;</code> sigil indicates that this attribute represents something invocable. The <code>!</code> character is a <em>twigil</em>, or secondary sigil. A twigil forms part of the name of the variable. In this case, the <code>!</code> twigil emphasizes that this attribute is private to the class.</p>
<p>The second declaration also uses the private twigil:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>has</span></span><span>&nbsp;</span><span class="routine name raku"><span>Task</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>@</span></span><span class="support class twigil raku"><span>!</span></span><span class="variable other identifier raku"><span>dependencies</span></span></span><span>;</span></span></div></pre><p>However, this attribute represents an array of items, so it requires the <code>@</code> sigil. These items each specify a task that must be completed before the present one is completed. Furthermore, the type declaration on this attribute indicates that the array may only hold instances of the <code>Task</code> class (or some subclass of it).</p>
<p>The third attribute represents the state of completion of a task:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>has</span></span><span>&nbsp;</span><span class="support type raku"><span>Bool</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>.</span></span><span class="variable other identifier raku"><span>done</span></span></span><span>;</span></span></div></pre><p><a name="index-entry-twigils_."></a> <a name="index-entry-twigils_accessors"></a> <a name="index-entry-accessor_methods"></a> <a name="index-entry-classes_accessors"></a></p>
<p>This scalar attribute (with the <code>$</code> sigil) has a type of <code>Bool</code>. Instead of the <code>!</code> twigil, the <code>.</code> twigil is used. While Raku does enforce encapsulation on attributes, it also saves you from writing accessor methods. Replacing the <code>!</code> with a <code>.</code> both declares a private attribute and an accessor method named after the attribute. In this case, both the attribute <code>$!done</code> and the accessor method <code>done</code> are declared. It&#39;s as if you had written:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>has</span></span><span>&nbsp;</span><span class="support type raku"><span>Bool</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>!</span></span><span class="variable other identifier raku"><span>done</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>done</span></span><span>()&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="keyword control flowcontrol raku"><span>return</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>!</span></span><span class="variable other identifier raku"><span>done</span></span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></div></pre><p>Note that this is not like declaring a public attribute, as some languages allow; you really get <em>both</em> a private attribute and a method, without having to write the method by hand. You are free instead to write your own accessor method, if at some future point you need to do something more complex than returning the value.</p>
<p><a name="index-entry-traits_is_rw"></a> Note that using the <code>.</code> twigil has created a method that will provide read-only access to the attribute. If instead the users of this object should be able to reset a task&#39;s completion state (perhaps to perform it again), you can change the attribute declaration:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>has</span></span><span>&nbsp;</span><span class="support type raku"><span>Bool</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>.</span></span><span class="variable other identifier raku"><span>done</span></span></span><span>&nbsp;</span><span class="storage modifier type constraints raku"><span>is</span></span><span>&nbsp;</span><span class="entity name type trait raku"><span>rw</span></span><span>;</span></span></div></pre><p>The <code>is rw</code> trait causes the generated accessor method to return a container so external code can modify the value of the attribute.</p>
<p>You can also supply default values to attributes (which works equally for those with and without accessors):</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>has</span></span><span>&nbsp;</span><span class="support type raku"><span>Bool</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>.</span></span><span class="variable other identifier raku"><span>done</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="constant language boolean raku"><span>False</span></span><span>;</span></span></div></pre><p>The assignment is carried out at object build time. The right-hand side is evaluated at that time, and can even reference earlier attributes:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>has</span></span><span>&nbsp;</span><span class="routine name raku"><span>Task</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>@</span></span><span class="support class twigil raku"><span>!</span></span><span class="variable other identifier raku"><span>dependencies</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>has</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>.</span></span><span class="variable other identifier raku"><span>ready</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="keyword operator word raku"><span>not</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>@</span></span><span class="support class twigil raku"><span>!</span></span><span class="variable other identifier raku"><span>dependencies</span></span></span><span>;</span></span></div></pre><p>Writable attributes are accessible through writable containers:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>class</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>a-class</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator raku"><span>has</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>.</span></span><span class="variable other identifier raku"><span>an-attribute</span></span></span><span>&nbsp;</span><span class="storage modifier type constraints raku"><span>is</span></span><span>&nbsp;</span><span class="entity name type trait raku"><span>rw</span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;(</span><span class="routine name raku"><span>a-class</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>new</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>an-attribute</span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>hey</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>);&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«hey␤»</span><span>&nbsp;</span></span></span></div></pre><p>This attribute can also be accessed using the <code>.an-attribute</code> or <code>.an-attribute()</code> syntax. See also <a href="typesystem.html#trait_is_rw">the <code>is rw</code> trait on classes</a> for examples on how this works on the whole class.</p>
<p><a name="index-entry-class_variables"></a> A class declaration can also include <em>class variables</em>, which are variables whose value is shared by all instances, and can be used for things like counting the number of instantiations or any other shared state. Class variables use the same syntax as the rest of the attributes, but are declared as <code>my</code> or <code>our</code>, depending on the scope; <code>our</code> variables will be shared by subclasses, since they have package scope.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>class</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>Str-with-ID</span></span></span><span>&nbsp;</span><span class="storage modifier type constraints raku"><span>is</span></span><span>&nbsp;</span><span class="support type raku"><span>Str</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>counter</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>0</span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator raku"><span>our</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>hierarchy-counter</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>0</span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator raku"><span>has</span></span><span>&nbsp;</span><span class="support type raku"><span>Str</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>.</span></span><span class="variable other identifier raku"><span>string</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator raku"><span>has</span></span><span>&nbsp;</span><span class="support type raku"><span>Int</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>.</span></span><span class="variable other identifier raku"><span>ID</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>TWEAK</span></span><span>()&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>!</span></span><span class="variable other identifier raku"><span>ID</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>counter</span></span></span><span class="keyword operator multi-symbol raku"><span>++</span></span><span>;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>hierarchy-counter</span></span></span><span class="keyword operator multi-symbol raku"><span>++</span></span><span>;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>class</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>Str-with-ID-and-tag</span></span></span><span>&nbsp;</span><span class="storage modifier type constraints raku"><span>is</span></span><span>&nbsp;</span><span class="support type raku"><span>Str</span></span><span>-</span><span class="routine name raku"><span>with-ID</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator raku"><span>has</span></span><span>&nbsp;</span><span class="support type raku"><span>Str</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>.</span></span><span class="variable other identifier raku"><span>tag</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="support type raku"><span>Str</span></span><span>-</span><span class="routine name raku"><span>with-ID</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>new</span></span><span>(</span><span class="string pair key raku"><span>string&nbsp;</span></span><span class="keyword operator multi-symbol raku"><span>=&gt;</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>First</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>)</span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>ID</span></span><span>;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«0␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="support type raku"><span>Str</span></span><span>-</span><span class="routine name raku"><span>with-ID</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>new</span></span><span>(</span><span class="string pair key raku"><span>string&nbsp;</span></span><span class="keyword operator multi-symbol raku"><span>=&gt;</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>Second</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>)</span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>ID</span></span><span>;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«1␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="support type raku"><span>Str</span></span><span>-</span><span class="routine name raku"><span>with-ID-and-tag</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>new</span></span><span>(&nbsp;</span><span class="string pair key raku"><span>string&nbsp;</span></span><span class="keyword operator multi-symbol raku"><span>=&gt;</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>Third</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="string pair key raku"><span>tag&nbsp;</span></span><span class="keyword operator multi-symbol raku"><span>=&gt;</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>Ordinal</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>&nbsp;)</span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>ID</span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«2␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>Str-with-ID</span></span></span><span>::</span><span class="routine name raku"><span>hierarchy-counter</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«4␤»</span><span>&nbsp;</span></span></span></div></pre><p>In this case, using <code>new</code> might be the easiest way to initialize the <code>$.ID</code> field and increment the value of the counter at the same time. <code>new</code>, through <code>bless</code>, will invoke the default <code>BUILD</code>, assigning the values to their properties correctly. You can obtain the same effect using <code>TWEAK</code>, which is considered a better practice by Raku experts. Please check <a href="classtut.html#index-entry-OOP">the section on submethods</a> for an alternative example on how to do this. Since <code>TWEAK</code> is called in every object instantiation, it&#39;s incremented twice when creating objects of class <code>Str-with-ID-and-tag</code>; this is a <em>class hierarchy</em> variable that is shared by all subclasses of <code>Str-with-ID</code>. Additionally, class variables declared with package scope are visible via their fully qualified name (FQN), while lexically scoped class variables are &quot;private&quot;.</p>
<h1 id="Static_fields?"><a class="u" href="classtut.html#___top" title="go to top of document">Static fields?</a></h1>
<p>Raku has no <strong>static</strong> keyword. Nevertheless, any class may declare anything that a module can, so making a scoped variable sounds like a good idea.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>class</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>Singleton</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="routine name raku"><span>Singleton</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>instance</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>new</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span class="keyword operator multi-symbol raku"><span>!!!</span></span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type declarator type raku"><span>submethod</span></span><span>&nbsp;</span><span class="entity name function raku"><span>instance</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>instance</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="routine name raku"><span>Singleton</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>bless</span></span><span>&nbsp;</span><span class="keyword control conditional raku"><span>unless</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>instance</span></span></span><span>;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>instance</span></span></span><span>;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div></pre><p>Class attributes defined by <a href="../syntax/my.html">my</a> or <a href="../syntax/our.html">our</a> may also be initialized when being declared, however we are implementing the Singleton pattern here and the object must be created during its first use. It is not 100% possible to predict the moment when attribute initialization will be executed, because it can take place during compilation, runtime or both, especially when importing the class using the <a href="../syntax/use.html">use</a> keyword.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>class</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>HaveStaticAttr</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="routine name raku"><span>Foo</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>.</span></span><span class="variable other identifier raku"><span>foo</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="routine name raku"><span>some_complicated_subroutine</span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div></pre><p>Class attributes may also be declared with a secondary sigil – in a similar manner to instance attributes – that will generate read-only accessors if the attribute is to be public.</p>
<h1 id="Methods"><a class="u" href="classtut.html#___top" title="go to top of document">Methods</a></h1>
<p><a name="index-entry-methods"></a> <a name="index-entry-classes_methods"></a></p>
<p>While attributes give objects state, methods give objects behaviors. Let&#39;s ignore the <code>new</code> method temporarily; it&#39;s a special type of method. Consider the second method, <code>add-dependency</code>, which adds a new task to a task&#39;s dependency list:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>add-dependency</span></span><span>(</span><span class="routine name raku"><span>Task</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>dependency</span></span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>push</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>@</span></span><span class="support class twigil raku"><span>!</span></span><span class="variable other identifier raku"><span>dependencies</span></span></span><span>,&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>dependency</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div></pre><p><a name="index-entry-invocant"></a> In many ways, this looks a lot like a <code>sub</code> declaration. However, there are two important differences. First, declaring this routine as a method adds it to the list of methods for the current class, thus any instance of the <code>Task</code> class can call it with the <code>.</code> method call operator. Second, a method places its invocant into the special variable <code>self</code>.</p>
<p>The method itself takes the passed parameter – which must be an instance of the <code>Task</code> class – and <code>push</code>es it onto the invocant&#39;s <code>@!dependencies</code> attribute.</p>
<p>The <code>perform</code> method contains the main logic of the dependency handler:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>perform</span></span><span>()&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control conditional raku"><span>unless</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>!</span></span><span class="variable other identifier raku"><span>done</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>perform</span></span><span>()&nbsp;</span><span class="keyword control repeat raku"><span>for</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>@</span></span><span class="support class twigil raku"><span>!</span></span><span class="variable other identifier raku"><span>dependencies</span></span></span><span>;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>&amp;</span></span><span class="support class twigil raku"><span>!</span></span><span class="variable other identifier raku"><span>callback</span></span></span><span>();</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>!</span></span><span class="variable other identifier raku"><span>done</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="constant language boolean raku"><span>True</span></span><span>;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div></pre><p>It takes no parameters, working instead with the object&#39;s attributes. First, it checks if the task has already completed by checking the <code>$!done</code> attribute. If so, there&#39;s nothing to do.</p>
<p><a name="index-entry-operators_."></a> Otherwise, the method performs all of the task&#39;s dependencies, using the <code>for</code> construct to iterate over all of the items in the <code>@!dependencies</code> attribute. This iteration places each item – each a <code>Task</code> object – into the topic variable, <code>$_</code>. Using the <code>.</code> method call operator without specifying an explicit invocant uses the current topic as the invocant. Thus the iteration construct calls the <code>.perform()</code> method on every <code>Task</code> object in the <code>@!dependencies</code> attribute of the current invocant.</p>
<p>After all of the dependencies have completed, it&#39;s time to perform the current <code>Task</code>&#39;s task by invoking the <code>&amp;!callback</code> attribute directly; this is the purpose of the parentheses. Finally, the method sets the <code>$!done</code> attribute to <code>True</code>, so that subsequent invocations of <code>perform</code> on this object (if this <code>Task</code> is a dependency of another <code>Task</code>, for example) will not repeat the task.</p>
<p><a name="index-entry-!_(private_methods)"></a> <a name="index-entry-FQN"></a></p>
<h2 id="Private_methods"><a class="u" href="classtut.html#___top" title="go to top of document">Private methods</a></h2>
<p>Just like attributes, methods can also be private. Private methods are declared with a prefixed exclamation mark. They are called with <code>self!</code> followed by the method&#39;s name. In the following implementation of a <code>MP3TagData</code> class to extract <a href="https://en.wikipedia.org/wiki/ID3">ID3v1</a> metadata from an mp3 file, methods <code>parse-data</code>, <code>can-read-format</code>, and <code>trim-nulls</code> are private methods while the remaining ones are public methods:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>class</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>MP3TagData</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator raku"><span>has</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>.</span></span><span class="variable other identifier raku"><span>filename</span></span></span><span>&nbsp;</span><span class="storage modifier type constraints raku"><span>where</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>.</span></span><span class="support type raku"><span>IO</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>~~</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>e</span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator raku"><span>has</span></span><span>&nbsp;</span><span class="support type raku"><span>Str</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>.</span></span><span class="variable other identifier raku"><span>title</span></span></span><span>&nbsp;&nbsp;&nbsp;</span><span class="storage modifier type constraints raku"><span>is</span></span><span>&nbsp;</span><span class="routine name raku"><span>built</span></span><span>(</span><span class="constant language boolean raku"><span>False</span></span><span>);</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator raku"><span>has</span></span><span>&nbsp;</span><span class="support type raku"><span>Str</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>.</span></span><span class="variable other identifier raku"><span>artist</span></span></span><span>&nbsp;&nbsp;</span><span class="storage modifier type constraints raku"><span>is</span></span><span>&nbsp;</span><span class="routine name raku"><span>built</span></span><span>(</span><span class="constant language boolean raku"><span>False</span></span><span>);</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator raku"><span>has</span></span><span>&nbsp;</span><span class="support type raku"><span>Str</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>.</span></span><span class="variable other identifier raku"><span>album</span></span></span><span>&nbsp;&nbsp;&nbsp;</span><span class="storage modifier type constraints raku"><span>is</span></span><span>&nbsp;</span><span class="routine name raku"><span>built</span></span><span>(</span><span class="constant language boolean raku"><span>False</span></span><span>);</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator raku"><span>has</span></span><span>&nbsp;</span><span class="support type raku"><span>Str</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>.</span></span><span class="variable other identifier raku"><span>year</span></span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier type constraints raku"><span>is</span></span><span>&nbsp;</span><span class="routine name raku"><span>built</span></span><span>(</span><span class="constant language boolean raku"><span>False</span></span><span>);</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator raku"><span>has</span></span><span>&nbsp;</span><span class="support type raku"><span>Str</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>.</span></span><span class="variable other identifier raku"><span>comment</span></span></span><span>&nbsp;</span><span class="storage modifier type constraints raku"><span>is</span></span><span>&nbsp;</span><span class="routine name raku"><span>built</span></span><span>(</span><span class="constant language boolean raku"><span>False</span></span><span>);</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator raku"><span>has</span></span><span>&nbsp;</span><span class="support type raku"><span>Int</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>.</span></span><span class="variable other identifier raku"><span>genre</span></span></span><span>&nbsp;&nbsp;&nbsp;</span><span class="storage modifier type constraints raku"><span>is</span></span><span>&nbsp;</span><span class="routine name raku"><span>built</span></span><span>(</span><span class="constant language boolean raku"><span>False</span></span><span>);</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator raku"><span>has</span></span><span>&nbsp;</span><span class="support type raku"><span>Int</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>.</span></span><span class="variable other identifier raku"><span>track</span></span></span><span>&nbsp;&nbsp;&nbsp;</span><span class="storage modifier type constraints raku"><span>is</span></span><span>&nbsp;</span><span class="routine name raku"><span>built</span></span><span>(</span><span class="constant language boolean raku"><span>False</span></span><span>);</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator raku"><span>has</span></span><span>&nbsp;</span><span class="support type raku"><span>Str</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>.</span></span><span class="variable other identifier raku"><span>version</span></span></span><span>&nbsp;</span><span class="storage modifier type constraints raku"><span>is</span></span><span>&nbsp;</span><span class="routine name raku"><span>built</span></span><span>(</span><span class="constant language boolean raku"><span>False</span></span><span>);</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator raku"><span>has</span></span><span>&nbsp;</span><span class="support type raku"><span>Str</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>.</span></span><span class="variable other identifier raku"><span>type</span></span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier type constraints raku"><span>is</span></span><span>&nbsp;</span><span class="routine name raku"><span>built</span></span><span>(</span><span class="constant language boolean raku"><span>False</span></span><span>)&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>ID3</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type declarator type raku"><span>submethod</span></span><span>&nbsp;</span><span class="entity name function raku"><span>TWEAK</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control conditional raku"><span>with</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>!</span></span><span class="variable other identifier raku"><span>filename</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support type raku"><span>IO</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>open</span></span><span>(</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>r</span></span><span>,&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>bin</span></span><span>)&nbsp;</span><span class="keyword operator multi-symbol raku"><span>-&gt;</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>fh</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>fh</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>seek</span></span><span>(</span><span class="constant numeric raku"><span>-128</span></span><span>,&nbsp;</span><span class="routine name raku"><span>SeekFromEnd</span></span><span>);</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>tagdata</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>fh</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>read</span></span><span>(</span><span class="constant numeric raku"><span>128</span></span><span>);</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable language raku"><span>self</span></span><span class="keyword operator generic raku"><span>!</span></span><span class="routine name raku"><span>parse-data</span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>tagdata</span></span></span><span>;</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>fh</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>close</span></span><span>;</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control conditional raku"><span>else</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control control-handlers raku"><span>warn</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Failed&nbsp;to&nbsp;open&nbsp;file.</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="support class method private raku"><span>!</span></span><span class="entity name function raku"><span>parse-data</span></span><span>(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>data</span></span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control conditional raku"><span>if</span></span><span>&nbsp;</span><span class="variable language raku"><span>self</span></span><span class="keyword operator generic raku"><span>!</span></span><span class="routine name raku"><span>can-read-format</span></span><span>(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>data</span></span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>offset</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>data</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>bytes</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>-</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>128</span></span><span>;</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>!</span></span><span class="variable other identifier raku"><span>title</span></span></span><span>&nbsp;&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="variable language raku"><span>self</span></span><span class="keyword operator generic raku"><span>!</span></span><span class="routine name raku"><span>trim-nulls</span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>data</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>subbuf</span></span><span>(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>offset</span></span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>+</span></span><span>&nbsp;&nbsp;</span><span class="constant numeric raku"><span>3</span></span><span>,&nbsp;</span><span class="constant numeric raku"><span>30</span></span><span>);</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>!</span></span><span class="variable other identifier raku"><span>artist</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="variable language raku"><span>self</span></span><span class="keyword operator generic raku"><span>!</span></span><span class="routine name raku"><span>trim-nulls</span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>data</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>subbuf</span></span><span>(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>offset</span></span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>+</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>33</span></span><span>,&nbsp;</span><span class="constant numeric raku"><span>30</span></span><span>);</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>!</span></span><span class="variable other identifier raku"><span>album</span></span></span><span>&nbsp;&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="variable language raku"><span>self</span></span><span class="keyword operator generic raku"><span>!</span></span><span class="routine name raku"><span>trim-nulls</span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>data</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>subbuf</span></span><span>(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>offset</span></span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>+</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>63</span></span><span>,&nbsp;</span><span class="constant numeric raku"><span>30</span></span><span>);</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>!</span></span><span class="variable other identifier raku"><span>year</span></span></span><span>&nbsp;&nbsp;&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="variable language raku"><span>self</span></span><span class="keyword operator generic raku"><span>!</span></span><span class="routine name raku"><span>trim-nulls</span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>data</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>subbuf</span></span><span>(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>offset</span></span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>+</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>93</span></span><span>,&nbsp;&nbsp;</span><span class="constant numeric raku"><span>4</span></span><span>);</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="support type raku"><span>Int</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>track-flag</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>data</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>subbuf</span></span><span>(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>offset</span></span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>+</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>97</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>+</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>28</span></span><span>,&nbsp;</span><span class="constant numeric raku"><span>1</span></span><span>)</span><span class="keyword operator generic raku"><span>.</span></span><span class="support type raku"><span>Int</span></span><span>;</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>!</span></span><span class="variable other identifier raku"><span>track</span></span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>data</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>subbuf</span></span><span>(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>offset</span></span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>+</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>97</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>+</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>29</span></span><span>,&nbsp;</span><span class="constant numeric raku"><span>1</span></span><span>)</span><span class="keyword operator generic raku"><span>.</span></span><span class="support type raku"><span>Int</span></span><span>;</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>!</span></span><span class="variable other identifier raku"><span>version</span></span></span><span>,&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>!</span></span><span class="variable other identifier raku"><span>comment</span></span></span><span>)&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>track-flag</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>==</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>0</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>&amp;&amp;</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>!</span></span><span class="variable other identifier raku"><span>track</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>!=</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>0</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator multi-symbol raku"><span>??</span></span><span>&nbsp;(</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>1.1</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="variable language raku"><span>self</span></span><span class="keyword operator generic raku"><span>!</span></span><span class="routine name raku"><span>trim-nulls</span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>data</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>subbuf</span></span><span>(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>offset</span></span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>+</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>97</span></span><span>,&nbsp;</span><span class="constant numeric raku"><span>28</span></span><span>))</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator multi-symbol raku"><span>!!</span></span><span>&nbsp;(</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>1.0</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="variable language raku"><span>self</span></span><span class="keyword operator generic raku"><span>!</span></span><span class="routine name raku"><span>trim-nulls</span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>data</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>subbuf</span></span><span>(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>offset</span></span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>+</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>97</span></span><span>,&nbsp;</span><span class="constant numeric raku"><span>30</span></span><span>));</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>!</span></span><span class="variable other identifier raku"><span>genre</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>data</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>subbuf</span></span><span>(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>offset</span></span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>+</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>97</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>+</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>30</span></span><span>,&nbsp;</span><span class="constant numeric raku"><span>1</span></span><span>)</span><span class="keyword operator generic raku"><span>.</span></span><span class="support type raku"><span>Int</span></span><span>;</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="support class method private raku"><span>!</span></span><span class="entity name function raku"><span>can-read-format</span></span><span>(</span><span class="support type raku"><span>Buf</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>data</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>--&gt;</span></span><span>&nbsp;</span><span class="support type raku"><span>Bool</span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable language raku"><span>self</span></span><span class="keyword operator generic raku"><span>!</span></span><span class="routine name raku"><span>trim-nulls</span></span><span>(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>data</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>subbuf</span></span><span>(</span><span class="constant numeric raku"><span>0</span></span><span class="keyword operator multi-symbol raku"><span>..</span></span><span class="constant numeric raku"><span>2</span></span><span>))&nbsp;</span><span class="keyword operator word raku"><span>eq</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>TAG</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="support class method private raku"><span>!</span></span><span class="entity name function raku"><span>trim-nulls</span></span><span>(</span><span class="support type raku"><span>Buf</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>data</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>--&gt;</span></span><span>&nbsp;</span><span class="support type raku"><span>Str</span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>data</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>decode</span></span><span>(</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>utf-8</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>)</span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>subst</span></span><span>(</span><span class="punctuation definition regexp raku"><span>/</span></span><span class="string regexp raku"><span class="punctuation hex raku"><span class="keyword punctuation hex raku"><span>\x</span></span><span class="keyword operator bracket open raku"><span>[</span></span><span class="routine name hex raku"><span>0000</span></span><span class="keyword operator bracket close raku"><span>]</span></span></span><span class="keyword operator quantifiers regexp raku"><span>+</span></span></span><span class="punctuation definition regexp raku"><span>/</span></span><span>,&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>)</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div></pre><p>To call a private method of another class, the caller has to be trusted by the callee. A trust relationship is declared with <a href="typesystem.html#trait_trusts"><code>trusts</code></a> and the class to be trusted must already be declared. Calling a private method of another class requires an instance of that class and the fully qualified name (FQN) of the method. A trust relationship also allows access to private attributes.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>class</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>B</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span class="keyword operator multi-symbol raku"><span>...</span></span><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>class</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>C</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier type constraints raku"><span>trusts</span></span><span>&nbsp;</span><span class="routine name raku"><span>B</span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator raku"><span>has</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>!</span></span><span class="variable other identifier raku"><span>hidden</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>invisible</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="support class method private raku"><span>!</span></span><span class="entity name function raku"><span>not-yours</span></span><span>&nbsp;()&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>hidden</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>yours-to-use</span></span><span>&nbsp;()&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>!</span></span><span class="variable other identifier raku"><span>hidden</span></span></span><span>;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable language raku"><span>self</span></span><span class="keyword operator generic raku"><span>!</span></span><span class="routine name raku"><span>not-yours</span></span><span>();</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>class</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>B</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>i-am-trusted</span></span><span>&nbsp;()&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="routine name raku"><span>C</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>c</span></span></span><span class="storage modifier assignment raku"><span>.=</span></span><span class="support function raku"><span>new</span></span><span>;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>c</span></span></span><span class="keyword operator generic raku"><span>!</span></span><span class="routine name raku"><span>C</span></span><span>::</span><span class="routine name raku"><span>not-yours</span></span><span>();</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>C</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>new</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>yours-to-use</span></span><span>();&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;the&nbsp;context&nbsp;of&nbsp;this&nbsp;call&nbsp;is&nbsp;GLOBAL,&nbsp;and&nbsp;not&nbsp;trusted&nbsp;by&nbsp;C</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>B</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>new</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>i-am-trusted</span></span><span>();</span></span></div></pre><p>Trust relationships are not subject to inheritance. To trust the global namespace, the pseudo package <code>GLOBAL</code> can be used.</p>
<p><a name="index-entry-constructors"></a></p>
<h1 id="Constructors"><a class="u" href="classtut.html#___top" title="go to top of document">Constructors</a></h1>
<p>Raku is rather more liberal than many languages in the area of constructors. A constructor is anything that returns an instance of the class. Furthermore, constructors are ordinary methods. You inherit a default constructor named <code>new</code> from the base class <code>Mu</code>, but you are free to override <code>new</code>, as this example does:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>new</span></span><span>(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>&amp;</span></span><span class="variable other identifier raku"><span>callback</span></span></span><span>,&nbsp;</span><span class="keyword operator generic raku"><span>*</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>@</span></span><span class="variable other identifier raku"><span>dependencies</span></span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control flowcontrol raku"><span>return</span></span><span>&nbsp;</span><span class="variable language raku"><span>self</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>bless</span></span><span>(</span><span class="keyword operator generic raku"><span>:</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>&amp;</span></span><span class="variable other identifier raku"><span>callback</span></span></span><span>,&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>@</span></span><span class="variable other identifier raku"><span>dependencies</span></span></span><span>);</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div></pre><p><a name="index-entry-objects_bless"></a> <a name="index-entry-bless"></a></p>
<p>The biggest difference between constructors in Raku and constructors in languages such as C# and Java is that rather than setting up state on a somehow already magically created object, Raku constructors create the object themselves. The easiest way to do this is by calling the <a href="../routine/bless.html">bless</a> method, also inherited from <a href="../type/Mu.html">Mu</a>. The <code>bless</code> method expects a set of named parameters to provide the initial values for each attribute.</p>
<p>The example&#39;s constructor turns positional arguments into named arguments, so that the class can provide a nice constructor for its users. The first parameter is the callback (the thing which will execute the task). The rest of the parameters are dependent <code>Task</code> instances. The constructor captures these into the <code>@dependencies</code> slurpy array and passes them as named parameters to <code>bless</code> (note that <code>:&amp;callback</code> uses the name of the variable – minus the sigil – as the name of the parameter).</p>
<p><a name="index-entry-BUILD"></a> Private attributes really are private. This means that <code>bless</code> is not allowed to bind things to <code>&amp;!callback</code> and <code>@!dependencies</code> directly. To do this, we override the <code>BUILD</code> submethod, which is called on the brand new object by <code>bless</code>:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>submethod</span></span><span>&nbsp;</span><span class="entity name function raku"><span>BUILD</span></span><span>(</span><span class="keyword operator generic raku"><span>:</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>&amp;</span></span><span class="support class twigil raku"><span>!</span></span><span class="variable other identifier raku"><span>callback</span></span></span><span>,&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>@</span></span><span class="support class twigil raku"><span>!</span></span><span class="variable other identifier raku"><span>dependencies</span></span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></div></pre><p>Since <code>BUILD</code> runs in the context of the newly created <code>Task</code> object, it is allowed to manipulate those private attributes. The trick here is that the private attributes (<code>&amp;!callback</code> and <code>@!dependencies</code>) are being used as the bind targets for <code>BUILD</code>&#39;s parameters. Zero-boilerplate initialization! See <a href="objects.html#Object_construction">objects</a> for more information.</p>
<p>The <code>BUILD</code> method is responsible for initializing all attributes and must also handle default values:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>has</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>&amp;</span></span><span class="support class twigil raku"><span>!</span></span><span class="variable other identifier raku"><span>callback</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>has</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>@</span></span><span class="support class twigil raku"><span>!</span></span><span class="variable other identifier raku"><span>dependencies</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>has</span></span><span>&nbsp;</span><span class="support type raku"><span>Bool</span></span><span>&nbsp;(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>.</span></span><span class="variable other identifier raku"><span>done</span></span></span><span>,&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>.</span></span><span class="variable other identifier raku"><span>ready</span></span></span><span>);</span></span></div><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>submethod</span></span><span>&nbsp;</span><span class="entity name function raku"><span>BUILD</span></span><span>(</span></span></div><div class="line"><span class="source raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>&amp;</span></span><span class="support class twigil raku"><span>!</span></span><span class="variable other identifier raku"><span>callback</span></span></span><span>,</span></span></div><div class="line"><span class="source raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>@</span></span><span class="support class twigil raku"><span>!</span></span><span class="variable other identifier raku"><span>dependencies</span></span></span><span>,</span></span></div><div class="line"><span class="source raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>!</span></span><span class="variable other identifier raku"><span>done</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="constant language boolean raku"><span>False</span></span><span>,</span></span></div><div class="line"><span class="source raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>!</span></span><span class="variable other identifier raku"><span>ready</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="keyword operator word raku"><span>not</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>@</span></span><span class="support class twigil raku"><span>!</span></span><span class="variable other identifier raku"><span>dependencies</span></span></span><span>,</span></span></div><div class="line"><span class="source raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></div></pre><p>See <a href="objects.html#Object_construction">Object Construction</a> for more options to influence object construction and attribute initialization.</p>
<h1 id="Consuming_our_class"><a class="u" href="classtut.html#___top" title="go to top of document">Consuming our class</a></h1>
<p>After creating a class, you can create instances of the class. Declaring a custom constructor provides a simple way of declaring tasks along with their dependencies. To create a single task with no dependencies, write:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>eat</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="routine name raku"><span>Task</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>new</span></span><span>(</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>eating&nbsp;dinner.&nbsp;NOM!</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>);</span></span></div></pre><p>An earlier section explained that declaring the class <code>Task</code> installed a type object in the namespace. This type object is a kind of &quot;empty instance&quot; of the class, specifically an instance without any state. You can call methods on that instance, as long as they do not try to access any state; <code>new</code> is an example, as it creates a new object rather than modifying or accessing an existing object.</p>
<p>Unfortunately, dinner never magically happens. It has dependent tasks:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>eat</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="routine name raku"><span>Task</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>new</span></span><span>(</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>eating&nbsp;dinner.&nbsp;NOM!</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>,</span></span></div><div class="line"><span class="source raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="routine name raku"><span>Task</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>new</span></span><span>(</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>making&nbsp;dinner</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>,</span></span></div><div class="line"><span class="source raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="routine name raku"><span>Task</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>new</span></span><span>(</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>buying&nbsp;food</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>,</span></span></div><div class="line"><span class="source raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="routine name raku"><span>Task</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>new</span></span><span>(</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>making&nbsp;some&nbsp;money</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>),</span></span></div><div class="line"><span class="source raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="routine name raku"><span>Task</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>new</span></span><span>(</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>going&nbsp;to&nbsp;the&nbsp;store</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>)</span></span></div><div class="line"><span class="source raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;),</span></span></div><div class="line"><span class="source raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="routine name raku"><span>Task</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>new</span></span><span>(</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>cleaning&nbsp;kitchen</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>)</span></span></div><div class="line"><span class="source raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)</span></span></div><div class="line"><span class="source raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;);</span></span></div></pre><p>Notice how the custom constructor and the sensible use of whitespace makes task dependencies clear.</p>
<p>Finally, the <code>perform</code> method call recursively calls the <code>perform</code> method on the various other dependencies in order, giving the output:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="routine name raku"><span>making</span></span><span>&nbsp;</span><span class="routine name raku"><span>some</span></span><span>&nbsp;</span><span class="routine name raku"><span>money</span></span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>going</span></span><span>&nbsp;</span><span class="support function raku"><span>to</span></span><span>&nbsp;</span><span class="routine name raku"><span>the</span></span><span>&nbsp;</span><span class="routine name raku"><span>store</span></span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>buying</span></span><span>&nbsp;</span><span class="routine name raku"><span>food</span></span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>cleaning</span></span><span>&nbsp;</span><span class="routine name raku"><span>kitchen</span></span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>making</span></span><span>&nbsp;</span><span class="routine name raku"><span>dinner</span></span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>eating</span></span><span>&nbsp;</span><span class="routine name raku"><span>dinner</span></span><span class="keyword operator generic raku"><span>.</span></span><span>&nbsp;</span><span class="routine name raku"><span>NOM</span></span><span class="keyword operator generic raku"><span>!</span></span></span></div></pre><h1 id="Inheritance"><a class="u" href="classtut.html#___top" title="go to top of document">Inheritance</a></h1>
<p><a name="index-entry-classes__inheritance"></a></p>
<p>Object Oriented Programming provides the concept of inheritance as one of the mechanisms for code reuse. Raku supports the ability for one class to inherit from one or more classes. When a class inherits from another class it informs the method dispatcher to follow the inheritance chain to look for a method to dispatch. This happens both for standard methods defined via the <code>method</code> keyword and for methods generated through other means, such as attribute accessors.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>class</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>Employee</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator raku"><span>has</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>.</span></span><span class="variable other identifier raku"><span>salary</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>class</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>Programmer</span></span></span><span>&nbsp;</span><span class="storage modifier type constraints raku"><span>is</span></span><span>&nbsp;</span><span class="routine name raku"><span>Employee</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator raku"><span>has</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>@</span></span><span class="support class twigil raku"><span>.</span></span><span class="variable other identifier raku"><span>known_languages</span></span></span><span>&nbsp;</span><span class="storage modifier type constraints raku"><span>is</span></span><span>&nbsp;</span><span class="entity name type trait raku"><span>rw</span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator raku"><span>has</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>.</span></span><span class="variable other identifier raku"><span>favorite_editor</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>code_to_solve</span></span><span>(&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>problem</span></span></span><span>&nbsp;)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control flowcontrol raku"><span>return</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Solving&nbsp;</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>problem</span></span><span>&nbsp;using&nbsp;</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil interpolated raku"><span>.</span></span><span>favorite_editor</span></span><span>&nbsp;in&nbsp;</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator generic raku"><span>~</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil raku"><span>.</span></span><span class="variable other identifier raku"><span>known_languages</span></span></span><span>[</span><span class="constant numeric raku"><span>0</span></span><span>];</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div></pre><p>Now, any object of type Programmer can make use of the methods and accessors defined in the Employee class as though they were from the Programmer class.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>programmer</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="routine name raku"><span>Programmer</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>new</span></span><span>(</span></span></div><div class="line"><span class="source raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string pair key raku"><span>salary&nbsp;</span></span><span class="keyword operator multi-symbol raku"><span>=&gt;</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>100_000</span></span><span>,</span></span></div><div class="line"><span class="source raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string pair key raku"><span>known_languages&nbsp;</span></span><span class="keyword operator multi-symbol raku"><span>=&gt;</span></span><span>&nbsp;</span><span class="span keyword operator array words raku"><span>&lt;</span></span><span class="string array words raku"><span>Raku&nbsp;Perl&nbsp;Erlang&nbsp;C++</span></span><span class="span keyword operator array words raku"><span>&gt;</span></span><span>,</span></span></div><div class="line"><span class="source raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string pair key raku"><span>favorite_editor&nbsp;</span></span><span class="keyword operator multi-symbol raku"><span>=&gt;</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>vim</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span></span></div><div class="line"><span class="source raku"><span>);</span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>programmer</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>code_to_solve</span></span><span>(</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>halting&nbsp;problem</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>),</span></span></div><div class="line"><span class="source raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>&nbsp;will&nbsp;get&nbsp;\$&nbsp;</span><span class="meta interpolation raku"><span class="punctuation section embedded begin raku"><span>{</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>programmer</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>salary</span></span><span>()</span><span class="punctuation section embedded end raku"><span>}</span></span></span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«Solving&nbsp;halting&nbsp;problem&nbsp;using&nbsp;vim&nbsp;in&nbsp;Raku&nbsp;will&nbsp;get&nbsp;$100000␤»</span><span>&nbsp;</span></span></span></div></pre><h2 id="Overriding_inherited_methods"><a class="u" href="classtut.html#___top" title="go to top of document">Overriding inherited methods</a></h2>
<p>Of course, classes can override methods and attributes defined by parent classes by defining their own. The example below demonstrates the <code>Baker</code> class overriding the <code>Cook</code>&#39;s <code>cook</code> method.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>class</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>Cook</span></span></span><span>&nbsp;</span><span class="storage modifier type constraints raku"><span>is</span></span><span>&nbsp;</span><span class="routine name raku"><span>Employee</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator raku"><span>has</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>@</span></span><span class="support class twigil raku"><span>.</span></span><span class="variable other identifier raku"><span>utensils</span></span></span><span>&nbsp;&nbsp;</span><span class="storage modifier type constraints raku"><span>is</span></span><span>&nbsp;</span><span class="entity name type trait raku"><span>rw</span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator raku"><span>has</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>@</span></span><span class="support class twigil raku"><span>.</span></span><span class="variable other identifier raku"><span>cookbooks</span></span></span><span>&nbsp;</span><span class="storage modifier type constraints raku"><span>is</span></span><span>&nbsp;</span><span class="entity name type trait raku"><span>rw</span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>cook</span></span><span>(&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>food</span></span></span><span>&nbsp;)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Cooking&nbsp;</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>food</span></span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>clean_utensils</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Cleaning&nbsp;</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>_</span></span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword control repeat raku"><span>for</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>@</span></span><span class="support class twigil raku"><span>.</span></span><span class="variable other identifier raku"><span>utensils</span></span></span><span>;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>class</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>Baker</span></span></span><span>&nbsp;</span><span class="storage modifier type constraints raku"><span>is</span></span><span>&nbsp;</span><span class="routine name raku"><span>Cook</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>cook</span></span><span>(&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>confection</span></span></span><span>&nbsp;)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Baking&nbsp;a&nbsp;tasty&nbsp;</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>confection</span></span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>cook</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="routine name raku"><span>Cook</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>new</span></span><span>(</span></span></div><div class="line"><span class="source raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string pair key raku"><span>utensils&nbsp;&nbsp;</span></span><span class="keyword operator multi-symbol raku"><span>=&gt;</span></span><span>&nbsp;</span><span class="span keyword operator array words raku"><span>&lt;</span></span><span class="string array words raku"><span>spoon&nbsp;ladle&nbsp;knife&nbsp;pan</span></span><span class="span keyword operator array words raku"><span>&gt;</span></span><span>,</span></span></div><div class="line"><span class="source raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string pair key raku"><span>cookbooks&nbsp;</span></span><span class="keyword operator multi-symbol raku"><span>=&gt;</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>The&nbsp;Joy&nbsp;of&nbsp;Cooking</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>,</span></span></div><div class="line"><span class="source raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string pair key raku"><span>salary&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="keyword operator multi-symbol raku"><span>=&gt;</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>40000</span></span></span></div><div class="line"><span class="source raku"><span>);</span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>cook</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>cook</span></span><span>(&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>pizza</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>&nbsp;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«Cooking&nbsp;pizza␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>cook</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>utensils</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>raku</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«[&quot;spoon&quot;,&nbsp;&quot;ladle&quot;,&nbsp;&quot;knife&quot;,&nbsp;&quot;pan&quot;]␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>cook</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>cookbooks</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>raku</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«[&quot;The&nbsp;Joy&nbsp;of&nbsp;Cooking&quot;]␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>cook</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>salary</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«40000␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>baker</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="routine name raku"><span>Baker</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>new</span></span><span>(</span></span></div><div class="line"><span class="source raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string pair key raku"><span>utensils&nbsp;&nbsp;</span></span><span class="keyword operator multi-symbol raku"><span>=&gt;</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>self&nbsp;cleaning&nbsp;oven</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>,</span></span></div><div class="line"><span class="source raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string pair key raku"><span>cookbooks&nbsp;</span></span><span class="keyword operator multi-symbol raku"><span>=&gt;</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>The&nbsp;Baker&#39;s&nbsp;Apprentice</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>,</span></span></div><div class="line"><span class="source raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string pair key raku"><span>salary&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="keyword operator multi-symbol raku"><span>=&gt;</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>50000</span></span></span></div><div class="line"><span class="source raku"><span>);</span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>baker</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>cook</span></span><span>(</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>brioche</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«Baking&nbsp;a&nbsp;tasty&nbsp;brioche␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>baker</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>utensils</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>raku</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«[&quot;self&nbsp;cleaning&nbsp;oven&quot;]␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>baker</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>cookbooks</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>raku</span></span><span>;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«[&quot;The&nbsp;Baker&#39;s&nbsp;Apprentice&quot;]␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>baker</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>salary</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«50000␤»</span><span>&nbsp;</span></span></span></div></pre><p>Because the dispatcher will see the <code>cook</code> method on <code>Baker</code> before it moves up to the parent class the <code>Baker</code>&#39;s <code>cook</code> method will be called.</p>
<p>To access methods in the inheritance chain, use <a href="functions.html#Re-dispatching">re-dispatch</a> or the <a href="../type/Metamodel::ClassHOW.html#method_can">MOP</a>.</p>
<h2 id="Multiple_inheritance"><a class="u" href="classtut.html#___top" title="go to top of document">Multiple inheritance</a></h2>
<p>As mentioned before, a class can inherit from multiple classes. When a class inherits from multiple classes the dispatcher knows to look at both classes when looking up a method to search for. Raku uses the <a href="https://en.wikipedia.org/wiki/C3_linearization">C3 algorithm</a> to linearize multiple inheritance hierarchies, which is better than depth-first search for handling multiple inheritance.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>class</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>GeekCook</span></span></span><span>&nbsp;</span><span class="storage modifier type constraints raku"><span>is</span></span><span>&nbsp;</span><span class="routine name raku"><span>Programmer</span></span><span>&nbsp;</span><span class="storage modifier type constraints raku"><span>is</span></span><span>&nbsp;</span><span class="routine name raku"><span>Cook</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>new</span></span><span>(&nbsp;</span><span class="keyword operator generic raku"><span>*</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>%</span></span><span class="variable other identifier raku"><span>params</span></span></span><span>&nbsp;)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>push</span></span><span>(&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>%</span></span><span class="variable other identifier raku"><span>params</span></span></span><span class="span keyword operator array words raku"><span>&lt;</span></span><span class="string array words raku"><span>cookbooks</span></span><span class="span keyword operator array words raku"><span>&gt;</span></span><span>,&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Cooking&nbsp;for&nbsp;Geeks</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>&nbsp;);</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control flowcontrol raku"><span>return</span></span><span>&nbsp;</span><span class="variable language raku"><span>self</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>bless</span></span><span>(</span><span class="keyword operator generic raku"><span>|</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>%</span></span><span class="variable other identifier raku"><span>params</span></span></span><span>);</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>geek</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="routine name raku"><span>GeekCook</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>new</span></span><span>(</span></span></div><div class="line"><span class="source raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string pair key raku"><span>books&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="keyword operator multi-symbol raku"><span>=&gt;</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>Learning&nbsp;Raku</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>,</span></span></div><div class="line"><span class="source raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string pair key raku"><span>utensils&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="keyword operator multi-symbol raku"><span>=&gt;</span></span><span>&nbsp;(</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>stainless&nbsp;steel&nbsp;pot</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>knife</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>calibrated&nbsp;oven</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>),</span></span></div><div class="line"><span class="source raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string pair key raku"><span>favorite_editor&nbsp;</span></span><span class="keyword operator multi-symbol raku"><span>=&gt;</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>MacVim</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>,</span></span></div><div class="line"><span class="source raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string pair key raku"><span>known_languages&nbsp;</span></span><span class="keyword operator multi-symbol raku"><span>=&gt;</span></span><span>&nbsp;</span><span class="span keyword operator array words raku"><span>&lt;</span></span><span class="string array words raku"><span>Raku</span></span><span class="span keyword operator array words raku"><span>&gt;</span></span></span></div><div class="line"><span class="source raku"><span>);</span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>geek</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>cook</span></span><span>(</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>pizza</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>);</span></span></div><div class="line"><span class="source raku"><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>geek</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>code_to_solve</span></span><span>(</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>P&nbsp;=?&nbsp;NP</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>);</span></span></div></pre><p>Now all the methods made available to the Programmer and the Cook classes are available from the GeekCook class.</p>
<p>While multiple inheritance is a useful concept to know and occasionally use, it is important to understand that there are more useful OOP concepts. When reaching for multiple inheritance it is good practice to consider whether the design wouldn&#39;t be better realized by using roles, which are generally safer because they force the class author to explicitly resolve conflicting method names. For more information on roles, see <a href="objects.html#Roles">Roles</a>.</p>
<h2 id="The_also_declarator"><a class="u" href="classtut.html#___top" title="go to top of document">The <a name="index-entry-also_declarator-also"><span class="index-entry"><code>also</code></span></a> declarator</a></h2>
<p>Classes to be inherited from can be listed in the class declaration body by prefixing the <code>is</code> trait with <code>also</code>. This also works for the role composition trait <code>does</code>.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>class</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>GeekCook</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="routine name raku"><span>also</span></span><span>&nbsp;</span><span class="storage modifier type constraints raku"><span>is</span></span><span>&nbsp;</span><span class="routine name raku"><span>Programmer</span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="routine name raku"><span>also</span></span><span>&nbsp;</span><span class="storage modifier type constraints raku"><span>is</span></span><span>&nbsp;</span><span class="routine name raku"><span>Cook</span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation whitespace comment leading raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;...</span><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>role</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>A</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span><span>}</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>role</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>B</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span><span>}</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>class</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>C</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="routine name raku"><span>also</span></span><span>&nbsp;</span><span class="storage modifier type constraints raku"><span>does</span></span><span>&nbsp;</span><span class="routine name raku"><span>A</span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="routine name raku"><span>also</span></span><span>&nbsp;</span><span class="storage modifier type constraints raku"><span>does</span></span><span>&nbsp;</span><span class="routine name raku"><span>B</span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation whitespace comment leading raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;...</span><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div></pre><h1 id="Introspection"><a class="u" href="classtut.html#___top" title="go to top of document">Introspection</a></h1>
<p>Introspection is the process of gathering information about some objects in your program, not by reading the source code, but by querying the object (or a controlling object) for some properties, such as its type.</p>
<p>Given an object <code>$o</code> and the class definitions from the previous sections, we can ask it a few questions:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="routine name raku"><span>Programmer</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>o</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>.=</span></span><span>&nbsp;</span><span class="support function raku"><span>new</span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="keyword control conditional raku"><span>if</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>o</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>~~</span></span><span>&nbsp;</span><span class="routine name raku"><span>Employee</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>It&#39;s&nbsp;an&nbsp;employee</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>o</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>~~</span></span><span>&nbsp;</span><span class="routine name raku"><span>GeekCook</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>??</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>It&#39;s&nbsp;a&nbsp;geeky&nbsp;cook</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>!!</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Not&nbsp;a&nbsp;geeky&nbsp;cook</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>o</span></span></span><span class="keyword operator generic raku"><span>.</span><span>^</span></span><span class="support function raku"><span>name</span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>o</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>raku</span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>o</span></span></span><span class="keyword operator generic raku"><span>.</span><span>^</span></span><span class="routine name raku"><span>methods</span></span><span>(</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>local</span></span><span>)»</span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>name</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>join</span></span><span>(</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>,&nbsp;</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>);</span></span></div></pre><p>The output might look like this:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="routine name raku"><span>It</span></span><span>&#39;</span><span class="routine name raku"><span>s</span></span><span>&nbsp;</span><span class="routine name raku"><span>an</span></span><span>&nbsp;</span><span class="routine name raku"><span>employee</span></span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>Not</span></span><span>&nbsp;</span><span class="routine name raku"><span>a</span></span><span>&nbsp;</span><span class="routine name raku"><span>geeky</span></span><span>&nbsp;</span><span class="routine name raku"><span>cook</span></span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>Programmer</span></span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>Programmer</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>new</span></span><span>(</span><span class="string pair key raku"><span>known_languages&nbsp;</span></span><span class="keyword operator multi-symbol raku"><span>=&gt;</span></span><span>&nbsp;[</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Perl</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>,&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Python</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>,&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Pascal</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>],</span></span></div><div class="line"><span class="source raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string pair key raku"><span>favorite_editor&nbsp;</span></span><span class="keyword operator multi-symbol raku"><span>=&gt;</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>gvim</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>,&nbsp;</span><span class="string pair key raku"><span>salary&nbsp;</span></span><span class="keyword operator multi-symbol raku"><span>=&gt;</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>too&nbsp;small</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>)</span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>code_to_solve</span></span><span>,&nbsp;</span><span class="routine name raku"><span>known_languages</span></span><span>,&nbsp;</span><span class="routine name raku"><span>favorite_editor</span></span></span></div></pre><p>The first two tests each smartmatch against a class name. If the object is of that class, or of an inheriting class, it returns <code>True</code>. So the object in question is of class <code>Employee</code> or one that inherits from it, but not <code>GeekCook</code>.</p>
<p>The call <code>$o.^name</code> tells us the type of <code>$o</code>; in this case <code>Programmer</code>.</p>
<p><code>$o.raku</code> returns a string that can be executed as Raku code, and reproduces the original object <code>$o</code>. While this does not work perfectly in all cases, it is very useful for debugging simple objects. <a href="classtut.html#fn-1" id="fn-ref-1">[1]</a></p>
<p>The syntax of calling a method with <code>.^</code> instead of a single dot means that it is actually a method call on its <em>metaclass</em>, which is a class managing the properties of the <code>Programmer</code> class – or any other class you are interested in. This metaclass enables other ways of introspection too:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>o</span></span></span><span class="keyword operator generic raku"><span>.</span><span>^</span></span><span class="constant language pragma raku"><span>attributes</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>join</span></span><span>(</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>,&nbsp;</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>);</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>o</span></span></span><span class="keyword operator generic raku"><span>.</span><span>^</span></span><span class="routine name raku"><span>parents</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>map</span></span><span>(</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>_</span></span></span><span class="keyword operator generic raku"><span>.</span><span>^</span></span><span class="support function raku"><span>name</span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>)</span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>join</span></span><span>(</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>,&nbsp;</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>);</span></span></div></pre><p>Finally <code>$o.^name</code> calls the <code>name</code> method on the metaobject, which unsurprisingly returns the class name.</p>
<p>Given an object <code>$mp3</code> and the <code>MP3TagData</code> class definition from the section <a href="classtut.html#Private_methods">Private methods</a>, we can inquire about its public methods with <code>.^methods</code>:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>mp3</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="routine name raku"><span>MP3TagData</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>new</span></span><span>(</span><span class="string pair key raku"><span>filename&nbsp;</span></span><span class="keyword operator multi-symbol raku"><span>=&gt;</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>football-head.mp3</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>);</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>mp3</span></span></span><span class="keyword operator generic raku"><span>.</span><span>^</span></span><span class="routine name raku"><span>methods</span></span><span>(</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>local</span></span><span>);</span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;(TWEAK&nbsp;filename&nbsp;title&nbsp;artist&nbsp;album&nbsp;year&nbsp;comment&nbsp;genre&nbsp;track&nbsp;version</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;type&nbsp;Submethod+{is-hidden-from-backtrace}.new)</span><span>&nbsp;</span></span></span></div></pre><p><a name="index-entry-^methods"></a> <code>$mp3.^methods(:local)</code> produces a list of <a href="../type/Method.html">Method</a>s that can be called on <code>$mp3</code>. The <code>:local</code> named argument limits the returned methods to those defined in the <code>MP3TagData</code> class and excludes the inherited methods; <code>MP3TagData</code> inherits from no class, so providing <code>:local</code> makes no difference.</p>
<p><a name="index-entry-classes_find__method"></a> To check if a type object (or an instance object) implements a certain public method, use the <a href="../routine/find_method.html"><code>.^find-method</code></a> metamethod, which returns the method object if it exists. Otherwise, it returns <a href="../type/Mu.html"><code>Mu</code></a>.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>mp3</span></span></span><span class="keyword operator generic raku"><span>.</span><span>^</span></span><span class="routine name raku"><span>find_method</span></span><span>(</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>name</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>);&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«(Mu)␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>mp3</span></span></span><span class="keyword operator generic raku"><span>.</span><span>^</span></span><span class="routine name raku"><span>find_method</span></span><span>(</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>artist</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>);&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«artist␤»</span><span>&nbsp;</span></span></span></div></pre><p><a name="index-entry-classes_private__methods"></a> <a name="index-entry-classes_find__private__methods"></a> Type objects can also be introspected for its private methods. However, public and private methods don&#39;t use the same APIs, and thus different metamethods must be used: <a href="../routine/private_methods.html"><code>.^private_methods</code></a> and <a href="../routine/find_private_method.html"><code>.^find_private_method</code></a>.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>mp3</span></span></span><span class="keyword operator generic raku"><span>.</span><span>^</span></span><span class="routine name raku"><span>private_methods</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«(parse-data&nbsp;can-read-format&nbsp;trim-nulls)␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>mp3</span></span></span><span class="keyword operator generic raku"><span>.</span><span>^</span></span><span class="routine name raku"><span>find_private_method</span></span><span>(</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>parse-data</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>);&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«parse-data␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>mp3</span></span></span><span class="keyword operator generic raku"><span>.</span><span>^</span></span><span class="routine name raku"><span>find_private_method</span></span><span>(</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>remove-nulls</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>);&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«(Mu)»</span><span>&nbsp;</span></span></span></div></pre><p>Introspection is very useful for debugging and for learning the language and new libraries. When a function or method returns an object you don&#39;t know about, by finding its type with <code>.^name</code>, seeing a construction recipe for it with <code>.raku</code>, and so on, you&#39;ll get a good idea of what its return value is. With <code>.^methods</code>, you can learn what you can do with the class.</p>
<p>But there are other applications too. For instance, a routine that serializes objects to a bunch of bytes needs to know the attributes of that object, which it can find out via introspection.</p>
<h2 id="Overriding_default_gist_method"><a class="u" href="classtut.html#___top" title="go to top of document"><a name="index-entry-Overriding_default_gist_method"><span class="index-entry">Overriding default gist method</span></a></a></h2>
<p>Some classes might need its own version of <code>gist</code>, which overrides the terse way it is printed when called to provide a default representation of the class. For instance, <a href="exceptions.html#Uncaught_exceptions">exceptions</a> might want to write just the <code>payload</code> and not the full object so that it is clearer what to see what&#39;s happened. However, this isn&#39;t limited to exceptions; you can do that with every class:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>class</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>Cook</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator raku"><span>has</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>@</span></span><span class="support class twigil raku"><span>.</span></span><span class="variable other identifier raku"><span>utensils</span></span></span><span>&nbsp;&nbsp;</span><span class="storage modifier type constraints raku"><span>is</span></span><span>&nbsp;</span><span class="entity name type trait raku"><span>rw</span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator raku"><span>has</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>@</span></span><span class="support class twigil raku"><span>.</span></span><span class="variable other identifier raku"><span>cookbooks</span></span></span><span>&nbsp;</span><span class="storage modifier type constraints raku"><span>is</span></span><span>&nbsp;</span><span class="entity name type trait raku"><span>rw</span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>cook</span></span><span>(&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>food</span></span></span><span>&nbsp;)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control flowcontrol raku"><span>return</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Cooking&nbsp;</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>food</span></span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>clean_utensils</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control flowcontrol raku"><span>return</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Cleaning&nbsp;</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>_</span></span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword control repeat raku"><span>for</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>@</span></span><span class="support class twigil raku"><span>.</span></span><span class="variable other identifier raku"><span>utensils</span></span></span><span>;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type declarator multi raku"><span>multi</span></span><span>&nbsp;</span><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>gist</span></span><span>(</span><span class="routine name raku"><span>Cook</span></span><span class="meta adverb definedness raku"><span class="keyword operator adverb raku"><span>:</span></span><span class="keyword other special-method definedness raku"><span>U</span></span></span><span class="keyword operator generic raku"><span>:</span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>⚗</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>~</span></span><span>&nbsp;</span><span class="variable language raku"><span>self</span></span><span class="keyword operator generic raku"><span>.</span><span>^</span></span><span class="support function raku"><span>name</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>~</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>⚗</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage type declarator multi raku"><span>multi</span></span><span>&nbsp;</span><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>gist</span></span><span>(</span><span class="routine name raku"><span>Cook</span></span><span class="meta adverb definedness raku"><span class="keyword operator adverb raku"><span>:</span></span><span class="keyword other special-method definedness raku"><span>D</span></span></span><span class="keyword operator generic raku"><span>:</span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>⚗&nbsp;Cooks&nbsp;with&nbsp;</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>~</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>@</span></span><span class="support class twigil raku"><span>.</span></span><span class="variable other identifier raku"><span>utensils</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>join</span></span><span>(&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>&nbsp;‣&nbsp;</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>)&nbsp;</span><span class="keyword operator generic raku"><span>~</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>&nbsp;using&nbsp;</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator generic raku"><span>~</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>@</span></span><span class="support class twigil raku"><span>.</span></span><span class="variable other identifier raku"><span>cookbooks</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>map</span></span><span>(&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>«</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>~</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>*</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>~</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>»</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>)</span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>join</span></span><span>(&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>&nbsp;and&nbsp;</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>)&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>cook</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="routine name raku"><span>Cook</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>new</span></span><span>(</span></span></div><div class="line"><span class="source raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string pair key raku"><span>utensils&nbsp;</span></span><span class="keyword operator multi-symbol raku"><span>=&gt;</span></span><span>&nbsp;</span><span class="span keyword operator array words raku"><span>&lt;</span></span><span class="string array words raku"><span>spoon&nbsp;ladle&nbsp;knife&nbsp;pan</span></span><span class="span keyword operator array words raku"><span>&gt;</span></span><span>,</span></span></div><div class="line"><span class="source raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string pair key raku"><span>cookbooks&nbsp;</span></span><span class="keyword operator multi-symbol raku"><span>=&gt;</span></span><span>&nbsp;[</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>Cooking&nbsp;for&nbsp;geeks</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>,</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>The&nbsp;French&nbsp;Chef&nbsp;Cookbook</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>]);</span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="routine name raku"><span>Cook</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>gist</span></span><span>;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«⚗Cook⚗»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>cook</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>gist</span></span><span>;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«⚗&nbsp;Cooks&nbsp;with&nbsp;spoon&nbsp;‣&nbsp;ladle&nbsp;‣&nbsp;knife&nbsp;‣&nbsp;pan&nbsp;using&nbsp;«Cooking&nbsp;for&nbsp;geeks»&nbsp;and&nbsp;«The&nbsp;French&nbsp;Chef&nbsp;Cookbook»␤»</span><span>&nbsp;</span></span></span></div></pre><p>Usually you will want to define two methods, one for the class and another for class instances; in this case, the class method uses the alembic symbol, and the instance method, defined below it, aggregates the data we have on the cook to show it in a narrative way.</p>

        </div>
    </div>

    <aside><ol start="1">
<li><a href="classtut.html#fn-ref-1" id="fn-1">[↑]</a> For example, closures cannot easily be reproduced this way; if you don&#39;t know what a closure is don&#39;t worry. Also current implementations have problems with dumping cyclic data structures this way, but they are expected to be handled correctly by <code>.raku</code> at some point. </li>
</ol></aside>

    <footer class="pretty-box yellow">
        <p style="display:;">
            Generated from <a href="https://github.com/Raku/doc/edit/master/doc//Language/classtut.pod6">https://github.com/Raku/doc/edit/master/doc//Language/classtut.pod6</a>.
        </p>
        <p>
            This is a work in progress to document Raku (formerly known as Perl 6), and
            known to be incomplete.
        </p>
        <p>
            <a href="https://github.com/Raku/doc/blob/master/CONTRIBUTING.md#reporting-bugs">
                Please report any issues
            </a>
            Your contribution is appreciated.
        </p>
        <p>
            This documentation is provided under the terms of the
            <a href="https://raw.githubusercontent.com/Raku/doc/master/LICENSE">
                Artistic License 2.0
            </a>. The Camelia image is
            <a href="https://raw.githubusercontent.com/Raku/mu/master/misc/camelia.txt">
                copyright © 2009 by Larry Wall.
            </a>
            <!-- CREDITS -->
            <!--External Link Image by Zapyon, CCA-SA 4.0. Derived from Wikimedia Foundation https://commons.wikimedia.org/wiki/File:External-link-04-bold-12x12.svg -->
        </p>
    </footer>

    <script type="text/javascript" src="../js/app.js%3Fv=1"></script>
    <script type="text/javascript" src="../js/search.js%3Fv=3"></script>
</body>
</html>
