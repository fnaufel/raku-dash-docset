<!doctype html>
<html lang="en">
<head>
    <title>Modules</title>
    <meta charset="UTF-8"/>
    <meta name=viewport content="width=device-width, initial-scale=1">
    <link rel="icon" href="../favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" href="../css/app.css" media="screen" title="default" />
    <noscript> <style> #search { visibility: hidden; } </style> </noscript>
</head>

<body class="pod">

    <div id="___top"></div>

    <div id="header" class="pretty-box green">

        <a href="../index.html">
            <img src="../images/Camelia.svg" alt="»ö«" id="logo" width="62" height="48"/> &nbsp;Raku Documentation
        </a>

        <div id="search" class="ui-widget">
            <div class="green">
                <input placeholder="Loading..." id="query" accesskey="f" title="Enter term to search for (hit Esc to focus)"/>
            </div>
            <p id="not-found-message">
                Not in Index (<a href="modules.html" id="try-web-search">try site search</a>)
            </p>
        </div>

        <div class="menu">

            <div class="menu-items dark-green">
                <a class='menu-item darker-green' href='https://raku.org'><strong>Raku homepage</strong></a>
                    <a class="menu-item selected darker-green" href="../language.html"> Language </a>
                    <a class="menu-item " href="../type.html"> Types </a>
                    <a class="menu-item " href="../routine.html"> Routines </a>
                    <a class="menu-item " href="../programs.html"> Programs </a>
                    <a class="menu-item " href="https://web.libera.chat/?channel=#raku"> Chat with us </a>
            </div>

            
            

        </div>
    </div>

    <div id="content" class="pretty-box yellow content_fragment">

        <div align="right" style="display:;">
            <button title="Edit this page"  class="pencil" onclick="location='https://github.com/Raku/doc/edit/master/doc//Language/modules.pod6'">
                <svg width="14px" height="16px" viewBox="0 0 14 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                    <defs></defs>
                    <g id="Octicons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                        <g id="pencil" fill="#000000">
                            <path d="M0,12 L0,15 L3,15 L11,7 L8,4 L0,12 L0,12 Z M3,14 L1,14 L1,12 L2,12 L2,13 L3,13 L3,14 L3,14 Z M13.3,4.7 L12,6 L9,3 L10.3,1.7 C10.69,1.31 11.32,1.31 11.71,1.7 L13.3,3.29 C13.69,3.68 13.69,4.31 13.3,4.7 L13.3,4.7 Z" id="Shape"></path>
                        </g>
                    </g>
                </svg>
            </button>
        </div>

        <h1 class="title">Modules</h1>
        <p class="subtitle">How to create, use, and distribute Raku modules</p>

        <nav class="indexgroup">
<table id="TOC">
<caption><h2 id="TOC_Title">Table of Contents</h2></caption>
<tr class="toc-level-1"><td class="toc-number">1</td><td class="toc-text"><a href="modules.html#Creating_and_using_modules">Creating and using modules</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">1.1</td><td class="toc-text"><a href="modules.html#Looking_for_and_installing_modules.">Looking for and installing modules.</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">1.2</td><td class="toc-text"><a href="modules.html#Basic_structure">Basic structure</a></td></tr>
<tr class="toc-level-1"><td class="toc-number">2</td><td class="toc-text"><a href="modules.html#Loading_and_basic_importing">Loading and basic importing</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">2.1</td><td class="toc-text"><a href="modules.html#need"><code class="pod-code-inline">need</code></a></td></tr>
<tr class="toc-level-2"><td class="toc-number">2.2</td><td class="toc-text"><a href="modules.html#use"><code class="pod-code-inline">use</code></a></td></tr>
<tr class="toc-level-2"><td class="toc-number">2.3</td><td class="toc-text"><a href="modules.html#require"><code class="pod-code-inline">require</code></a></td></tr>
<tr class="toc-level-2"><td class="toc-number">2.4</td><td class="toc-text"><a href="modules.html#Lexical_module_loading">Lexical module loading</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">2.5</td><td class="toc-text"><a href="modules.html#Exporting_and_selective_importing">Exporting and selective importing</a></td></tr>
<tr class="toc-level-3"><td class="toc-number">2.5.1</td><td class="toc-text"><a href="modules.html#is_export">is export</a></td></tr>
<tr class="toc-level-3"><td class="toc-number">2.5.2</td><td class="toc-text"><a href="modules.html#UNIT::EXPORT::*">UNIT::EXPORT::*</a></td></tr>
<tr class="toc-level-3"><td class="toc-number">2.5.3</td><td class="toc-text"><a href="modules.html#EXPORT">EXPORT</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">2.6</td><td class="toc-text"><a href="modules.html#Introspection">Introspection</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">2.7</td><td class="toc-text"><a href="modules.html#Finding_installed_modules">Finding installed modules</a></td></tr>
<tr class="toc-level-1"><td class="toc-number">3</td><td class="toc-text"><a href="modules.html#Testing_modules_and_a_distribution">Testing modules and a distribution</a></td></tr>
<tr class="toc-level-1"><td class="toc-number">4</td><td class="toc-text"><a href="modules.html#Distributing_modules">Distributing modules</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">4.1</td><td class="toc-text"><a href="modules.html#Preparing_the_module">Preparing the module</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">4.2</td><td class="toc-text"><a href="modules.html#Upload_your_module_to_CPAN">Upload your module to CPAN</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">4.3</td><td class="toc-text"><a href="modules.html#Upload_your_module_to_zef_ecosystem">Upload your module to zef ecosystem</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">4.4</td><td class="toc-text"><a href="modules.html#Upload_your_module_to_p6c">Upload your module to p6c</a></td></tr>
<tr class="toc-level-1"><td class="toc-number">5</td><td class="toc-text"><a href="modules.html#Modules_and_tools_related_to_module_authoring">Modules and tools related to module authoring</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">5.1</td><td class="toc-text"><a href="modules.html#Contact_information">Contact information</a></td></tr>

</table>
</nav>

        <div class="pod-body ">
            <h1 id="Creating_and_using_modules"><a class="u" href="modules.html#___top" title="go to top of document">Creating and using modules</a></h1>
<p>A module is usually a source file or set of source files that expose Raku constructs <a href="modules.html#fn-1" id="fn-ref-1">[1]</a>.</p>
<p>Modules are typically packages (<a href="objects.html#Classes">classes</a>, <a href="objects.html#Roles">roles</a>, <a href="../type/Grammar.html">grammars</a>), <a href="functions.html">subroutines</a>, and sometimes <a href="variables.html">variables</a>. In Raku <em>module</em> can also refer to a type of package declared with the <code>module</code> keyword (see <a href="module-packages.html">Module Packages</a> and the examples below) but here we mostly mean &quot;module&quot; as a set of source files in a namespace.</p>
<h2 id="Looking_for_and_installing_modules."><a class="u" href="modules.html#___top" title="go to top of document">Looking for and installing modules.</a></h2>
<p><a href="https://github.com/ugexe/zef"><code>zef</code></a> is the application used for installing modules in Raku. Modules are listed in <a href="https://modules.raku.org">the Raku ecosystem</a> and can be searched there or from the command line using <code>zef search</code>:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="routine name raku"><span>zef</span></span><span>&nbsp;</span><span class="routine name raku"><span>search</span></span><span>&nbsp;</span><span class="routine name raku"><span>WWW</span></span></span></div></pre><p>will return a list of modules that includes WWW in their name, for instance. Then,</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="routine name raku"><span>zef</span></span><span>&nbsp;</span><span class="routine name raku"><span>install</span></span><span>&nbsp;</span><span class="routine name raku"><span>WWW</span></span></span></div></pre><p>will install the module with that particular name, if it is not already installed <a href="modules.html#fn-2" id="fn-ref-2">[2]</a>.</p>
<h2 id="Basic_structure"><a class="u" href="modules.html#___top" title="go to top of document">Basic structure</a></h2>
<p>Module distributions (in the <em>set of related source files</em> sense) in Raku have the same structure as any distribution in the Perl family of languages: there is a main project directory containing a <code>README</code> and a <code>LICENSE</code> file, a <code>lib</code> directory for the source files, which may be individually referred to as modules and/or may themselves define modules with the <code>module</code> keyword <a href="modules.html#fn-3" id="fn-ref-3">[3]</a> , a <code>t</code> directory for tests, and possibly a <code>bin</code> directory for executable programs and scripts.</p>
<p>Source files generally use the <code>.rakumod</code> extension, and scripts or executables use the <code>.raku</code>. Test files use the <code>.rakutest</code> (or <code>.t</code>) extension. Files which contain documentation use the <code>.rakudoc</code> extension <a href="modules.html#fn-4" id="fn-ref-4">[4]</a>.</p>
<p><a name="index-entry-compunit"></a></p>
<h1 id="Loading_and_basic_importing"><a class="u" href="modules.html#___top" title="go to top of document">Loading and basic importing</a></h1>
<p>Loading a module makes the packages in the same namespace declared within available in the file scope of the loader. Importing from a module makes the symbols exported available in the lexical scope of the importing statement.</p>
<h2 id="need"><a class="u" href="modules.html#___top" title="go to top of document"><a name="index-entry-need"><span class="index-entry"><code>need</code></span></a></a></h2>
<p><code>need</code> loads a <code>compunit</code> at compile time.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="keyword other include raku"><span>need</span></span><span>&nbsp;</span><span class="routine name raku"><span>MyModule</span></span><span>;</span></span></div></pre><p>Any packages in the namespace defined within will also be available.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;MyModule.rakumod</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>unit</span></span><span>&nbsp;</span><span class="meta class raku"><span class="storage type class raku"><span>module</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>MyModule</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>class</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>Class</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span><span>}</span></span></span></span></div></pre><p><code>MyModule::Class</code> will be defined when <code>MyModule</code> is loaded, and you can use it directly employing its fully qualified name (FQN). Classes and other types defined that way are not automatically exported; you will need to explicitly export it if you want to use it by its short name:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;MyModule.rakumod</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>unit</span></span><span>&nbsp;</span><span class="meta class raku"><span class="storage type class raku"><span>module</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>MyModule</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>class</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>Class</span></span></span><span>&nbsp;</span><span class="storage modifier type constraints raku"><span>is</span></span><span>&nbsp;</span><span class="entity name type trait raku"><span>export</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span><span>}</span></span></span></span></div></pre><p>And then</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="keyword other include raku"><span>use</span></span><span>&nbsp;</span><span class="routine name raku"><span>MyModule</span></span><span>;</span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>class</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="routine name raku"><span>Class</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>new</span></span><span>();</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>class</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>raku</span></span><span>;</span></span></div></pre><h2 id="use"><a class="u" href="modules.html#___top" title="go to top of document"><a name="index-entry-use"><span class="index-entry"><code>use</code></span></a></a></h2>
<p><code>use</code> loads and then imports from a compunit at compile time. It will look for files that end in <code>.rakumod</code>. See <a href="modules.html#Finding_installed_modules">here</a> for where the runtime will look for modules.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="keyword other include raku"><span>use</span></span><span>&nbsp;</span><span class="routine name raku"><span>MyModule</span></span><span>;</span></span></div></pre><p>This is equivalent to:</p>
<pre class="pod-block-code"><a href="modules.html#need">need</a> MyModule;
import MyModule;
</pre>
<p>See also <a href="modules.html#Exporting_and_selective_importing">selective importing</a> to restrict what you import.</p>
<h2 id="require"><a class="u" href="modules.html#___top" title="go to top of document"><a name="index-entry-require"><span class="index-entry"><code>require</code></span></a></a></h2>
<p><code>require</code> loads a compunit and imports definite symbols at runtime.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>loading&nbsp;MyModule</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="keyword other include raku"><span>require</span></span><span>&nbsp;</span><span class="routine name raku"><span>MyModule</span></span><span>;</span></span></div></pre><p>The compunit name can be in a runtime variable if you put it inside an indirect lookup.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>name</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>MyModule</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="keyword other include raku"><span>require</span></span><span>&nbsp;::(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>name</span></span></span><span>);</span></span></div></pre><p>The symbols provided by the loaded module will not be imported into the current scope. You may use <a href="packages.html#index-entry-::()">dynamic lookup</a> or <a href="typesystem.html#subset">dynamic subsets</a> to use them by providing the fully qualified name of a symbol, for instance:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="keyword other include raku"><span>require</span></span><span>&nbsp;::(</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Test</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>);</span></span></div><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>&amp;</span></span><span class="variable other identifier raku"><span>mmk</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;::(</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Test::EXPORT::DEFAULT::</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>&amp;</span></span><span>ok</span></span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>);</span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>mmk</span></span><span>(</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>oi‽</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>);&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«ok&nbsp;1&nbsp;-&nbsp;␤»</span></span></span></div></pre><p>The FQN of <code>ok</code> is <code>Test::EXPORT::DEFAULT::&amp;ok</code>. We are aliasing it to <code>mmk</code> so that we can use that symbol provided by <code>Test</code> in the current scope.</p>
<p>To import symbols you must define them at compile time. <strong>NOTE:</strong> <code>require</code> is lexically scoped:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>do-something</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;</span><span class="keyword other include raku"><span>require</span></span><span>&nbsp;</span><span class="routine name raku"><span>MyModule</span></span><span>&nbsp;</span><span class="span keyword operator array words raku"><span>&lt;</span></span><span class="string array words raku"><span>&amp;something</span></span><span class="span keyword operator array words raku"><span>&gt;</span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;::(</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>MyModule</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>);&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;MyModule&nbsp;symbol&nbsp;exists&nbsp;here</span><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;</span><span class="routine name raku"><span>something</span></span><span>()&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;&amp;something&nbsp;will&nbsp;be&nbsp;defined&nbsp;here</span><span>&nbsp;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;::(</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>MyModule</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>);&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;This&nbsp;will&nbsp;NOT&nbsp;contain&nbsp;the&nbsp;MyModule&nbsp;symbol</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>do-something</span></span><span>();</span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;&amp;something&nbsp;will&nbsp;not&nbsp;be&nbsp;defined&nbsp;here</span></span></span></div></pre><p>If <code>MyModule</code> doesn&#39;t export <code>&amp;something</code> then <code>require</code> will fail.</p>
<p>A <code>require</code> with compile-time symbol will install a placeholder <code>package</code> that will be updated to the loaded module, class, or package. Note that the placeholder will be kept, <strong>even if require failed to load the module.</strong> This means that checking if a module loaded like this is wrong:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;***&nbsp;WRONG:&nbsp;***</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="keyword control control-handlers raku"><span>try</span></span><span>&nbsp;</span><span class="keyword other include raku"><span>require</span></span><span>&nbsp;</span><span class="routine name raku"><span>Foo</span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="keyword control conditional raku"><span>if</span></span><span>&nbsp;::(</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>Foo</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>)&nbsp;</span><span class="keyword operator multi-symbol raku"><span>~~</span></span><span>&nbsp;</span><span class="support type exception raku"><span>Failure</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Failed&nbsp;to&nbsp;load&nbsp;Foo!</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;***&nbsp;WRONG:&nbsp;***</span></span></span></div></pre><p>As the compile-time installed package causes <code>::(&#39;Foo&#39;)</code> to never be a <code>Failure</code>. The correct way is:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;Use&nbsp;return&nbsp;value&nbsp;to&nbsp;test&nbsp;whether&nbsp;loading&nbsp;succeeded:</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span>(</span><span class="keyword control control-handlers raku"><span>try</span></span><span>&nbsp;</span><span class="keyword other include raku"><span>require</span></span><span>&nbsp;</span><span class="routine name raku"><span>Foo</span></span><span>)&nbsp;</span><span class="keyword operator multi-symbol raku"><span>===</span></span><span>&nbsp;</span><span class="support type raku"><span>Nil</span></span><span>&nbsp;</span><span class="keyword operator word raku"><span>and</span></span><span>&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Failed&nbsp;to&nbsp;load&nbsp;Foo!</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;Or&nbsp;use&nbsp;a&nbsp;runtime&nbsp;symbol&nbsp;lookup&nbsp;with&nbsp;require,&nbsp;to&nbsp;avoid&nbsp;compile-time</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;package&nbsp;installation:</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="keyword control control-handlers raku"><span>try</span></span><span>&nbsp;</span><span class="keyword other include raku"><span>require</span></span><span>&nbsp;::(</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>Foo</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>);</span></span></div><div class="line"><span class="source raku"><span class="keyword control conditional raku"><span>if</span></span><span>&nbsp;::(</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>Foo</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>)&nbsp;</span><span class="keyword operator multi-symbol raku"><span>~~</span></span><span>&nbsp;</span><span class="support type exception raku"><span>Failure</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Failed&nbsp;to&nbsp;load&nbsp;Foo!</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div></pre><p>In the current (6.d) version of the language, <code>require</code>d symbols are no longer transitively exposed, which means that you need to import symbols from the module they were originally declared, not from the module where they have been imported.</p>
<h2 id="Lexical_module_loading"><a class="u" href="modules.html#___top" title="go to top of document">Lexical module loading</a></h2>
<p>Raku takes great care to avoid global state, i.e. whatever you do in your module, it should not affect other code. For instance, that&#39;s why subroutine definitions are lexically (<code>my</code>) scoped by default. If you want others to see them, you need to explicitly make them <code>our</code> scoped or export them.</p>
<p>Classes are exported by default on the assumption that loading a module will not be of much use when you cannot access the classes it contains. Loaded classes are thus registered only in the scope which loaded them in the first place <a href="modules.html#fn-5" id="fn-ref-5">[5]</a>. This means that we will have to <code>use</code> a class in every scope in which we actually employ it.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="keyword other include raku"><span>use</span></span><span>&nbsp;</span><span class="routine name raku"><span>Foo</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;Foo&nbsp;has&nbsp;&quot;use&nbsp;Bar&quot;&nbsp;somewhere.</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="keyword other include raku"><span>use</span></span><span>&nbsp;</span><span class="routine name raku"><span>Bar</span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>foo</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="routine name raku"><span>Foo</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>new</span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>bar</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="routine name raku"><span>Bar</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>new</span></span><span>;</span></span></div></pre><h2 id="Exporting_and_selective_importing"><a class="u" href="modules.html#___top" title="go to top of document">Exporting and selective importing</a></h2>
<h3 id="is_export"><a class="u" href="modules.html#___top" title="go to top of document">is export</a></h3>
<p>Packages, subroutines, variables, constants, and enums are exported by marking them with the <a href="../routine/is&#32;export.html">is export</a> trait (also note the tags available for indicating authors and versions).</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="routine name raku"><span>unit</span></span><span>&nbsp;</span><span class="meta class raku"><span class="storage type class raku"><span>module</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>MyModule</span></span></span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>ver</span></span><span class="span keyword operator array words raku"><span>&lt;</span></span><span class="string array words raku"><span>1.0.3</span></span><span class="span keyword operator array words raku"><span>&gt;</span></span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>auth</span></span><span class="span keyword operator array words raku"><span>&lt;</span></span><span class="string array words raku"><span>John&nbsp;Hancock&nbsp;(jhancock@example.com)</span></span><span class="span keyword operator array words raku"><span>&gt;</span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>our</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>var</span></span></span><span>&nbsp;</span><span class="storage modifier type constraints raku"><span>is</span></span><span>&nbsp;</span><span class="entity name type trait raku"><span>export</span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>3</span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>foo</span></span><span>&nbsp;</span><span class="storage modifier type constraints raku"><span>is</span></span><span>&nbsp;</span><span class="entity name type trait raku"><span>export</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>...</span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>constant</span></span><span>&nbsp;</span><span class="routine name raku"><span>FOO</span></span><span>&nbsp;</span><span class="storage modifier type constraints raku"><span>is</span></span><span>&nbsp;</span><span class="entity name type trait raku"><span>export</span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>foobar</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>enum</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>FooBar</span></span></span><span>&nbsp;</span><span class="storage modifier type constraints raku"><span>is</span></span><span>&nbsp;</span><span class="entity name type trait raku"><span>export</span></span><span>&nbsp;</span><span class="span keyword operator array words raku"><span>&lt;</span></span><span class="string array words raku"><span>one&nbsp;two&nbsp;three</span></span><span class="span keyword operator array words raku"><span>&gt;</span></span><span>;</span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;for&nbsp;multi&nbsp;methods,&nbsp;if&nbsp;you&nbsp;declare&nbsp;a&nbsp;proto&nbsp;you</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;only&nbsp;need&nbsp;to&nbsp;mark&nbsp;the&nbsp;proto&nbsp;with&nbsp;is&nbsp;export</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="storage type declarator multi raku"><span>proto</span></span><span>&nbsp;</span><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>quux</span></span><span>(</span><span class="support type raku"><span>Str</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>x</span></span></span><span>,&nbsp;</span><span class="keyword operator generic raku"><span>|</span></span><span>)&nbsp;</span><span class="storage modifier type constraints raku"><span>is</span></span><span>&nbsp;</span><span class="entity name type trait raku"><span>export</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>*</span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="storage type declarator multi raku"><span>multi</span></span><span>&nbsp;</span><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>quux</span></span><span>(</span><span class="support type raku"><span>Str</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>x</span></span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>...</span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="storage type declarator multi raku"><span>multi</span></span><span>&nbsp;</span><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>quux</span></span><span>(</span><span class="support type raku"><span>Str</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>x</span></span></span><span>,&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>y</span></span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>...</span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;for&nbsp;multi&nbsp;methods,&nbsp;you&nbsp;only&nbsp;need&nbsp;to&nbsp;mark&nbsp;one&nbsp;with&nbsp;is&nbsp;export</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;but&nbsp;the&nbsp;code&nbsp;is&nbsp;most&nbsp;consistent&nbsp;if&nbsp;all&nbsp;are&nbsp;marked</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="storage type declarator multi raku"><span>multi</span></span><span>&nbsp;</span><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>quux</span></span><span>(</span><span class="support type raku"><span>Str</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>x</span></span></span><span>)&nbsp;</span><span class="storage modifier type constraints raku"><span>is</span></span><span>&nbsp;</span><span class="entity name type trait raku"><span>export</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>...</span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="storage type declarator multi raku"><span>multi</span></span><span>&nbsp;</span><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>quux</span></span><span>(</span><span class="support type raku"><span>Str</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>x</span></span></span><span>,&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>y</span></span></span><span>)&nbsp;</span><span class="storage modifier type constraints raku"><span>is</span></span><span>&nbsp;</span><span class="entity name type trait raku"><span>export</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>...</span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;Packages&nbsp;like&nbsp;classes&nbsp;can&nbsp;be&nbsp;exported&nbsp;too</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>class</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>MyClass</span></span></span><span>&nbsp;</span><span class="storage modifier type constraints raku"><span>is</span></span><span>&nbsp;</span><span class="entity name type trait raku"><span>export</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span><span>}</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;If&nbsp;a&nbsp;subpackage&nbsp;is&nbsp;in&nbsp;the&nbsp;namespace&nbsp;of&nbsp;the&nbsp;current&nbsp;package</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;it&nbsp;doesn&#39;t&nbsp;need&nbsp;to&nbsp;be&nbsp;explicitly&nbsp;exported</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>class</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>MyModule::MyClass</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span><span>}</span></span></span><span>;</span></span></div></pre><p>As with all traits, if applied to a routine, <code>is export</code> should appear after any argument list.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>foo</span></span><span>(</span><span class="support type raku"><span>Str</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>string</span></span></span><span>)&nbsp;</span><span class="storage modifier type constraints raku"><span>is</span></span><span>&nbsp;</span><span class="entity name type trait raku"><span>export</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>...</span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></div></pre><p>You can pass named parameters to <code>is export</code> to group symbols for exporting so that the importer can pick and choose. There are three predefined tags: <code>ALL</code>, <code>DEFAULT</code> and <code>MANDATORY</code>.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;lib/MyModule.rakumod</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>unit</span></span><span>&nbsp;</span><span class="meta class raku"><span class="storage type class raku"><span>module</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>MyModule</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>bag</span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier type constraints raku"><span>is</span></span><span>&nbsp;</span><span class="entity name type trait raku"><span>export</span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>...</span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;objects&nbsp;with&nbsp;tag&nbsp;&#39;:MANDATORY&#39;&nbsp;are&nbsp;always&nbsp;exported</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>pants</span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier type constraints raku"><span>is</span></span><span>&nbsp;</span><span class="entity name type trait raku"><span>export</span></span><span>(</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>MANDATORY</span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>...</span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>sunglasses</span></span><span>&nbsp;</span><span class="storage modifier type constraints raku"><span>is</span></span><span>&nbsp;</span><span class="entity name type trait raku"><span>export</span></span><span>(</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>day</span></span><span>)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>...</span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>torch</span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier type constraints raku"><span>is</span></span><span>&nbsp;</span><span class="entity name type trait raku"><span>export</span></span><span>(</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>night</span></span><span>)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>...</span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>underpants</span></span><span>&nbsp;</span><span class="storage modifier type constraints raku"><span>is</span></span><span>&nbsp;</span><span class="entity name type trait raku"><span>export</span></span><span>(</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>ALL</span></span><span>)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>...</span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></div></pre><pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;main.raku</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="keyword other include raku"><span>use</span></span><span>&nbsp;</span><span class="constant language pragma raku"><span>lib</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>lib</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="keyword other include raku"><span>use</span></span><span>&nbsp;</span><span class="routine name raku"><span>MyModule</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;bag,&nbsp;pants</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="keyword other include raku"><span>use</span></span><span>&nbsp;</span><span class="routine name raku"><span>MyModule</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>DEFAULT</span></span><span>;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;the&nbsp;same</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="keyword other include raku"><span>use</span></span><span>&nbsp;</span><span class="routine name raku"><span>MyModule</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>day</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;pants,&nbsp;sunglasses</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="keyword other include raku"><span>use</span></span><span>&nbsp;</span><span class="routine name raku"><span>MyModule</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>night</span></span><span>;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;pants,&nbsp;torch</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="keyword other include raku"><span>use</span></span><span>&nbsp;</span><span class="routine name raku"><span>MyModule</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>ALL</span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;bag,&nbsp;pants,&nbsp;sunglasses,&nbsp;torch,&nbsp;underpants</span><span>&nbsp;</span></span></span></div></pre><p><strong>Note</strong>: there currently is no way for the user to import a single object if the module author hasn&#39;t made provision for that, and it is not an easy task at the moment (see <a href="https://github.com/Raku/old-issue-tracker/issues/5063">RT #127305</a>). One way the author can provide such access is to give each <code>export</code> trait its own unique tag. (And the tag can be the object name!). Then the user can either (1) import all objects:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="keyword other include raku"><span>use</span></span><span>&nbsp;</span><span class="routine name raku"><span>Foo</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>ALL</span></span><span>;</span></span></div></pre><p>or (2) import one or more objects selectively:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="keyword other include raku"><span>use</span></span><span>&nbsp;</span><span class="routine name raku"><span>Foo</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>bar</span></span><span>,&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>s5</span></span><span>;</span></span></div></pre><p>Notes:</p>
<p>1. The <code>:MANDATORY</code> tag on an exported sub ensures it will be exported no matter whether the using program adds any tag or not.</p>
<p>2. All exported subs without an explicit tag are implicitly <code>:DEFAULT</code>.</p>
<p>3. The space after the module name and before the tag is mandatory.</p>
<p>4. Multiple import tags may be used (separated by commas). For example:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;main.raku</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="keyword other include raku"><span>use</span></span><span>&nbsp;</span><span class="constant language pragma raku"><span>lib</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>lib</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="keyword other include raku"><span>use</span></span><span>&nbsp;</span><span class="routine name raku"><span>MyModule</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>day</span></span><span>,&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>night</span></span><span>;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;pants,&nbsp;sunglasses,&nbsp;torch</span><span>&nbsp;</span></span></span></div></pre><p>5. Multiple tags may be used in the <code>export</code> trait, but they must all be separated by either commas, or whitespace, but not both.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>foo</span></span><span>()&nbsp;</span><span class="storage modifier type constraints raku"><span>is</span></span><span>&nbsp;</span><span class="entity name type trait raku"><span>export</span></span><span>(</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>foo</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>s2</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>net</span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>bar</span></span><span>()&nbsp;</span><span class="storage modifier type constraints raku"><span>is</span></span><span>&nbsp;</span><span class="entity name type trait raku"><span>export</span></span><span>(</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>bar</span></span><span>,&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>s3</span></span><span>,&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>some</span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span><span>}</span></span></span></span></div></pre><h3 id="UNIT::EXPORT::*"><a class="u" href="modules.html#___top" title="go to top of document">UNIT::EXPORT::*</a></h3>
<p>Beneath the surface, <code>is export</code> is adding the symbols to a <code>UNIT</code> scoped package in the <code>EXPORT</code> namespace. For example, <code>is export(:FOO)</code> will add the target to the <code>UNIT::EXPORT::FOO</code> package. This is what Raku is really using to decide what to import.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="routine name raku"><span>unit</span></span><span>&nbsp;</span><span class="meta class raku"><span class="storage type class raku"><span>module</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>MyModule</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>foo</span></span><span>&nbsp;</span><span class="storage modifier type constraints raku"><span>is</span></span><span>&nbsp;</span><span class="entity name type trait raku"><span>export</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>...</span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>bar</span></span><span>&nbsp;</span><span class="storage modifier type constraints raku"><span>is</span></span><span>&nbsp;</span><span class="entity name type trait raku"><span>export</span></span><span>(</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>other</span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>...</span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></div></pre><p>Is the same as:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="routine name raku"><span>unit</span></span><span>&nbsp;</span><span class="meta class raku"><span class="storage type class raku"><span>module</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>MyModule</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta class raku"><span class="storage type class raku"><span>package</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>EXPORT::DEFAULT</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator raku"><span>our</span></span><span>&nbsp;</span><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>foo</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>...</span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta class raku"><span class="storage type class raku"><span>package</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>EXPORT::other</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator raku"><span>our</span></span><span>&nbsp;</span><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>bar</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>...</span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div></pre><p>For most purposes, <code>is export</code> is sufficient but the <code>EXPORT</code> packages are useful when you want to produce the exported symbols dynamically. For example:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;lib/MyModule.rakumod</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>unit</span></span><span>&nbsp;</span><span class="meta class raku"><span class="storage type class raku"><span>module</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>MyModule</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta class raku"><span class="storage type class raku"><span>package</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>EXPORT::DEFAULT</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;</span><span class="keyword control repeat raku"><span>for</span></span><span>&nbsp;</span><span class="span keyword operator array words raku"><span>&lt;</span></span><span class="string array words raku"><span>zero&nbsp;one&nbsp;two&nbsp;three&nbsp;four</span></span><span class="span keyword operator array words raku"><span>&gt;</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>kv</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>-&gt;</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>number</span></span></span><span>,&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>name</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control repeat raku"><span>for</span></span><span>&nbsp;</span><span class="span keyword operator array words raku"><span>&lt;</span></span><span class="string array words raku"><span>sqrt&nbsp;log</span></span><span class="span keyword operator array words raku"><span>&gt;</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>-&gt;</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>func</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="routine name raku"><span>OUR</span></span><span>::</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>&amp;</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>~</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>func</span></span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>~</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>-of-</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>~</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>name</span></span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>:=</span></span><span>&nbsp;</span><span class="routine name raku"><span>sub</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>number</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>func</span></span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>()&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>;</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div></pre><pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;main.raku</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="keyword other include raku"><span>use</span></span><span>&nbsp;</span><span class="routine name raku"><span>MyModule</span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="routine name raku"><span>sqrt-of-four</span></span><span>;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«2␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="routine name raku"><span>log-of-zero</span></span><span>;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«-Inf␤»</span><span>&nbsp;</span></span></span></div></pre><p><a name="index-entry-sub_EXPORT"></a></p>
<h3 id="EXPORT"><a class="u" href="modules.html#___top" title="go to top of document">EXPORT</a></h3>
<p>You can export arbitrary symbols with an <code>EXPORT</code> sub. <code>EXPORT</code> must return a <a href="../type/Map.html">Map</a>, where the keys are the symbol names and the values are the desired values. The names should include the sigil (if any) for the associated type.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;lib/MyModule.rakumod</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>class</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>MyModule::Class</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>EXPORT</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support type raku"><span>Map</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>new</span></span><span class="keyword operator generic raku"><span>:</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>$var</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator multi-symbol raku"><span>=&gt;</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>one</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>,</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>@array</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator multi-symbol raku"><span>=&gt;</span></span><span>&nbsp;</span><span class="span keyword operator array words raku"><span>&lt;</span></span><span class="string array words raku"><span>one&nbsp;two&nbsp;three</span></span><span class="span keyword operator array words raku"><span>&gt;</span></span><span>,</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>%hash</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator multi-symbol raku"><span>=&gt;</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>%</span></span><span>(&nbsp;</span><span class="string pair key raku"><span>one&nbsp;</span></span><span class="keyword operator multi-symbol raku"><span>=&gt;</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>two</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="string pair key raku"><span>three&nbsp;</span></span><span class="keyword operator multi-symbol raku"><span>=&gt;</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>four</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>&nbsp;),</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>&amp;doit</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator multi-symbol raku"><span>=&gt;</span></span><span>&nbsp;</span><span class="routine name raku"><span>sub</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>Greetings&nbsp;from&nbsp;exported&nbsp;sub</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>,</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>ShortName</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>=&gt;</span></span><span>&nbsp;</span><span class="routine name raku"><span>MyModule</span></span><span>::</span><span class="routine name raku"><span>Class</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div></pre><p>Which is going to be used from this main file:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;main.raku</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="keyword other include raku"><span>use</span></span><span>&nbsp;</span><span class="constant language pragma raku"><span>lib</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>lib</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="keyword other include raku"><span>use</span></span><span>&nbsp;</span><span class="routine name raku"><span>MyModule</span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>var</span></span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«one␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>@</span></span><span class="variable other identifier raku"><span>array</span></span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«(one&nbsp;two&nbsp;three)␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>%</span></span><span class="variable other identifier raku"><span>hash</span></span></span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«{one&nbsp;=&gt;&nbsp;two,&nbsp;three&nbsp;=&gt;&nbsp;four}␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>doit</span></span><span>();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«Greetings&nbsp;from&nbsp;exported&nbsp;sub␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="routine name raku"><span>ShortName</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>new</span></span><span>;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«MyModule::Class.new␤»</span><span>&nbsp;</span></span></span></div></pre><p>Please note that <code>EXPORT</code> can&#39;t be declared inside a <a href="packages.html">package</a> because it is part of the compunit rather than the package.</p>
<p>Whereas <code>UNIT::EXPORT</code> packages deal with the named parameters passed to <code>use</code>, the <code>EXPORT</code> sub handles positional parameters. If you pass positional parameters to <code>use</code>, they will be passed to <code>EXPORT</code>. If a positional is passed, the module no longer exports default symbols. You may still import them explicitly by passing <code>:DEFAULT</code> to <code>use</code> along with your positional parameters.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;lib/MyModule</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>class</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>MyModule::Class</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>EXPORT</span></span><span>(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>short_name</span></span></span><span class="keyword operator generic raku"><span>?</span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support type raku"><span>Map</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>new</span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="keyword control flowcontrol raku"><span>do</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>short_name</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>=&gt;</span></span><span>&nbsp;</span><span class="routine name raku"><span>MyModule</span></span><span>::</span><span class="routine name raku"><span>Class</span></span><span>&nbsp;</span><span class="keyword control conditional raku"><span>if</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>short_name</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>always</span></span><span>&nbsp;</span><span class="storage modifier type constraints raku"><span>is</span></span><span>&nbsp;</span><span class="entity name type trait raku"><span>export</span></span><span>(</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>MANDATORY</span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>works</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>import&nbsp;with&nbsp;:ALL&nbsp;or&nbsp;:DEFAULT&nbsp;to&nbsp;get</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>shy</span></span><span>&nbsp;</span><span class="storage modifier type constraints raku"><span>is</span></span><span>&nbsp;</span><span class="entity name type trait raku"><span>export</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>you&nbsp;found&nbsp;me!</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></div></pre><p>Used from this main program</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;main.raku</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="keyword other include raku"><span>use</span></span><span>&nbsp;</span><span class="constant language pragma raku"><span>lib</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>lib</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="keyword other include raku"><span>use</span></span><span>&nbsp;</span><span class="routine name raku"><span>MyModule</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>foo</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="routine name raku"><span>foo</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>new</span></span><span>();&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«MyModule::Class.new␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>always</span></span><span>();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OK&nbsp;&nbsp;&nbsp;-&nbsp;is&nbsp;imported</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>shy</span></span><span>();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;FAIL&nbsp;-&nbsp;«shy&nbsp;used&nbsp;at&nbsp;line&nbsp;8.&nbsp;Did&nbsp;you&nbsp;mean&nbsp;&#39;say&#39;?»</span><span>&nbsp;</span></span></span></div></pre><p>You can combine <code>EXPORT</code> with type captures for interesting effect. This example creates a <code>?</code> postfix which will only work on <a href="../type/Cool.html">Cool</a>s; please note that, by using <code>$_</code> as an argument, we don&#39;t need to use a variable in the routine body and use just <code>.so</code>, acting by default on the topic variable.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;lib/MakeQuestionable.rakumod</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>EXPORT</span></span><span>(::</span><span class="routine name raku"><span>Questionable</span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="storage type declarator type raku"><span>multi</span></span><span>&nbsp;</span><span class="entity name function raku"><span>postfix</span></span><span class="punctuation definition function adverb raku"><span>:</span></span><span class="span keyword operator array words raku"><span>&lt;</span></span><span class="string array words raku"><span>?</span></span><span class="span keyword operator array words raku"><span>&gt;</span></span><span>(</span><span class="routine name raku"><span>Questionable</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>_</span></span></span><span>)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>.</span></span><span class="keyword operator word raku"><span>so</span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support type raku"><span>Map</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>new</span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>&amp;postfix:&lt;?&gt;</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>=&gt;</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>&amp;</span></span><span class="variable other identifier raku"><span>postfix</span></span></span><span class="keyword operator generic raku"><span>:</span></span><span class="span keyword operator array words raku"><span>&lt;</span></span><span class="string array words raku"><span>?</span></span><span class="span keyword operator array words raku"><span>&gt;</span></span><span>,</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div></pre><p>Which is used from here:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="keyword other include raku"><span>use</span></span><span>&nbsp;</span><span class="constant language pragma raku"><span>lib</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>lib</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="keyword other include raku"><span>use</span></span><span>&nbsp;</span><span class="routine name raku"><span>MakeQuestionable</span></span><span>&nbsp;</span><span class="support type raku"><span>Cool</span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;(&nbsp;</span><span class="constant numeric raku"><span>0</span></span><span class="keyword operator generic raku"><span>?</span></span><span>,&nbsp;</span><span class="constant numeric raku"><span>1</span></span><span class="keyword operator generic raku"><span>?</span></span><span>,&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span><span>}</span></span></span><span class="keyword operator generic raku"><span>?</span></span><span>,</span><span class="keyword other special-method raku"><span>&nbsp;%</span></span><span>(&nbsp;</span><span class="string pair key raku"><span>a&nbsp;</span></span><span class="keyword operator multi-symbol raku"><span>=&gt;</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>b</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>&nbsp;)</span><span class="keyword operator generic raku"><span>?</span></span><span>&nbsp;)</span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>join</span></span><span>(</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>&nbsp;</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>);&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«False&nbsp;True&nbsp;False&nbsp;True␤»</span><span>&nbsp;</span></span></span></div></pre><h2 id="Introspection"><a class="u" href="modules.html#___top" title="go to top of document">Introspection</a></h2>
<p>To list exported symbols of a module first query the export tags supported by the module.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="keyword other include raku"><span>use</span></span><span>&nbsp;</span><span class="routine name raku"><span>URI</span></span><span>::</span><span class="routine name raku"><span>Escape</span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="routine name raku"><span>URI</span></span><span>::</span><span class="routine name raku"><span>Escape</span></span><span>::</span><span class="routine name raku"><span>EXPORT</span></span><span>::</span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>keys</span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«(DEFAULT&nbsp;ALL)␤»</span></span></span></div></pre><p>Then use the tag you like and pick the symbol by its name.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="routine name raku"><span>URI</span></span><span>::</span><span class="routine name raku"><span>Escape</span></span><span>::</span><span class="routine name raku"><span>EXPORT</span></span><span>::</span><span class="routine name raku"><span>DEFAULT</span></span><span>::</span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>keys</span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«(&amp;uri-escape&nbsp;&amp;uri-unescape&nbsp;&amp;uri_escape&nbsp;&amp;uri_unescape)␤»</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>&amp;</span></span><span class="variable other identifier raku"><span>escape-uri</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="routine name raku"><span>URI</span></span><span>::</span><span class="routine name raku"><span>Escape</span></span><span>::</span><span class="routine name raku"><span>EXPORT</span></span><span>::</span><span class="routine name raku"><span>DEFAULT</span></span><span>::</span><span class="span keyword operator array words raku"><span>&lt;</span></span><span class="string array words raku"><span>&amp;uri_escape</span></span><span class="span keyword operator array words raku"><span>&gt;</span></span><span>;</span></span></div></pre><p>Be careful <em>not</em> to put <code>sub EXPORT</code> after <a href="../syntax/unit.html"><code>unit</code> declarator</a>. If you do so, it&#39;ll become just a sub inside your package, rather than the special export sub:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="routine name raku"><span>unit</span></span><span>&nbsp;</span><span class="meta class raku"><span class="storage type class raku"><span>module</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>Bar</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>EXPORT</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="support type raku"><span>Map</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>new</span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="string pair key raku"><span>Foo&nbsp;</span></span><span class="keyword operator multi-symbol raku"><span>=&gt;</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>&amp;</span></span><span class="variable other identifier raku"><span>say</span></span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;WRONG!!!&nbsp;Sub&nbsp;is&nbsp;scoped&nbsp;wrong</span><span>&nbsp;</span></span></span></div></pre><p>As explained in <a href="modules.html#EXPORT">its definition</a>, <code>sub EXPORT</code> is part of the <em>compunit</em>, not the package. So this would be the right way to do it:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>EXPORT</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="support type raku"><span>Map</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>new</span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="string pair key raku"><span>Foo&nbsp;</span></span><span class="keyword operator multi-symbol raku"><span>=&gt;</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>&amp;</span></span><span class="variable other identifier raku"><span>say</span></span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;RIGHT!!!&nbsp;Sub&nbsp;is&nbsp;outside&nbsp;the&nbsp;module</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>unit</span></span><span>&nbsp;</span><span class="meta class raku"><span class="storage type class raku"><span>module</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>Bar</span></span></span><span>;</span></span></div></pre><h2 id="Finding_installed_modules"><a class="u" href="modules.html#___top" title="go to top of document">Finding installed modules</a></h2>
<p>It is up to the module installer to know where <code>compunit</code> expects modules to be placed. There will be a location provided by the <a href="../routine/distribution.html">distribution</a> and in the current home directory. In any case, letting the module installer deal with your modules is a safe bet.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="routine name raku"><span>cd</span></span><span>&nbsp;</span><span class="routine name raku"><span>your-module-dir</span></span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>zef</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>--</span></span><span class="routine name raku"><span>force</span></span><span>&nbsp;</span><span class="routine name raku"><span>install</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>.</span></span></span></div></pre><p><a name="index-entry-use_lib"></a> A user may have a collection of modules not found in the normal ecosystem, maintained by a module or package manager, but needed regularly. Instead of using the <code>use lib</code> <a href="pragmas.html#index-entry-lib__pragma">pragma</a> one can use the <code>RAKULIB</code> environment variable to point to module locations. For example:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="entity name type trait raku"><span>export</span></span><span>&nbsp;</span><span class="routine name raku"><span>RAKULIB</span></span><span class="storage modifier assignment raku"><span>=</span></span><span class="punctuation definition regexp raku"><span>/</span></span><span class="string regexp raku"><span>path</span></span><span class="punctuation definition regexp raku"><span>/</span></span><span class="support function raku"><span>to</span></span><span class="keyword operator generic raku"><span>/</span></span><span class="routine name raku"><span>my-modules</span></span><span>,</span><span class="punctuation definition regexp raku"><span>/</span></span><span class="string regexp raku"><span>path</span></span><span class="punctuation definition regexp raku"><span>/</span></span><span class="support function raku"><span>to</span></span><span class="keyword operator generic raku"><span>/</span></span><span class="routine name raku"><span>more</span></span><span class="keyword operator generic raku"><span>/</span></span><span class="routine name raku"><span>modules</span></span></span></div></pre><p>Note that the comma (&#39;,&#39;) is used as the directory separator.</p>
<p>The directories in the <code>RAKULIB</code> path will be searched for modules when Raku <code>need</code>s, <code>use</code>s or <code>require</code>s them. Directories that start with a dot are ignored and symlinks are followed.</p>
<h1 id="Testing_modules_and_a_distribution"><a class="u" href="modules.html#___top" title="go to top of document">Testing modules and a distribution</a></h1>
<p>It is important in this section to repeat the note at the beginning of this document, namely that there is a difference between a <strong>Raku</strong> <code>distribution</code>, which approximates a <em>module</em> in other languages, and a <strong>Raku</strong> <a href="https://docs.raku.org/language/syntax#index-entry-declarator_unit-declarator_module-declarator_package-Package,_Module,_Class,_Role,_and_Grammar_declaration">module declaration</a>. The reason for this is that a single file may contain a number of <code>class</code>, <code>module</code>, <code>role</code> etc declarations, or these declarations may be spread between different files. In addition, when a <code>distribution</code> is published (see <a href="modules.html#Distributing_modules">Distributing modules</a>) it may be necessary to provide access to other resources, such as callable utilities.</p>
<p><strong>Raku</strong> also allows for a single distribution to provide multiple <code>compunit</code>s that can be <code>use</code>d (or <code>require</code>d etc). The information about a distribution is contained in the <code>META6.json</code> file in the distribution&#39;s root directory. See below for more about <code>META6.json</code>. Each entity that the <strong>distribution</strong> allows to be <code>use</code>d (or <code>require</code>d etc), also called a <code>compunit</code>, is placed in the <code>provides</code> section of the <code>META6.json</code> (as specified below).</p>
<p>It should also be noted that when writing the <code>depends</code> section of the <code>META6.json</code> file, it is the name of the <strong>distribution</strong> that is listed, not the name of the <code>compunit</code> that is desired. Although, for very many entities, the name of the <em>distribution</em> and the name of the <em>compunit</em> are the same. Another global effect of the <code>depends</code> list in a distribution made available to the Ecosystem, is that package managers, e.g. <code>zef</code>, can look for <code>compunit</code> names in all distributions available.</p>
<p>Given this arrangement, the <strong>rakudo</strong> compiler, or a package manager such as <strong>zef</strong>, can obtain all the information needed about each <code>compunit</code> from a <code>META6.json</code> file in a directory.</p>
<p>This also means that a testing program such as <strong>Perl</strong>&#39;s <code>prove</code> or the <strong>Raku</strong> equivalent <a href="https://modules.raku.org/dist/App::Prove6:cpan:LEONT">prove6</a> can be run in the root directory of the <strong>distribution</strong> as, e.g.,</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="routine name raku"><span>prove</span></span><span>&nbsp;-</span><span class="routine name raku"><span>e</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>raku&nbsp;-I.</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span></span></div></pre><p>or</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="routine name raku"><span>prove6</span></span><span>&nbsp;-</span><span class="routine name raku"><span>I</span></span><span class="keyword operator generic raku"><span>.</span></span></span></div></pre><p>In both cases, the testing program looks for a directory <code>t/</code> and runs the test programs there (see <a href="testing.html">Testing</a>).</p>
<p>The parameter <strong>-I.</strong>, rather than <strong>-Ilib</strong>, in the examples above is significant because then the compiler will inspect the <code>META6.json</code> file in the root directory of the <strong>distribution</strong>.</p>
<p>If you are just beginning to develop a module (or series of modules), and you have not decided what to call or where to place the code (perhaps splitting it into several <code>*.rakumod</code> files), but assuming all the module files are under the <code>lib/</code> directory, then it is possible to use</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="routine name raku"><span>prove6</span></span><span>&nbsp;-</span><span class="routine name raku"><span>Ilib</span></span></span></div></pre><p>This is deceptive. A distribution may pass all the tests based on local files, and it may pass release steps, but the distribution (and the modules/classes/roles it contains) may not be automatically installed. To give a common example, but not the only way this problem can manifest itself, if the distribution is listed in the <code>depends</code> section of another distribution, and a user is trying to install the other distribution using <code>zef</code> (or a package manager using the same testing regime), perhaps using a CLI command <code>zef install --deps-only .</code>, then <code>zef</code> arranges for the tests of the dependent modules based on <strong>-I.</strong> and not <code>-Ilib</code>. This will lead to <strong>rakudo</strong> errors complaining about the absence of named <strong>compunits</strong> unless the <strong>META6.json</strong> file is correct.</p>
<p>The most basic test that should be run for each <code>compunit</code> that is defined for the distribution is</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="support function raku"><span>use-ok</span></span><span>&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>MyModule</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>;</span></span></div></pre><p>assuming inside <code>META6.json</code> there is a line such as</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="routine name raku"><span>provides</span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>MyModule</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>lib/MyModule.rakumod</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>,</span></span></div></pre><p>It is also highly recommended to use the <code>Test::META</code> <code>meta-ok</code> test, which verifies the validity of the <code>META6.json</code> file. If you wish to add a distribution (module) to the <code>Ecosystem</code>, then this test will be applied to the distribution.</p>
<p>Since <code>meta-ok</code> only needs to be tested by the developer/maintainer of a module, it can be within a set of extended tests in another directory, e.g. <code>/xt</code>. This is because <code>prove6</code>, for example, only runs the tests in <code>t/</code> by default. Then to run the extended tests:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="routine name raku"><span>prove6</span></span><span>&nbsp;-</span><span class="routine name raku"><span>I</span></span><span class="keyword operator generic raku"><span>.</span></span><span>&nbsp;</span><span class="routine name raku"><span>xt</span></span><span class="keyword operator generic raku"><span>/</span></span></span></div></pre><p>Indeed it is becoming common practice by <strong>Raku</strong> community developers to place the extensive testing of a distribution in <code>xt/</code> and to put minimal <em>sanity</em> tests in <code>t/</code>. Extensive testing is essential for development and quality control, but it can slow down the installation of popular distributions.</p>
<p>An alternative to placing the <code>meta-ok</code> test in an extended test directory, but to ensure that it is only run when a developer or maintainer wants to, is to make the test dependent on an environment variable, e.g., in <code>t/99-author-test.t</code> there is the following code</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="keyword other include raku"><span>use</span></span><span>&nbsp;</span><span class="constant language pragma raku"><span>Test</span></span><span>;</span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>plan</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>1</span></span><span>;</span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="keyword control conditional raku"><span>if</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>?</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>%</span></span><span class="support class twigil raku"><span>*</span></span><span class="variable other identifier raku"><span>ENV</span></span></span><span class="span keyword operator array words raku"><span>&lt;</span></span><span class="string array words raku"><span>AUTHOR_TESTING</span></span><span class="span keyword operator array words raku"><span>&gt;</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword other include raku"><span>require</span></span><span>&nbsp;</span><span class="constant language pragma raku"><span>Test</span></span><span>::</span><span class="routine name raku"><span>META</span></span><span>&nbsp;</span><span class="span keyword operator array words raku"><span>&lt;</span></span><span class="string array words raku"><span>&amp;meta-ok</span></span><span class="span keyword operator array words raku"><span>&gt;</span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="routine name raku"><span>meta-ok</span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>done-testing</span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span><span>&nbsp;</span><span class="keyword control conditional raku"><span>else</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>skip-rest</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Skipping&nbsp;author&nbsp;test</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control flowcontrol raku"><span>exit</span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div></pre><p>Then when testing the module by the developer, use</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="routine name raku"><span>AUTHOR_TEST</span></span><span class="storage modifier assignment raku"><span>=</span></span><span class="constant numeric raku"><span>1</span></span><span>&nbsp;</span><span class="routine name raku"><span>prove6</span></span><span>&nbsp;-</span><span class="routine name raku"><span>I</span></span><span class="keyword operator generic raku"><span>.</span></span></span></div></pre><h1 id="Distributing_modules"><a class="u" href="modules.html#___top" title="go to top of document">Distributing modules</a></h1>
<p>If you&#39;ve written a Raku module and would like to share it with the community, we&#39;d be delighted to have it listed in the <a href="https://modules.raku.org">Raku modules directory</a>. <code>:)</code></p>
<p>Currently, there are three ways to distribute a module. No matter which method you choose, your module will be indexed on the <a href="https://raku.land">raku.land</a> and <a href="https://modules.raku.org">modules.raku.org</a> websites. The three module distribution networks, or ecosystems, are:</p>
<ul><li><p><strong>CPAN</strong> This is the same ecosystem Perl is using. Modules are uploaded as <em>.zip</em> or <em>.tar.gz</em> files on <a href="https://pause.perl.org/">PAUSE</a>.</p>
</li>
<li><p><strong>zef ecosystem</strong> using the <code>fez</code> utility Use of the <code>fez</code> command is the newest and perhaps easiest way to distribute your module and is growing in popularity.</p>
</li>
<li><p><strong>p6c</strong> Up until recently the only ecosystem. It is based on Github repositories which are directly accessed. It has only limited capability for versioning.</p>
</li>
</ul>
<p>The process of sharing your module consists of two steps, preparing the module and uploading the module to one of the ecosystems mentioned above. More details on the two steps are below.</p>
<h2 id="Preparing_the_module"><a class="u" href="modules.html#___top" title="go to top of document">Preparing the module</a></h2>
<p>For a module to work in any of the ecosystems, it needs to follow a certain structure. Here is how to do that:</p>
<ul><li><p>Create a project directory named after your module. For example, if your module is <code>Vortex::TotalPerspective</code>, then create a project directory named <code>Vortex-TotalPerspective</code>.</p>
</li>
<li><p>Make your project directory look like this:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="routine name raku"><span>Vortex-TotalPerspective</span></span><span class="keyword operator generic raku"><span>/</span></span></span></div><div class="line"><span class="source raku"><span>├──&nbsp;</span><span class="constant language pragma raku"><span>lib</span></span></span></div><div class="line"><span class="source raku"><span>│&nbsp;&nbsp;&nbsp;└──&nbsp;</span><span class="routine name raku"><span>Vortex</span></span></span></div><div class="line"><span class="source raku"><span>│&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;└──&nbsp;</span><span class="routine name raku"><span>TotalPerspective</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>rakumod</span></span></span></div><div class="line"><span class="source raku"><span>├──&nbsp;</span><span class="routine name raku"><span>LICENSE</span></span></span></div><div class="line"><span class="source raku"><span>├──&nbsp;</span><span class="routine name raku"><span>META6</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>json</span></span></span></div><div class="line"><span class="source raku"><span>├──&nbsp;</span><span class="routine name raku"><span>README</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>md</span></span></span></div><div class="line"><span class="source raku"><span>└──&nbsp;</span><span class="routine name raku"><span>bin</span></span></span></div><div class="line"><span class="source raku"><span>│&nbsp;&nbsp;&nbsp;&nbsp;└──&nbsp;</span><span class="routine name raku"><span>vortex</span></span></span></div><div class="line"><span class="source raku"><span>└──&nbsp;</span><span class="routine name raku"><span>t</span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;└──&nbsp;</span><span class="routine name raku"><span>basic</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>t</span></span></span></div></pre><p>If your project contains other modules that help the main module do its job, they should go in your lib directory like so:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="constant language pragma raku"><span>lib</span></span></span></div><div class="line"><span class="source raku"><span>└──&nbsp;</span><span class="routine name raku"><span>Vortex</span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;├──&nbsp;</span><span class="routine name raku"><span>TotalPerspective</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>rakumod</span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;└──&nbsp;</span><span class="routine name raku"><span>TotalPerspective</span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;├──&nbsp;</span><span class="routine name raku"><span>FairyCake</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>rakumod</span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;└──&nbsp;</span><span class="routine name raku"><span>Gargravarr</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>rakumod</span></span></span></div></pre></li>
<li><p>If you have any additional files (such as templates or a dynamic library) that you wish to have installed so you can access them at runtime, they should be placed in a <code>resources</code> subdirectory of your project, e.g.:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="routine name raku"><span>resources</span></span></span></div><div class="line"><span class="source raku"><span>└──&nbsp;</span><span class="routine name raku"><span>templates</span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;└──&nbsp;</span><span class="routine name raku"><span>default-template</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>mustache</span></span></span></div></pre><p>The file must then be referenced in <code>META6.json</code> (see below for more on <code>META6.json</code>) so that the distribution path can be provided to the program.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>name</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Vortex::TotalPerspective</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>,</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>provides</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Vortex::TotalPerspective</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>lib/Vortex/TotalPerspective.rakumod</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>,</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>resources</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;[&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>templates/default-template.mustache</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>]</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div></pre><p>The additional file can then be accessed inside module code:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>template-text</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>%</span></span><span class="support class twigil raku"><span>?</span></span><span class="variable other identifier raku"><span>RESOURCES</span></span></span><span class="span keyword operator array words raku"><span>&lt;</span></span><span class="string array words raku"><span>templates/default-template.mustache</span></span><span class="span keyword operator array words raku"><span>&gt;</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>slurp</span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;Note&nbsp;that&nbsp;%?RESOURCES&nbsp;provides&nbsp;a&nbsp;C&lt;IO&gt;&nbsp;path&nbsp;object</span><span>&nbsp;</span></span></span></div></pre></li>
<li><p>Programs and scripts that you need in the <code>$PATH</code> for execution need to be included in the <code>bin</code> directory; these will be copied to whatever directory your installed Rakudo distribution has allotted for executables; typically this will be <code>/path/to/installation/share/perl6/site/bin/</code>, a folder that should be available in <code>$PATH</code>.</p>
</li>
<li><p>The <code>README.md</code> file is a <a href="https://help.github.com/articles/markdown-basics/">markdown-formatted</a> text file, which will later be automatically rendered as HTML by GitHub/GitLab for modules kept in those ecosystems or by <a href="https://modules.raku.org">modules.raku.org</a> website for modules kept on <a href="faq.html#index-entry-CPAN_(FAQ)">CPAN</a>.</p>
</li>
<li><p>Regarding the <code>LICENSE</code> file, if you have no other preference, you might just use the same one that Rakudo Raku uses. Just copy/paste the raw form of <a href="https://github.com/rakudo/rakudo/blob/master/LICENSE">its license</a> into your own <code>LICENSE</code> file.</p>
</li>
<li><p>The license field in META6.json should be one of the standardized names listed here: <a href="https://spdx.org/licenses/">https://spdx.org/licenses/</a>. In the case of the <strong>Artistic 2.0</strong> license, which is what many of our ecosystem modules use, its identifier is <code>Artistic-2.0</code>. Having standardized identifiers make it easy for humans and computers alike to know which license was actually used by looking at the metadata!</p>
</li>
<li><p>If you can&#39;t find your license on <code>spdx.org</code> or you use your own license, you should put the license&#39;s name in the license field. For more details see <a href="https://design.raku.org/S22.html#license">https://design.raku.org/S22.html#license</a>.</p>
</li>
<li><p>If you don&#39;t yet have any tests, you can leave out the <code>t</code> directory and <code>basic.t</code> file for now. For more information on how to write tests (for now), you might have a look at how other modules use <code>Test</code>.</p>
</li>
<li><p>To document your modules, use <a href="pod.html">Raku Pod</a> markup inside them. Module documentation is most appreciated and will be especially important once the Raku module directory (or some other site) begins rendering Pod docs as HTML for easy browsing. If you have extra docs (in addition to the Pod docs in your module(s)), create a <code>doc</code> directory for them. Follow the same folder structure as the <code>lib</code> directory like so:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="routine name raku"><span>doc</span></span></span></div><div class="line"><span class="source raku"><span>└──&nbsp;</span><span class="routine name raku"><span>Vortex</span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;└──&nbsp;</span><span class="routine name raku"><span>TotalPerspective</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>pod6</span></span></span></div></pre><p><a href="modules.html#fn-6" id="fn-ref-6">[6]</a></p>
<p>If your module requires extra processing during installation to fully integrate with and use non-Raku operating system resources, you may need to add a <a name="index-entry-Build.pm6-Build.pm6"><span class="index-entry"><code>Build.pm6</code></span></a> file (a &quot;build hook&quot;) to the top-level directory. It will be used by the <code>zef</code> installer as the first step in the installation process. See the README for <code>zef</code> for a brief example. Also see various usage scenarios in existing ecosystem modules such as <code>zef</code> itself.</p>
</li>
<li><p>Make your <a name="index-entry-META6.json-META6.json"><span class="index-entry"><code>META6.json</code></span></a> file look something like this:</p>
<pre class="pod-block-code">{
    &quot;perl&quot; : &quot;6.c&quot;,
    &quot;name&quot; : &quot;Vortex::TotalPerspective&quot;,
    &quot;api&quot;  : &quot;1&quot;,
    &quot;auth&quot; : &quot;github:SomeAuthor&quot;,
    &quot;version&quot; : &quot;0.0.1&quot;,
    &quot;description&quot; : &quot;Wonderful simulation to get some perspective.&quot;,
    &quot;authors&quot; : [ &quot;<var>Your Name</var>&quot; ],
    &quot;license&quot; : &quot;Artistic-2.0&quot;,
    &quot;provides&quot; : {
        &quot;Vortex::TotalPerspective&quot; : &quot;lib/Vortex/TotalPerspective.rakumod&quot;
    },
    &quot;depends&quot; : [ ],
    &quot;build-depends&quot; : [ ],
    &quot;test-depends&quot; : [ ],
    &quot;resources&quot; : [ ],
    &quot;tags&quot;: [
      &quot;Vortex&quot;, &quot;Total&quot;, &quot;Perspective&quot;
    ],
    &quot;source-url&quot; : &quot;git://github.com/<var>you</var>/Vortex-TotalPerspective.git&quot;
}
</pre>
<p>The attributes in this file are analyzed by the <a href="https://github.com/jonathanstowe/META6"><code>META6</code></a> class. They are divided into optional, mandatory and <em>customary</em>. Mandatory are the ones you need to insert into your file, and customary are those used by the current Raku ecosystem and possibly displayed on the module page if it&#39;s published, but you have no obligation to use it.</p>
<p>For choosing a version numbering scheme, try and use &quot;major.minor.patch&quot; (see <a href="https://design.raku.org/S11.html#Versioning">the spec on versioning</a> for further details). This will go into the <code>version</code> key of <code>META6.json</code>. This field is optional, but used by installation to match against installed version, if one exists. The <code>description</code> field is also mandatory, and includes a short description of the module.</p>
<p>The <code>name</code> key is compulsory, and <code>zef</code> will fail if you do not include it. Even if you have created a META6.json file just to express the dependencies for a series of scripts, this section must be included.</p>
<p>Optionally, you can set an <code>api</code> field. Incrementing this indicates that the interface provided by your module is not backwards compatible with a previous version. You can use it if you want to adhere to <a href="https://semver.org">Semantic Versioning</a>. A best practice is to simply keep the <code>api</code> field to the same value as your major version number. A dependency can then depend on your module by including a <code>:api</code> part, which will ensure backwards incompatible releases will not be pulled in.</p>
<p>The <code>auth</code> section identifies the author in GitHub or other repository hosting site, such as Bitbucket or GitLab. This field is <em>customary</em>, since it&#39;s used to identify the author in the ecosystem, and opens the possibility of having modules with the same name and different authors.</p>
<p>The <code>authors</code> section includes a list of all the module authors. In the case there is only one author, a single element list must be supplied. This field is optional.</p>
<p>In the <code>provides</code> section, include all the namespaces provided by your distribution and that you wish to be installed; only module files that are explicitly included here will be installed and available with <code>use</code> or <code>require</code> in other programs. This field is mandatory.</p>
<p>Set <code>perl</code> version to the minimum Raku version your module works with. This field is mandatory. Use <code>6.c</code> if your module is valid for Christmas release and newer ones, use <code>6.d</code> if it requires, at least the Diwali version.</p>
<p>The <code>resources</code> section is optional, but if present, should contain a list of the files in your <code>resources</code> directory that you wish to be installed. These will be installed with hashed names alongside your library files. Their installed location can be determined through the <code>%?RESOURCES</code> <code>Hash</code> indexed on the name provided. The <code>tags</code> section is also optional. It is used to describe the module in the Raku ecosystem.</p>
<p>The <code>depends</code>, <code>build-depends</code>, and <code>test-depends</code> sections include different modules that are used in those phases of the of installation. All are optional, but if present must contain the required modules for those phases. These dependencies might optionally use <a href="../type/Version.html"><code>Version</code></a> specification strings; <code>zef</code> will check for the presence and versions of these modules and install or upgrade them if needed.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="punctuation definition regexp raku"><span>/</span><span>/</span></span><span class="keyword operator multi-symbol raku"><span>...</span></span></span></div><div class="line"><span class="source raku"><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>depends</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;[</span></span></div><div class="line"><span class="source raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>URI</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>,</span></span></div><div class="line"><span class="source raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>File::Temp</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>,</span></span></div><div class="line"><span class="source raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>JSON::Fast</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>,</span></span></div><div class="line"><span class="source raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Pod::To::BigPage:ver&lt;0.5.0+&gt;</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>,</span></span></div><div class="line"><span class="source raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Pod::To::HTML:ver&lt;0.6.1+&gt;</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>,</span></span></div><div class="line"><span class="source raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>OO::Monitors</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>,</span></span></div><div class="line"><span class="source raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>File::Find</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>,</span></span></div><div class="line"><span class="source raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Test::META</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span></span></div><div class="line"><span class="source raku"><span>],</span></span></div><div class="line"><span class="source raku"><span class="punctuation definition regexp raku"><span>/</span><span>/</span></span><span class="keyword operator multi-symbol raku"><span>...</span></span></span></div></pre><p>Additionally, <code>depends</code> can be either an array as above or a hash that uses two keys, <code>runtime</code> and <code>build</code>, whose function should be self-descriptive, and which are used, for instance, <a href="https://github.com/niner/Inline-Python/blob/master/META6.json">in <code>Inline::Python</code></a>:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="punctuation definition regexp raku"><span>/</span><span>/</span></span><span class="keyword operator multi-symbol raku"><span>...</span></span></span></div><div class="line"><span class="source raku"><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>depends</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>build</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>requires</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;[</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Distribution::Builder::MakeFromJSON</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>,</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>from</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>bin</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>,</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>name</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>by-distro.name</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>macosx</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>python2.7-config</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>,</span></span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>debian</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>python2.7-config</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>,</span></span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>python2-config</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span></span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span><span>,</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>runtime</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>requires</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;[</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>python2.7:from&lt;native&gt;</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;]</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span><span>,</span><span>&nbsp;</span><span class="punctuation definition regexp raku"><span>/</span><span>/</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>...</span></span></span></div></pre><p>In general, the array form will be more than enough for most cases.</p>
<p>Finally, <code>source-url</code> indicates the URL of the repository where the module is developed; this is one of the customary modules if you are going to publish it in the module ecosystem. The current module ecosystem will link this URL from the project description. <a href="modules.html#fn-7" id="fn-ref-7">[7]</a></p>
<p>The <a href="https://github.com/jonathanstowe/Test-META/"><code>Test::META</code> module</a> can help you check the correctness of the META6.json file; this module will check for all the mandatory fields and that the type used for all of them is correct.</p>
<p>There are more fields described in the <a href="https://design.raku.org/S22.html#META6.json"><code>META</code> design documents</a>, but not all of these are implemented by existing package managers. Hence you should stick to the fields described in the above example block to ensure compatibility with existing package managers such as <code>zef</code>. You can also check <a href="https://github.com/moritz/perl6-all-modules/search?l=JSON&q=META6.json&type=">Moritz Lenz&#39;s repository of all modules for examples</a>, but bear in mind that some of them might use fields, such as <code>source-type</code> above, which are currently ignored.</p>
</li>
<li><p>If you want to test your module you can use the following command to install the module directly from the module folder you just created.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="routine name raku"><span>zef</span></span><span>&nbsp;</span><span class="routine name raku"><span>install</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>.</span><span>/</span></span><span class="routine name raku"><span>your-module-folder</span></span></span></div></pre><p>Note that doing so precompiles and installs your module. If you make changes to the source, you&#39;ll need to re-install the module. (See <code>use lib</code> <a href="pragmas.html#index-entry-lib__pragma">pragma</a>, <code>-I</code> command line switch, or <code>RAKULIB</code> env variable, to include a path to your module source while developing it, so you don&#39;t have to install it at all).</p>
</li>
</ul>
<h2 id="Upload_your_module_to_CPAN"><a class="u" href="modules.html#___top" title="go to top of document">Upload your module to CPAN</a></h2>
<p>A prerequisite for using CPAN is a <a href="https://pause.perl.org/">PAUSE</a> user account. If you don&#39;t have an account already, you can create one <a href="https://pause.perl.org/pause/query?ACTION=request_id">here</a> The process takes about 5 minutes and some e-mail back and forth.</p>
<ul><li><p>Create a package of your module:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="routine name raku"><span>cd</span></span><span>&nbsp;</span><span class="routine name raku"><span>your-module-folder</span></span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>tar</span></span><span>&nbsp;</span><span class="routine name raku"><span>czf</span></span><span>&nbsp;</span><span class="routine name raku"><span>Vortex-TotalPerspective</span></span><span>-0</span><span class="keyword operator generic raku"><span>.</span></span><span>0</span><span class="keyword operator generic raku"><span>.</span></span><span>1</span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>tar</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>gz</span></span><span>&nbsp;\</span></span></div><div class="line"><span class="source raku"><span>&nbsp;&nbsp;</span><span class="keyword operator multi-symbol raku"><span>--</span></span><span class="routine name raku"><span>transform</span></span><span>&nbsp;</span><span class="string regexp construct slash raku"><span>s</span></span><span class="punctuation definition regexp slash raku"><span>/</span></span><span class="string regexp slash raku"><span class="entity name section boundary regexp raku"><span>^</span></span><span>\</span><span class="keyword operator quantifiers regexp raku"><span>.</span></span></span><span class="punctuation definition regexp slash raku"><span>/</span></span><span class="routine name raku"><span>Vortex-TotalPerspective</span></span><span>-0</span><span class="keyword operator generic raku"><span>.</span></span><span>0</span><span class="keyword operator generic raku"><span>.</span></span><span>1</span><span class="keyword operator generic raku"><span>/</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>--</span></span><span class="routine name raku"><span>exclude-vcs</span></span><span>\</span></span></div><div class="line"><span class="source raku"><span>&nbsp;&nbsp;</span><span class="keyword operator multi-symbol raku"><span>--</span></span><span class="routine name raku"><span>exclude</span></span><span class="storage modifier assignment raku"><span>=</span></span><span class="keyword operator generic raku"><span>.</span></span><span>[</span><span class="keyword operator generic raku"><span>^</span><span>/</span></span><span>]</span><span class="keyword operator generic raku"><span>*</span></span></span></div></pre><p>If you use git you can also use the following command to create a package directly for a given commit.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="routine name raku"><span>git</span></span><span>&nbsp;</span><span class="routine name raku"><span>archive</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>--</span></span><span class="routine name raku"><span>prefix</span></span><span class="storage modifier assignment raku"><span>=</span></span><span class="routine name raku"><span>Vortex-TotalPerspective</span></span><span>-0</span><span class="keyword operator generic raku"><span>.</span></span><span>0</span><span class="keyword operator generic raku"><span>.</span></span><span>1</span><span class="keyword operator generic raku"><span>/</span></span><span>&nbsp;\</span></span></div><div class="line"><span class="source raku"><span>&nbsp;&nbsp;-</span><span class="keyword operator generic raku"><span>o</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>..</span></span><span class="keyword operator generic raku"><span>/</span></span><span class="routine name raku"><span>Vortex-TotalPerspective</span></span><span>-0</span><span class="keyword operator generic raku"><span>.</span></span><span>0</span><span class="keyword operator generic raku"><span>.</span></span><span>1</span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>tar</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>gz</span></span><span>&nbsp;</span><span class="routine name raku"><span>HEAD</span></span></span></div></pre></li>
<li><p>Go to <a href="https://pause.perl.org/">PAUSE</a>, log in and navigate to <code>Upload a file to CPAN</code>.</p>
</li>
<li><p>Make sure you select <code>Perl6</code> as the <em>Target Directory</em>. For your first upload, you have to enter the string <code>Perl6</code> in the text field. On subsequent uploads, you can select the <code>Perl6</code> directory from the selection box right below the input field.</p>
</li>
<li><p>Select your file and click <em>Upload</em>! If everything was fine with your dist, you should see your module tar file in your <code>Perl6</code> directory along with both a <code>META</code> and a <code>README</code> file named after your module filename.</p>
<p><em>Make sure you have a META6.json file in your dist and that the dist version you&#39;re uploading is higher than the currently uploaded version. Those are the most common upload errors.</em></p>
</li>
</ul>
<h2 id="Upload_your_module_to_zef_ecosystem"><a class="u" href="modules.html#___top" title="go to top of document">Upload your module to zef ecosystem</a></h2>
<p>If you want to use the <em>zef</em> ecosystem then you need to register your username using <em>fez</em>.</p>
<ul><li><p>Install fez if you haven&#39;t done so already</p>
</li>
</ul>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="routine name raku"><span>zef</span></span><span>&nbsp;</span><span class="routine name raku"><span>install</span></span><span>&nbsp;</span><span class="routine name raku"><span>fez</span></span></span></div></pre><ul><li><p>Register your user with zef&#39;s ecosystem</p>
</li>
</ul>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="routine name raku"><span>fez</span></span><span>&nbsp;</span><span class="routine name raku"><span>register</span></span></span></div><div class="line"><span class="source raku"><span class="keyword operator generic raku"><span>&gt;</span></span><span class="keyword operator multi-symbol raku"><span>&gt;=</span></span><span>&nbsp;</span><span class="routine name raku"><span>Email</span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="routine name raku"><span>your</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>@</span></span><span class="variable other identifier raku"><span>email</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>com</span></span></span></div><div class="line"><span class="source raku"><span class="keyword operator generic raku"><span>&gt;</span></span><span class="keyword operator multi-symbol raku"><span>&gt;=</span></span><span>&nbsp;</span><span class="routine name raku"><span>Username</span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="routine name raku"><span>username</span></span></span></div><div class="line"><span class="source raku"><span class="keyword operator generic raku"><span>&gt;</span></span><span class="keyword operator multi-symbol raku"><span>&gt;=</span></span><span>&nbsp;</span><span class="routine name raku"><span>Password</span></span><span class="keyword operator generic raku"><span>:</span></span></span></div><div class="line"><span class="source raku"><span class="keyword operator generic raku"><span>&gt;</span></span><span class="keyword operator multi-symbol raku"><span>&gt;=</span></span><span>&nbsp;</span><span class="routine name raku"><span>registration</span></span><span>&nbsp;</span><span class="routine name raku"><span>successful</span></span><span>,&nbsp;</span><span class="routine name raku"><span>requesting</span></span><span>&nbsp;</span><span class="routine name raku"><span>auth</span></span><span>&nbsp;</span><span class="support function raku"><span>key</span></span></span></div><div class="line"><span class="source raku"><span class="keyword operator generic raku"><span>&gt;</span></span><span class="keyword operator multi-symbol raku"><span>&gt;=</span></span><span>&nbsp;</span><span class="routine name raku"><span>login</span></span><span>&nbsp;</span><span class="routine name raku"><span>successful</span></span><span>,&nbsp;</span><span class="routine name raku"><span>you</span></span><span>&nbsp;</span><span class="support function raku"><span>can</span></span><span>&nbsp;</span><span class="routine name raku"><span>now</span></span><span>&nbsp;</span><span class="routine name raku"><span>upload</span></span><span>&nbsp;</span><span class="routine name raku"><span>dists</span></span></span></div></pre><ul><li><p>Now you can upload your module!</p>
</li>
</ul>
<p>Before doing the following, ensure your <code>META6.json</code> file&#39;s &quot;auth&quot; matches &quot;zef:&lt;username&gt;&quot; and then:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="routine name raku"><span>fez</span></span><span>&nbsp;</span><span class="routine name raku"><span>upload</span></span></span></div><div class="line"><span class="source raku"><span class="keyword operator generic raku"><span>&gt;</span></span><span class="keyword operator multi-symbol raku"><span>&gt;=</span></span><span>&nbsp;</span><span class="routine name raku"><span>Vortex</span></span><span>::</span><span class="routine name raku"><span>TotalPerspective</span></span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>ver</span></span><span class="span keyword operator array words raku"><span>&lt;</span></span><span class="string array words raku"><span>0.1.2</span></span><span class="span keyword operator array words raku"><span>&gt;</span></span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>auth</span></span><span class="span keyword operator array words raku"><span>&lt;</span></span><span class="string array words raku"><span>zef:username</span></span><span class="span keyword operator array words raku"><span>&gt;</span></span><span>&nbsp;</span><span class="routine name raku"><span>looks</span></span><span>&nbsp;</span><span class="routine name raku"><span>OK</span></span></span></div><div class="line"><span class="source raku"><span class="keyword operator generic raku"><span>&gt;</span></span><span class="keyword operator multi-symbol raku"><span>&gt;=</span></span><span>&nbsp;</span><span class="routine name raku"><span>Hey</span></span><span class="keyword operator generic raku"><span>!</span></span><span>&nbsp;</span><span class="routine name raku"><span>You</span></span><span>&nbsp;</span><span class="routine name raku"><span>did</span></span><span>&nbsp;</span><span class="routine name raku"><span>it</span></span><span class="keyword operator generic raku"><span>!</span></span><span>&nbsp;</span><span class="routine name raku"><span>Your</span></span><span>&nbsp;</span><span class="routine name raku"><span>dist</span></span><span>&nbsp;</span><span class="entity name type trait raku"><span>will</span></span><span>&nbsp;</span><span class="routine name raku"><span>be</span></span><span>&nbsp;</span><span class="routine name raku"><span>indexed</span></span><span>&nbsp;</span><span class="routine name raku"><span>shortly</span></span></span></div></pre><h2 id="Upload_your_module_to_p6c"><a class="u" href="modules.html#___top" title="go to top of document">Upload your module to p6c</a></h2>
<p>If you want to use the <em>p6c</em> ecosystem you need to use git for your module&#39;s version control. The instructions herein assume that you have a <a href="https://github.com">GitHub</a> account so that your module can be shared from its GitHub repository, however another provider such as <a href="https://about.gitlab.com/">GitLab</a> should work as long as it works in a similar way.</p>
<ul><li><p>Put your project under git version control if you haven&#39;t done so already.</p>
</li>
<li><p>Once you&#39;re happy with your project, create a repository for it on GitHub. See <a href="https://help.github.com/">GitHub&#39;s help docs</a> if necessary. Your GitHub repository should be named the same as your project directory. Immediately after creating the GitHub repo, GitHub shows you how to configure your local repository to know about your GitHub repository.</p>
</li>
<li><p>Push your project to GitHub.</p>
</li>
<li><p>Consider setting up automated testing (see <a href="https://docs.travis-ci.com/user/languages/perl6">https://docs.travis-ci.com/user/languages/perl6</a>).</p>
</li>
<li><p>Create a PR (Pull Request) on <a href="https://github.com/Raku/ecosystem">ecosystem</a> adding your module to META.list, or ping someone on IRC (#raku at libera.chat) to get help having it added.</p>
</li>
<li><p>After the pull request has been accepted, wait for an hour. If your module doesn&#39;t show up on <a href="https://modules.raku.org/">https://modules.raku.org/</a>, please view the log file at <a href="https://modules.raku.org/update.log">https://modules.raku.org/update.log</a> to see if it identifies an error with your module or <code>meta</code> file.</p>
</li>
</ul>
<p><strong>That&#39;s it! Thanks for contributing to the Raku community!</strong></p>
<p>If you&#39;d like to try out installing your module, use the <a name="index-entry-zef"><span class="index-entry">zef</span></a> module installer tool which is included with Rakudo Star Raku:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="routine name raku"><span>zef</span></span><span>&nbsp;</span><span class="routine name raku"><span>install</span></span><span>&nbsp;</span><span class="routine name raku"><span>Vortex</span></span><span>::</span><span class="routine name raku"><span>TotalPerspective</span></span></span></div></pre><p>This will download your module to its own working directory (<code>~/.zef</code>), build it there, and install the module into your local Raku installation directory.</p>
<p>To use <code>Vortex::TotalPerspective</code> from your scripts, just write <code>use Vortex::TotalPerspective</code>, and your Raku implementation will know where to look for the module file(s).</p>
<h1 id="Modules_and_tools_related_to_module_authoring"><a class="u" href="modules.html#___top" title="go to top of document">Modules and tools related to module authoring</a></h1>
<p>You can find a list of modules and tools that aim to improve the experience of writing/test modules at <a href="modules-extra.html">Modules Extra</a></p>
<h2 id="Contact_information"><a class="u" href="modules.html#___top" title="go to top of document">Contact information</a></h2>
<p>To discuss module development in general, or if your module would fill a need in the ecosystem, naming, etc., you can use the <a href="irc://irc.libera.chat/#raku">raku on irc.libera.chat</a> IRC channel.</p>
<p>To discuss toolchain specific questions, you can use the <a href="irc://irc.libera.chat/#raku-toolchain">raku-toolchain on irc.libera.chat</a> IRC channel. A repository to discuss tooling issues is also available at <a href="https://github.com/Raku/toolchain-bikeshed">https://github.com/Raku/toolchain-bikeshed</a>.</p>

        </div>
    </div>

    <aside><ol start="1">
<li><a href="modules.html#fn-ref-1" id="fn-1">[↑]</a> Technically a module is a set of <em>compunits</em> which are usually files but could come from anywhere as long as there is a <em>compunit repository</em> that can provide it. See <a href="https://design.raku.org/S11.html">S11</a>. </li>
<li><a href="modules.html#fn-ref-2" id="fn-2">[↑]</a> If it&#39;s installed, it will reinstall only if the version of the module is newer than the one installed </li>
<li><a href="modules.html#fn-ref-3" id="fn-3">[↑]</a> As <a href="https://design.raku.org/S11.html#Units">synopsis S11</a> says: Confusing? Yes it is. </li>
<li><a href="modules.html#fn-ref-4" id="fn-4">[↑]</a> The old <code>.p6</code> (or <code>.pl6</code>), <code>.pm6</code> (or <code>.pm</code> which is also supported, but discouraged) and <code>.pod6</code> extensions will continue to be supported for 6.e and marked as <strong>deprecated</strong> in 6.f </li>
<li><a href="modules.html#fn-ref-5" id="fn-5">[↑]</a> This change was introduced in late 2016. If you are using versions older than this, behavior will be different </li>
<li><a href="modules.html#fn-ref-6" id="fn-6">[↑]</a> Note, described above is a minimal project directory. If your project contains scripts that you&#39;d like distributed along with your module(s), put them in a <code>bin</code> directory. If you&#39;d like a graphical logo to appear next to your module at the module directory, create a <code>logotype</code> directory and put into it a <code>logo_32x32.png</code> file. At some point, you might also consider adding <code>CONTRIBUTORS</code>, <code>NEWS</code>, <code>TODO</code>, or other files. </li>
<li><a href="modules.html#fn-ref-7" id="fn-7">[↑]</a> Some old modules also provide a <code>source-type</code> field, which was used to indicate the kind of source control system, generally <code>git</code>, which can be used to download the module. However, this field is nowadays ignored by <code>zef</code> and the rest of the tools. </li>
</ol></aside>

    <footer class="pretty-box yellow">
        <p style="display:;">
            Generated from <a href="https://github.com/Raku/doc/edit/master/doc//Language/modules.pod6">https://github.com/Raku/doc/edit/master/doc//Language/modules.pod6</a>.
        </p>
        <p>
            This is a work in progress to document Raku (formerly known as Perl 6), and
            known to be incomplete.
        </p>
        <p>
            <a href="https://github.com/Raku/doc/blob/master/CONTRIBUTING.md#reporting-bugs">
                Please report any issues
            </a>
            Your contribution is appreciated.
        </p>
        <p>
            This documentation is provided under the terms of the
            <a href="https://raw.githubusercontent.com/Raku/doc/master/LICENSE">
                Artistic License 2.0
            </a>. The Camelia image is
            <a href="https://raw.githubusercontent.com/Raku/mu/master/misc/camelia.txt">
                copyright © 2009 by Larry Wall.
            </a>
            <!-- CREDITS -->
            <!--External Link Image by Zapyon, CCA-SA 4.0. Derived from Wikimedia Foundation https://commons.wikimedia.org/wiki/File:External-link-04-bold-12x12.svg -->
        </p>
    </footer>

    <script type="text/javascript" src="../js/app.js%3Fv=1"></script>
    <script type="text/javascript" src="../js/search.js%3Fv=3"></script>
</body>
</html>
