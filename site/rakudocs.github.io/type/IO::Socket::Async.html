<!doctype html>
<html lang="en">
<head>
    <title>class IO::Socket::Async</title>
    <meta charset="UTF-8"/>
    <meta name=viewport content="width=device-width, initial-scale=1">
    <link rel="icon" href="../favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" href="../css/app.css" media="screen" title="default" />
    <noscript> <style> #search { visibility: hidden; } </style> </noscript>
</head>

<body class="pod">

    <div id="___top"></div>

    <div id="header" class="pretty-box green">

        <a href="../index.html">
            <img src="../images/Camelia.svg" alt="»ö«" id="logo" width="62" height="48"/> &nbsp;Raku Documentation
        </a>

        <div id="search" class="ui-widget">
            <div class="green">
                <input placeholder="Loading..." id="query" accesskey="f" title="Enter term to search for (hit Esc to focus)"/>
            </div>
            <p id="not-found-message">
                Not in Index (<a href="./IO::Socket::Async.html" id="try-web-search">try site search</a>)
            </p>
        </div>

        <div class="menu">

            <div class="menu-items dark-green">
                <a class='menu-item darker-green' href='https://raku.org'><strong>Raku homepage</strong></a>
                    <a class="menu-item " href="../language.html"> Language </a>
                    <a class="menu-item selected darker-green" href="../type.html"> Types </a>
                    <a class="menu-item " href="../routine.html"> Routines </a>
                    <a class="menu-item " href="../programs.html"> Programs </a>
                    <a class="menu-item " href="https://web.libera.chat/?channel=#raku"> Chat with us </a>
            </div>

            <div class="menu-items darker-green"><div class="menu-items darker-green"><div class="menu-items darker-green"><div class="menu-items darker-green"><div class="menu-items darker-green">
                    <a class="menu-item" href="../type.html"> All </a>
                    <a class="menu-item" href="../type-basic.html"> Basic </a>
                    <a class="menu-item" href="../type-composite.html"> Composite </a>
                    <a class="menu-item" href="../type-domain-specific.html"> Domain-specific </a>
                    <a class="menu-item" href="../type-exception.html"> Exceptions </a>
            </div></div></div></div></div>

        </div>
    </div>

    <div id="content" class="pretty-box yellow content_fragment">

        <div align="right" style="display:;">
            <button title="Edit this page"  class="pencil" onclick="location='https://github.com/Raku/doc/edit/master/doc//Type/IO/Socket/Async.pod6'">
                <svg width="14px" height="16px" viewBox="0 0 14 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                    <defs></defs>
                    <g id="Octicons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                        <g id="pencil" fill="#000000">
                            <path d="M0,12 L0,15 L3,15 L11,7 L8,4 L0,12 L0,12 Z M3,14 L1,14 L1,12 L2,12 L2,13 L3,13 L3,14 L3,14 Z M13.3,4.7 L12,6 L9,3 L10.3,1.7 C10.69,1.31 11.32,1.31 11.71,1.7 L13.3,3.29 C13.69,3.68 13.69,4.31 13.3,4.7 L13.3,4.7 Z" id="Shape"></path>
                        </g>
                    </g>
                </svg>
            </button>
        </div>

        <h1 class="title">class IO::Socket::Async</h1>
        <p class="subtitle">Asynchronous socket in TCP or UDP</p>

        <nav class="indexgroup">
<table id="TOC">
<caption><h2 id="TOC_Title">Table of Contents</h2></caption>
<tr class="toc-level-1"><td class="toc-number">1</td><td class="toc-text"><a href="./IO::Socket::Async.html#Methods">Methods</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">1.1</td><td class="toc-text"><a href="./IO::Socket::Async.html#method_connect">method connect</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">1.2</td><td class="toc-text"><a href="./IO::Socket::Async.html#method_listen">method listen</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">1.3</td><td class="toc-text"><a href="./IO::Socket::Async.html#method_udp">method udp</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">1.4</td><td class="toc-text"><a href="./IO::Socket::Async.html#method_bind-udp">method bind-udp</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">1.5</td><td class="toc-text"><a href="./IO::Socket::Async.html#method_print">method print</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">1.6</td><td class="toc-text"><a href="./IO::Socket::Async.html#method_print-to">method print-to</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">1.7</td><td class="toc-text"><a href="./IO::Socket::Async.html#method_write">method write</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">1.8</td><td class="toc-text"><a href="./IO::Socket::Async.html#method_write-to">method write-to</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">1.9</td><td class="toc-text"><a href="./IO::Socket::Async.html#method_Supply">method Supply</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">1.10</td><td class="toc-text"><a href="./IO::Socket::Async.html#method_close">method close</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">1.11</td><td class="toc-text"><a href="./IO::Socket::Async.html#method_socket-host">method socket-host</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">1.12</td><td class="toc-text"><a href="./IO::Socket::Async.html#method_peer-host">method peer-host</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">1.13</td><td class="toc-text"><a href="./IO::Socket::Async.html#method_socket-port">method socket-port</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">1.14</td><td class="toc-text"><a href="./IO::Socket::Async.html#method_peer-port">method peer-port</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">1.15</td><td class="toc-text"><a href="./IO::Socket::Async.html#method_native-descriptor">method native-descriptor</a></td></tr>
<tr class="toc-level-1"><td class="toc-number">2</td><td class="toc-text"><a href="./IO::Socket::Async.html#Type_Graph">Type Graph</a></td></tr>

</table>
</nav>

        <div class="pod-body ">
            <pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="meta class raku"><span class="storage type class raku"><span>class</span></span><span>&nbsp;</span><span class="entity name type class raku"><span>IO::Socket::Async</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span><span>}</span></span></span></span></div></pre><p><code>IO::Socket::Async</code> provides asynchronous sockets, for both the server and the client side.</p>
<p>Here is a simple example of a simple &quot;hello world&quot; HTTP server that listens on port 3333:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="keyword control flowcontrol raku"><span>react</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control flowcontrol raku"><span>whenever</span></span><span>&nbsp;</span><span class="support type raku"><span>IO</span></span><span>::</span><span class="routine name raku"><span>Socket</span></span><span>::</span><span class="routine name raku"><span>Async</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>listen</span></span><span>(</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>0.0.0.0</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="constant numeric raku"><span>3333</span></span><span>)&nbsp;</span><span class="keyword operator multi-symbol raku"><span>-&gt;</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>conn</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control flowcontrol raku"><span>whenever</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>conn</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support type raku"><span>Supply</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>lines</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>-&gt;</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>line</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>conn</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>print</span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="string quoted heredoc raku"><span class="string quoted construct raku"><span>qq</span></span><span class="support function adverb raku"><span>:heredoc</span></span><span>/</span><span class="entity other attribute-name heredoc delimiter raku"><span>END</span></span><span>/</span><span class="meta heredoc continuation raku"><span>;</span><span>&nbsp;</span></span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span class="string quoted heredoc raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HTTP/1.1&nbsp;200&nbsp;OK</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span class="string quoted heredoc raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Content-Type:&nbsp;text/html;&nbsp;charset=UTF-8</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span class="string quoted heredoc raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Content-Encoding:&nbsp;UTF-8</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span class="string quoted heredoc raku"><span>&nbsp;</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span class="string quoted heredoc raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;html&gt;</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span class="string quoted heredoc raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;body&gt;</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span class="string quoted heredoc raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;h1&gt;Hello&nbsp;World!&lt;/h1&gt;</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span class="string quoted heredoc raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;</span><span class="meta interpolation raku"><span class="punctuation section embedded begin raku"><span>{</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>line</span></span></span><span>&nbsp;</span><span class="punctuation section embedded end raku"><span>}</span></span></span><span>&lt;/p&gt;</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span class="string quoted heredoc raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/body&gt;</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span class="string quoted heredoc raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/html&gt;</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span class="string quoted heredoc raku"><span class="entity other attribute-name heredoc delimiter raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;END</span></span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>conn</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>close</span></span><span>;</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control closure trait raku"><span>CATCH</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control flowcontrol raku"><span>default</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>.</span><span>^</span></span><span class="support function raku"><span>name</span></span><span>,&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>:&nbsp;</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="keyword operator generic raku"><span>.</span></span><span class="support type raku"><span>Str</span></span><span>;</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>handled&nbsp;in&nbsp;</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil interpolated raku"><span>?</span></span><span>LINE</span></span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div></pre><p>And a client that connects to it, and prints out what the server answers:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="keyword control flowcontrol raku"><span>await</span></span><span>&nbsp;</span><span class="support type raku"><span>IO</span></span><span>::</span><span class="routine name raku"><span>Socket</span></span><span>::</span><span class="routine name raku"><span>Async</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>connect</span></span><span>(</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>127.0.0.1</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="constant numeric raku"><span>3333</span></span><span>)</span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>then</span></span><span>(&nbsp;</span><span class="keyword operator multi-symbol raku"><span>-&gt;</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>promise</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control repeat raku"><span>given</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>promise</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>result</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>print</span></span><span>(</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Lorem&nbsp;ipsum&nbsp;dolor&nbsp;sit&nbsp;amet,&nbsp;consectetur&nbsp;adipiscing&nbsp;elit.</span><span class="constant character escape raku"><span>\n</span></span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>);</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control flowcontrol raku"><span>react</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control flowcontrol raku"><span>whenever</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>.</span></span><span class="support type raku"><span>Supply</span></span><span>()&nbsp;</span><span class="keyword operator multi-symbol raku"><span>-&gt;</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>v</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>v</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>print</span></span><span>;</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>done</span></span><span>;</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>close</span></span><span>;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span><span>);</span></span></div></pre><p><a href="CompUnit.html">IO::Socket::Async</a> can also send and receive <a href="https://en.wikipedia.org/wiki/User_Datagram_Protocol">UDP</a> messages An example server that outputs all the data it receives would be:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>socket</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="support type raku"><span>IO</span></span><span>::</span><span class="routine name raku"><span>Socket</span></span><span>::</span><span class="routine name raku"><span>Async</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>bind-udp</span></span><span>(</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>localhost</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="constant numeric raku"><span>3333</span></span><span>);</span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="keyword control flowcontrol raku"><span>react</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control flowcontrol raku"><span>whenever</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>socket</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support type raku"><span>Supply</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>-&gt;</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>v</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control conditional raku"><span>if</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>v</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>chars</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>&gt;</span></span><span>&nbsp;</span><span class="constant numeric raku"><span>0</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>v</span></span></span><span>;</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div></pre><p>And an associated client might be:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>socket</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="support type raku"><span>IO</span></span><span>::</span><span class="routine name raku"><span>Socket</span></span><span>::</span><span class="routine name raku"><span>Async</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>udp</span></span><span>();</span></span></div><div class="line"><span class="source raku"><span class="keyword control flowcontrol raku"><span>await</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>socket</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>print-to</span></span><span>(</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>localhost</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="constant numeric raku"><span>3333</span></span><span>,&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Hello,&nbsp;Raku!</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>);</span></span></div></pre><p>The <a href="../language/phasers.html#CATCH"><code>CATCH</code> phaser</a> can be included to deal specifically with problems that might occur in this kind of sockets, such as a port being already taken:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="keyword control flowcontrol raku"><span>react</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control flowcontrol raku"><span>whenever</span></span><span>&nbsp;</span><span class="support type raku"><span>IO</span></span><span>::</span><span class="routine name raku"><span>Socket</span></span><span>::</span><span class="routine name raku"><span>Async</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>listen</span></span><span>(</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>0.0.0.0</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="constant numeric raku"><span>3000</span></span><span>)&nbsp;</span><span class="keyword operator multi-symbol raku"><span>-&gt;</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>conn</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control flowcontrol raku"><span>whenever</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>conn</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support type raku"><span>Supply</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>lines</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>-&gt;</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>line</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>conn</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>print</span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="string quoted heredoc raku"><span class="string quoted construct raku"><span>qq</span></span><span class="support function adverb raku"><span>:heredoc</span></span><span>/</span><span class="entity other attribute-name heredoc delimiter raku"><span>END</span></span><span>/</span><span class="meta heredoc continuation raku"><span>;</span><span>&nbsp;</span></span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span class="string quoted heredoc raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HTTP/1.1&nbsp;200&nbsp;OK</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span class="string quoted heredoc raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Content-Type:&nbsp;text/html;&nbsp;charset=UTF-8</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span class="string quoted heredoc raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Content-Encoding:&nbsp;UTF-8</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span class="string quoted heredoc raku"><span>&nbsp;</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span class="string quoted heredoc raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;html&gt;</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span class="string quoted heredoc raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;body&gt;</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span class="string quoted heredoc raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;h1&gt;Hello&nbsp;World!&lt;/h1&gt;</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span class="string quoted heredoc raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;p&gt;</span><span class="meta interpolation raku"><span class="punctuation section embedded begin raku"><span>{</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>line</span></span></span><span>&nbsp;</span><span class="punctuation section embedded end raku"><span>}</span></span></span><span>&lt;/p&gt;</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span class="string quoted heredoc raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/body&gt;</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span class="string quoted heredoc raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/html&gt;</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span class="string quoted heredoc raku"><span class="entity other attribute-name heredoc delimiter raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;END</span></span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>conn</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>close</span></span><span>;</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control closure trait raku"><span>QUIT</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control flowcontrol raku"><span>default</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>.</span><span>^</span></span><span class="support function raku"><span>name</span></span><span>,&nbsp;</span><span class="string quoted single single raku"><span class="punctuation definition string begin raku"><span>&#39;</span></span><span>→&nbsp;</span><span class="punctuation definition string end raku"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="keyword operator generic raku"><span>.</span></span><span class="support type raku"><span>Str</span></span><span>;</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>handled&nbsp;in&nbsp;line&nbsp;</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="support class twigil interpolated raku"><span>?</span></span><span>LINE</span></span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;Will&nbsp;print&nbsp;this,&nbsp;if&nbsp;address&nbsp;3000&nbsp;is&nbsp;already&nbsp;in&nbsp;use:</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;X::AdHoc→&nbsp;address&nbsp;already&nbsp;in&nbsp;use</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;handled&nbsp;in&nbsp;23</span><span>&nbsp;</span></span></span></div></pre><p>Main difference with using other phasers such as <code>CATCH</code> is that this kind of exception will be caught within the <code>whenever</code> block and will put exiting the program, or not, under your control.</p>
<h1 id="Methods"><a class="u" href="./IO::Socket::Async.html#___top" title="go to top of document">Methods</a></h1>
<p>The <a href="./IO::Socket::Async.html">IO::Socket::Async</a> cannot be constructed directly, either <code>connect</code> or <code>listen</code> (for TCP connections) or <code>udp</code> or <code>bind-udp</code> (for UDP data) should be used to create a client or a server respectively.</p>
<h2 id="method_connect"><a class="u" href="./IO::Socket::Async.html#___top" title="go to top of document">method connect</a></h2>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>connect</span></span><span>(</span><span class="support type raku"><span>Str</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>host</span></span></span><span>,&nbsp;</span><span class="support type raku"><span>Int</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>port</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>--&gt;</span></span><span>&nbsp;</span><span class="support type raku"><span>Promise</span></span><span>)</span></span></div></pre><p>Attempts to connect to the TCP server specified by <code>$host</code> and <code>$port</code>, returning a <a href="Promise.html">Promise</a> that will either be kept with a connected <a href="./IO::Socket::Async.html">IO::Socket::Async</a> or broken if the connection cannot be made.</p>
<h2 id="method_listen"><a class="u" href="./IO::Socket::Async.html#___top" title="go to top of document">method listen</a></h2>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>listen</span></span><span>(</span><span class="support type raku"><span>Str</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>host</span></span></span><span>,&nbsp;</span><span class="support type raku"><span>Int</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>port</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>--&gt;</span></span><span>&nbsp;</span><span class="support type raku"><span>Supply</span></span><span>)</span></span></div></pre><p>Creates a listening socket on the specified <code>$host</code> and <code>$port</code>, returning a <a href="Supply.html">Supply</a> to which the accepted client <a href="./IO::Socket::Async.html">IO::Socket::Async</a>s will be emitted. This <a href="Supply.html">Supply</a> should be tapped start listening for client connections. You can set <code>$port</code> to <code>0</code> if you want the operating system to find one for you.</p>
<p>The <a href="./IO::Socket::Async::ListenSocket.html">IO::Socket::Async::ListenSocket</a> returned by calling the <a href="Supply.html#method_tap">tap</a> method on the supply returned represents the underlying listening TCP socket, which can be closed using its <a href="Tap.html#method_close">close</a> method. If <code>$port</code> was set to <code>0</code>, you can get the port the socket ended up with using its <a href="./IO::Socket::Async::ListenSocket.html#method_socket-port">socket-port</a> method.</p>
<h2 id="method_udp"><a class="u" href="./IO::Socket::Async.html#___top" title="go to top of document">method udp</a></h2>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>udp</span></span><span>(</span><span class="support type raku"><span>IO</span></span><span>::</span><span class="routine name raku"><span>Socket</span></span><span>::</span><span class="routine name raku"><span>Async</span></span><span class="meta adverb definedness raku"><span class="keyword operator adverb raku"><span>:</span></span><span class="keyword other special-method definedness raku"><span>U</span></span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>broadcast</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>--&gt;</span></span><span>&nbsp;</span><span class="support type raku"><span>IO</span></span><span>::</span><span class="routine name raku"><span>Socket</span></span><span>::</span><span class="routine name raku"><span>Async</span></span><span>)</span></span></div></pre><p>Returns an initialized <code>IO::Socket::Async</code> client object that is configured to send UDP messages using <code>print-to</code> or <code>write-to</code>. The <code>:broadcast</code> adverb will set the <code>SO_BROADCAST</code> option which will allow the socket to send packets to a broadcast address.</p>
<h2 id="method_bind-udp"><a class="u" href="./IO::Socket::Async.html#___top" title="go to top of document">method bind-udp</a></h2>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>bind-udp</span></span><span>(</span><span class="support type raku"><span>IO</span></span><span>::</span><span class="routine name raku"><span>Socket</span></span><span>::</span><span class="routine name raku"><span>Async</span></span><span class="meta adverb definedness raku"><span class="keyword operator adverb raku"><span>:</span></span><span class="keyword other special-method definedness raku"><span>U</span></span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="support type raku"><span>Str</span></span><span>()&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>host</span></span></span><span>,&nbsp;</span><span class="support type raku"><span>Int</span></span><span>()&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>port</span></span></span><span>,&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>broadcast</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>--&gt;</span></span><span>&nbsp;</span><span class="support type raku"><span>IO</span></span><span>::</span><span class="routine name raku"><span>Socket</span></span><span>::</span><span class="routine name raku"><span>Async</span></span><span>)</span></span></div></pre><p>This returns an initialized <code>IO::Socket::Async</code> server object that is configured to receive UDP messages sent to the specified <code>$host</code> and <code>$port</code> and is equivalent to <code>listen</code> for a TCP socket. The <code>:broadcast</code> adverb can be specified to allow the receipt of messages sent to the broadcast address.</p>
<h2 id="method_print"><a class="u" href="./IO::Socket::Async.html#___top" title="go to top of document">method print</a></h2>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>print</span></span><span>(</span><span class="support type raku"><span>IO</span></span><span>::</span><span class="routine name raku"><span>Socket</span></span><span>::</span><span class="routine name raku"><span>Async</span></span><span class="meta adverb definedness raku"><span class="keyword operator adverb raku"><span>:</span></span><span class="keyword other special-method definedness raku"><span>D</span></span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="support type raku"><span>Str</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>str</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>--&gt;</span></span><span>&nbsp;</span><span class="support type raku"><span>Promise</span></span><span>)</span></span></div></pre><p>Attempt to send <code>$str</code> on the <a href="./IO::Socket::Async.html">IO::Socket::Async</a> that will have been obtained indirectly via <code>connect</code> or <code>listen</code>, returning a <a href="Promise.html">Promise</a> that will be kept with the number of bytes sent or broken if there was an error sending.</p>
<h2 id="method_print-to"><a class="u" href="./IO::Socket::Async.html#___top" title="go to top of document">method print-to</a></h2>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>print-to</span></span><span>(</span><span class="support type raku"><span>IO</span></span><span>::</span><span class="routine name raku"><span>Socket</span></span><span>::</span><span class="routine name raku"><span>Async</span></span><span class="meta adverb definedness raku"><span class="keyword operator adverb raku"><span>:</span></span><span class="keyword other special-method definedness raku"><span>D</span></span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="support type raku"><span>Str</span></span><span>()&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>host</span></span></span><span>,&nbsp;</span><span class="support type raku"><span>Int</span></span><span>()&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>port</span></span></span><span>,&nbsp;</span><span class="support type raku"><span>Str</span></span><span>()&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>str</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>--&gt;</span></span><span>&nbsp;</span><span class="support type raku"><span>Promise</span></span><span>)</span></span></div></pre><p>This is the equivalent of <code>print</code> for UDP sockets that have been created with the <code>udp</code> method, it will try send a UDP message of <code>$str</code> to the specified <code>$host</code> and <code>$port</code> returning a <a href="Promise.html">Promise</a> that will be kept when the data is successfully sent or broken if it was unable to send the data. In order to send to a broadcast address the <code>:broadcast</code> flag must have been specified when the socket was created.</p>
<h2 id="method_write"><a class="u" href="./IO::Socket::Async.html#___top" title="go to top of document">method write</a></h2>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>write</span></span><span>(</span><span class="support type raku"><span>IO</span></span><span>::</span><span class="routine name raku"><span>Socket</span></span><span>::</span><span class="routine name raku"><span>Async</span></span><span class="meta adverb definedness raku"><span class="keyword operator adverb raku"><span>:</span></span><span class="keyword other special-method definedness raku"><span>D</span></span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="support type raku"><span>Blob</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>b</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>--&gt;</span></span><span>&nbsp;</span><span class="support type raku"><span>Promise</span></span><span>)</span></span></div></pre><p>This method will attempt to send the bytes in <code>$b</code> on the <a href="./IO::Socket::Async.html">IO::Socket::Async</a> that will have been obtained indirectly via <code>connect</code> or <code>listen</code>, returning a <a href="Promise.html">Promise</a> that will be kept with the number of bytes sent or broken if there was an error sending.</p>
<h2 id="method_write-to"><a class="u" href="./IO::Socket::Async.html#___top" title="go to top of document">method write-to</a></h2>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>write-to</span></span><span>(</span><span class="support type raku"><span>IO</span></span><span>::</span><span class="routine name raku"><span>Socket</span></span><span>::</span><span class="routine name raku"><span>Async</span></span><span class="meta adverb definedness raku"><span class="keyword operator adverb raku"><span>:</span></span><span class="keyword other special-method definedness raku"><span>D</span></span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="support type raku"><span>Str</span></span><span>()&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>host</span></span></span><span>,&nbsp;</span><span class="support type raku"><span>Int</span></span><span>()&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>port</span></span></span><span>,&nbsp;</span><span class="support type raku"><span>Blob</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>b</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>--&gt;</span></span><span>&nbsp;</span><span class="support type raku"><span>Promise</span></span><span>)</span></span></div></pre><p>This is the equivalent of <code>write</code> for UDP sockets that have been created with the <code>udp</code> method. It will try send a UDP message comprised of the bytes in the <a href="Blob.html">Blob</a> <code>$b</code> to the specified <code>$host</code> and <code>$port</code> returning a <a href="Promise.html">Promise</a> that will be kept when the data is successfully sent or broken if it was unable to send the data. In order to send to a broadcast address the <code>:broadcast</code> flag must have been specified when the socket was created.</p>
<h2 id="method_Supply"><a class="u" href="./IO::Socket::Async.html#___top" title="go to top of document">method Supply</a></h2>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>Supply</span></span><span>(</span><span class="keyword operator generic raku"><span>:</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>bin</span></span></span><span>,&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>buf</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;</span><span class="support type raku"><span>buf8</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>new</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>--&gt;</span></span><span>&nbsp;</span><span class="support type raku"><span>Supply</span></span><span>)</span></span></div></pre><p>Returns a <a href="Supply.html">Supply</a> which can be tapped to obtain the data read from the connected <a href="./IO::Socket::Async.html">IO::Socket::Async</a> as it arrives. By default the data will be emitted as characters, but if the <code>:bin</code> adverb is provided a <a href="Buf.html">Buf</a> of bytes will be emitted instead, optionally in this case you can provide your own <code>Buf</code> with the <code>:buf</code> named parameter.</p>
<p>A UDP socket in character mode will treat each packet as a complete message and decode it. In the event of a decoding error, the <code>Supply</code> will <code>quit</code>.</p>
<p>On the other hand, a TCP socket treats the incoming packets as part of a stream, and feeds the incoming bytes into a streaming decoder. It then emits whatever characters the decoder considers ready. Since strings work at grapheme level in Raku, this means that only known complete graphemes will be emitted. For example, if the UTF-8 encoding were being used and the last byte in the packet decoded to <code>a</code>, this would not be emitted since the next packet may include a combining character that should form a single grapheme together with the <code>a</code>. Control characters (such as <code>\n</code>) always serve as grapheme boundaries, so any text-based protocols that use newlines or null bytes as terminators will not need special consideration. A TCP socket will also <code>quit</code> upon a decoding error.</p>
<h2 id="method_close"><a class="u" href="./IO::Socket::Async.html#___top" title="go to top of document">method close</a></h2>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>close</span></span><span>(</span><span class="support type raku"><span>IO</span></span><span>::</span><span class="routine name raku"><span>Socket</span></span><span>::</span><span class="routine name raku"><span>Async</span></span><span class="meta adverb definedness raku"><span class="keyword operator adverb raku"><span>:</span></span><span class="keyword other special-method definedness raku"><span>D</span></span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;)</span></span></div></pre><p>Close the connected client <a href="./IO::Socket::Async.html">IO::Socket::Async</a> which will have been obtained from the <code>listen</code> <a href="Supply.html">Supply</a> or the <code>connect</code> <a href="Promise.html">Promise</a>.</p>
<p>In order to close the underlying listening socket created by <code>listen</code> you can <code>close</code> the <a href="./IO::Socket::Async::ListenSocket.html">IO::Socket::Async::ListenSocket</a>. See <a href="./IO::Socket::Async.html#method_listen">listen</a> for examples.</p>
<h2 id="method_socket-host"><a class="u" href="./IO::Socket::Async.html#___top" title="go to top of document">method socket-host</a></h2>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>socket-host</span></span><span>(</span><span class="keyword operator multi-symbol raku"><span>--&gt;</span></span><span>&nbsp;</span><span class="support type raku"><span>Str</span></span><span>)</span></span></div></pre><p>Returns the IP address of the local end of this socket.</p>
<h2 id="method_peer-host"><a class="u" href="./IO::Socket::Async.html#___top" title="go to top of document">method peer-host</a></h2>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>peer-host</span></span><span>(</span><span class="keyword operator multi-symbol raku"><span>--&gt;</span></span><span>&nbsp;</span><span class="support type raku"><span>Str</span></span><span>)</span></span></div></pre><p>Returns the IP address of the remote end of this socket.</p>
<h2 id="method_socket-port"><a class="u" href="./IO::Socket::Async.html#___top" title="go to top of document">method socket-port</a></h2>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>socket-port</span></span><span>(</span><span class="keyword operator multi-symbol raku"><span>--&gt;</span></span><span>&nbsp;</span><span class="support type raku"><span>Int</span></span><span>)</span></span></div></pre><p>Returns the port of the local end of this socket.</p>
<h2 id="method_peer-port"><a class="u" href="./IO::Socket::Async.html#___top" title="go to top of document">method peer-port</a></h2>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>peer-port</span></span><span>(</span><span class="keyword operator multi-symbol raku"><span>--&gt;</span></span><span>&nbsp;</span><span class="support type raku"><span>Int</span></span><span>)</span></span></div></pre><p>Returns the port of the remote end of this socket.</p>
<h2 id="method_native-descriptor"><a class="u" href="./IO::Socket::Async.html#___top" title="go to top of document">method native-descriptor</a></h2>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>method</span></span><span>&nbsp;</span><span class="entity name function raku"><span>native-descriptor</span></span><span>(</span><span class="keyword operator multi-symbol raku"><span>--&gt;</span></span><span>&nbsp;</span><span class="support type raku"><span>Int</span></span><span>)</span></span></div></pre><p>Returns the file descriptor of this socket.</p>
<h1 id="Type_Graph"><a class="u" href="./IO::Socket::Async.html#___top" title="go to top of document">Type Graph</a></h1>
<figure>
  <figcaption>Type relations for <code>404</code></figcaption>
  <svg></svg>
  <p class="fallback">
    <a
      rel="alternate"
      href="https://rakudocs.github.io/images/type-graph-404.svg"
      type="image/svg+xml"
      >Expand above chart</a
    >
  </p>
</figure>

        </div>
    </div>

    

    <footer class="pretty-box yellow">
        <p style="display:;">
            Generated from <a href="https://github.com/Raku/doc/edit/master/doc//Type/IO/Socket/Async.pod6">https://github.com/Raku/doc/edit/master/doc//Type/IO/Socket/Async.pod6</a>.
        </p>
        <p>
            This is a work in progress to document Raku (formerly known as Perl 6), and
            known to be incomplete.
        </p>
        <p>
            <a href="https://github.com/Raku/doc/blob/master/CONTRIBUTING.md#reporting-bugs">
                Please report any issues
            </a>
            Your contribution is appreciated.
        </p>
        <p>
            This documentation is provided under the terms of the
            <a href="https://raw.githubusercontent.com/Raku/doc/master/LICENSE">
                Artistic License 2.0
            </a>. The Camelia image is
            <a href="https://raw.githubusercontent.com/Raku/mu/master/misc/camelia.txt">
                copyright © 2009 by Larry Wall.
            </a>
            <!-- CREDITS -->
            <!--External Link Image by Zapyon, CCA-SA 4.0. Derived from Wikimedia Foundation https://commons.wikimedia.org/wiki/File:External-link-04-bold-12x12.svg -->
        </p>
    </footer>

    <script type="text/javascript" src="../js/app.js%3Fv=1"></script>
    <script type="text/javascript" src="../js/search.js%3Fv=3"></script>
</body>
</html>
