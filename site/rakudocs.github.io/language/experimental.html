<!doctype html>
<html lang="en">
<head>
    <title>Experimental features</title>
    <meta charset="UTF-8"/>
    <meta name=viewport content="width=device-width, initial-scale=1">
    <link rel="icon" href="../favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" href="../css/app.css" media="screen" title="default" />
    <noscript> <style> #search { visibility: hidden; } </style> </noscript>
</head>

<body class="pod">

    <div id="___top"></div>

    <div id="header" class="pretty-box green">

        <a href="../index.html">
            <img src="../images/Camelia.svg" alt="»ö«" id="logo" width="62" height="48"/> &nbsp;Raku Documentation
        </a>

        <div id="search" class="ui-widget">
            <div class="green">
                <input placeholder="Loading..." id="query" accesskey="f" title="Enter term to search for (hit Esc to focus)"/>
            </div>
            <p id="not-found-message">
                Not in Index (<a href="experimental.html" id="try-web-search">try site search</a>)
            </p>
        </div>

        <div class="menu">

            <div class="menu-items dark-green">
                <a class='menu-item darker-green' href='https://raku.org'><strong>Raku homepage</strong></a>
                    <a class="menu-item selected darker-green" href="../language.html"> Language </a>
                    <a class="menu-item " href="../type.html"> Types </a>
                    <a class="menu-item " href="../routine.html"> Routines </a>
                    <a class="menu-item " href="../programs.html"> Programs </a>
                    <a class="menu-item " href="https://web.libera.chat/?channel=#raku"> Chat with us </a>
            </div>

            
            

        </div>
    </div>

    <div id="content" class="pretty-box yellow content_fragment">

        <div align="right" style="display:;">
            <button title="Edit this page"  class="pencil" onclick="location='https://github.com/Raku/doc/edit/master/doc//Language/experimental.pod6'">
                <svg width="14px" height="16px" viewBox="0 0 14 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                    <defs></defs>
                    <g id="Octicons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                        <g id="pencil" fill="#000000">
                            <path d="M0,12 L0,15 L3,15 L11,7 L8,4 L0,12 L0,12 Z M3,14 L1,14 L1,12 L2,12 L2,13 L3,13 L3,14 L3,14 Z M13.3,4.7 L12,6 L9,3 L10.3,1.7 C10.69,1.31 11.32,1.31 11.71,1.7 L13.3,3.29 C13.69,3.68 13.69,4.31 13.3,4.7 L13.3,4.7 Z" id="Shape"></path>
                        </g>
                    </g>
                </svg>
            </button>
        </div>

        <h1 class="title">Experimental features</h1>
        <p class="subtitle">Preview of upcoming new language features available for user evaluation</p>

        <nav class="indexgroup">
<table id="TOC">
<caption><h2 id="TOC_Title">Table of Contents</h2></caption>
<tr class="toc-level-2"><td class="toc-number">0.1</td><td class="toc-text"><a href="experimental.html#pack">pack</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">0.2</td><td class="toc-text"><a href="experimental.html#macros">macros</a></td></tr>
<tr class="toc-level-2"><td class="toc-number">0.3</td><td class="toc-text"><a href="experimental.html#cached">cached</a></td></tr>

</table>
</nav>

        <div class="pod-body ">
            <p>During Raku development, new features are often made available for users as experimental before their design is completed. Eventually these features may be made part of the Raku specification. To use these features, one uses the <code>experimental</code> pragma in program source code, for example, like this:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="keyword other include raku"><span>use</span></span><span>&nbsp;</span><span class="constant language pragma raku"><span>experimental</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>macros</span></span><span>;</span></span></div></pre><p>These are the features that, for the time being, are experimental.</p>
<h2 id="pack"><a class="u" href="experimental.html#___top" title="go to top of document"><a name="index-entry-pack-pack"><span class="index-entry"><strong>pack</strong></span></a></a></h2>
<p>Pack is a feature that allows binary serialization of general data structures, and is inherited from <a href="http://perldoc.perl.org/functions/pack.html">Perl&#39;s pack</a>. The <code>pack</code> order creates a <code>Buf</code> by packing data structures in a certain way given by a <em>packing string</em> with the options shown <a href="../type/Blob.html#method_unpack">in the description of <code>unpack</code></a>. You turn it on by inserting this pragma at the beginning of your program:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="keyword other include raku"><span>use</span></span><span>&nbsp;</span><span class="constant language pragma raku"><span>experimental</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>pack</span></span><span>;</span></span></div></pre><p>For instance, we can pack numbers interpreting them as hexadecimal (<code>H</code>) with the pattern repeating until there are no more elements (<code>*</code>):</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="keyword other include raku"><span>use</span></span><span>&nbsp;</span><span class="constant language pragma raku"><span>experimental</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>pack</span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="support function raku"><span>pack</span></span><span>(</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>H*</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>,&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>414243</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>)</span><span class="keyword operator generic raku"><span>.</span></span><span class="routine name raku"><span>contents</span></span><span>;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;&nbsp;OUTPUT:&nbsp;«(65&nbsp;66&nbsp;67)␤»</span><span>&nbsp;</span></span></span></div></pre><p>There is a corresponding <code>unpack</code> routine that does exactly the opposite.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="keyword other include raku"><span>use</span></span><span>&nbsp;</span><span class="constant language pragma raku"><span>experimental</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>pack</span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>buf</span></span></span><span class="storage modifier assignment raku"><span>=</span></span><span class="support type raku"><span>Buf</span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>new</span></span><span>(</span><span class="constant numeric raku"><span>65</span></span><span>,</span><span class="constant numeric raku"><span>66</span></span><span>,</span><span class="constant numeric raku"><span>67</span></span><span>);</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>buf</span></span></span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>unpack</span></span><span>(</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>H*</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>);&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«414243␤»</span><span>&nbsp;</span></span></span></div></pre><p>Not all of the symbols above are guaranteed to be implemented, and the roadmap does not include a fixed date for getting out of that stage.</p>
<p>Please see also documentation for <a href="../type/Blob.html#sub_pack"><code>pack</code></a> and <a href="../type/Blob.html#method_unpack"><code>unpack</code></a> in the <code>Blob</code> page.</p>
<h2 id="macros"><a class="u" href="experimental.html#___top" title="go to top of document"><a name="index-entry-macros-macros"><span class="index-entry"><strong>macros</strong></span></a></a></h2>
<p><a href="https://en.wikipedia.org/wiki/Macro_(computer_science)">Macros</a> are code-generating routines, that generate code in compile time, before the program is executed. In Raku its use is still experimental and it needs to be turned on via the pragma</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="keyword other include raku"><span>use</span></span><span>&nbsp;</span><span class="constant language pragma raku"><span>experimental</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>macros</span></span><span>;</span></span></div></pre><p>Macro processing happens during parsing time. A macro generates an abstract syntax tree, which is grafted into the program syntax tree. <code>quasi</code> is the routine that performs this task.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>macro</span></span><span>&nbsp;</span><span class="entity name function raku"><span>does-nothing</span></span><span>()&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>quasi</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="routine name raku"><span>does-nothing</span></span><span>;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«»</span><span>&nbsp;</span></span></span></div></pre><p><a name="index-entry-quasi_(macros)"></a> Macros are a kind of routine, so they can take arguments in exactly the same way, and act also in almost the same way.</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>macro</span></span><span>&nbsp;</span><span class="entity name function raku"><span>is-mighty</span></span><span>(&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>who</span></span></span><span>&nbsp;)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>quasi</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>who</span></span><span>&nbsp;is&nbsp;mighty!</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="routine name raku"><span>is-mighty</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Freija</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«&nbsp;&quot;Freija&quot;&nbsp;is&nbsp;mighty!␤»</span><span>&nbsp;</span></span></span></div></pre><p><a name="index-entry-unquoting_(macros)"></a> <a name="index-entry-{{{}}}_(macros)"></a> &quot;Almost&quot; accounts for the fact that the argument is inserted as a literal, including the quotes. Please note that we can also eliminate the parentheses for a macro call, following the same rules as a routine. You can use the unquoting construct <code>{{{}}}</code> to get rid of this kind of thing:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>macro</span></span><span>&nbsp;</span><span class="entity name function raku"><span>is-mighty</span></span><span>(&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>who</span></span></span><span>&nbsp;)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>quasi</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>who</span></span></span><span class="punctuation definition block raku"><span>}</span></span></span><span class="punctuation definition block raku"><span>}</span></span></span><span class="punctuation definition block raku"><span>}</span></span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>~</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>&nbsp;is&nbsp;mighty!</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="routine name raku"><span>is-mighty</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Freija</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;&nbsp;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«Freija&nbsp;is&nbsp;mighty!␤»</span><span>&nbsp;</span></span></span></div></pre><p>Since macro expansion happens at parse time, care must be taken when using external variables in them:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="keyword other include raku"><span>use</span></span><span>&nbsp;</span><span class="constant language pragma raku"><span>experimental</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>macros</span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>called</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>macro</span></span><span>&nbsp;</span><span class="entity name function raku"><span>called</span></span><span>()&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>called</span></span></span><span class="keyword operator multi-symbol raku"><span>++</span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>quasi</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Called</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>&nbsp;</span><span class="punctuation definition block raku"><span>}</span></span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="routine name raku"><span>called</span></span><span>()&nbsp;</span><span class="keyword operator generic raku"><span>~</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>&nbsp;</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>called</span></span><span>&nbsp;times</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="routine name raku"><span>called</span></span><span>()&nbsp;</span><span class="keyword operator generic raku"><span>~</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>&nbsp;</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>called</span></span><span>&nbsp;times</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;&nbsp;</span><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;OUTPUT:&nbsp;«Called&nbsp;2&nbsp;times␤Called&nbsp;2&nbsp;times␤»</span><span>&nbsp;</span></span></span></div></pre><p>Since macros are expanded at parse time, <code>$called</code> will be the result when runtime starts, which is already <code>2</code>, as printed. Initializing <code>$called</code> with 0, however, will make this print <code>Called 0 times</code> since that initialization is run <em>after</em> the parse phase, when the macros are expanded.</p>
<p>Macros are terribly useful when complicated, computed initializations need to be done. However, they are still in the <em>experimental</em> nursery for a good reason. Although the features shown above are not very likely to change, anything, even their very presence, might change at any one time depending in necessities, so it would be best to keep them away from production code. Meanwhile, taking a look at <a href="https://perl6advent.wordpress.com/2012/12/23/day-23-macros/">this article by Masak</a> as well as <a href="https://github.com/masak/007"><code>007</code></a>, a new macro language, might provide a glimpse into the things to come.</p>
<h2 id="cached"><a class="u" href="experimental.html#___top" title="go to top of document"><a name="index-entry-:cached-cached"><span class="index-entry"><strong>cached</strong></span></a></a></h2>
<p>The following pragma:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="keyword other include raku"><span>use</span></span><span>&nbsp;</span><span class="constant language pragma raku"><span>experimental</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>cached</span></span><span>;</span></span></div></pre><p>turns on the <code>is cached</code> trait, which stores the result of a routine call, returning the same value if called with the same arguments.</p>
<p>It can be used when heavy calculations are involved, as in this sample that uses <a href="https://perl6advent.wordpress.com/2018/12/25/calling-numbers-names/#more-7528">amicable numbers</a>, taken from the 2018 Advent Calendar:</p>
<pre class="editor editor-colors"><div class="line"><span class="source raku"><span class="keyword other include raku"><span>use</span></span><span>&nbsp;</span><span class="constant language pragma raku"><span>experimental</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>:</span></span><span class="routine name raku"><span>cached</span></span><span>;</span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>aliquot-parts</span></span><span>(&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>number</span></span></span><span>&nbsp;)&nbsp;</span><span class="storage modifier type constraints raku"><span>is</span></span><span>&nbsp;</span><span class="entity name type trait raku"><span>cached</span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;(</span><span class="keyword operator generic raku"><span>^</span></span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>number</span></span></span><span>)</span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>grep</span></span><span class="keyword operator generic raku"><span>:</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>number</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>%%</span></span><span>&nbsp;</span><span class="keyword operator generic raku"><span>*</span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="storage type declarator type raku"><span>sub</span></span><span>&nbsp;</span><span class="entity name function raku"><span>infix</span></span><span class="punctuation definition function adverb raku"><span>:</span></span><span class="span keyword operator array words raku"><span>&lt;</span></span><span class="string array words raku"><span>amic</span></span><span class="span keyword operator array words raku"><span>&gt;</span></span><span>(&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>m</span></span></span><span>,&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>n</span></span></span><span>&nbsp;)&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>m</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>==</span></span><span>&nbsp;</span><span class="routine name raku"><span>aliquot-parts</span></span><span>(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>n</span></span></span><span>)</span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>sum</span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>&amp;&amp;</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>n</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>==</span></span><span>&nbsp;</span><span class="routine name raku"><span>aliquot-parts</span></span><span>(</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>m</span></span></span><span>)</span><span class="keyword operator generic raku"><span>.</span></span><span class="support function raku"><span>sum</span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="comment line number-sign raku"><span class="punctuation definition comment raku"><span>#</span></span><span>&nbsp;Taken&nbsp;from&nbsp;</span><span class="markup underline link https hyperlink"><span>https://en.wikipedia.org/wiki/Amicable_numbers</span></span><span>&nbsp;</span></span></span></div><div class="line"><span class="source raku"><span class="storage modifier declarator raku"><span>my</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>@</span></span><span class="variable other identifier raku"><span>numbers</span></span></span><span>&nbsp;</span><span class="storage modifier assignment raku"><span>=</span></span><span>&nbsp;[</span><span class="constant numeric raku"><span>2620</span></span><span>,&nbsp;</span><span class="constant numeric raku"><span>2924</span></span><span>,&nbsp;</span><span class="constant numeric raku"><span>5020</span></span><span>,&nbsp;</span><span class="constant numeric raku"><span>5564</span></span><span>,&nbsp;</span><span class="constant numeric raku"><span>6232</span></span><span>,&nbsp;</span><span class="constant numeric raku"><span>6368</span></span><span>,&nbsp;</span><span class="constant numeric raku"><span>66928</span></span><span>,&nbsp;</span><span class="constant numeric raku"><span>66992</span></span><span>];</span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>Aliquot&nbsp;parts&nbsp;of&nbsp;</span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>$</span></span><span>_</span></span><span>&nbsp;are&nbsp;</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>,&nbsp;</span><span class="routine name raku"><span>aliquot-parts</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>$</span></span><span class="variable other identifier raku"><span>_</span></span></span><span>&nbsp;</span><span class="keyword control repeat raku"><span>for</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>@</span></span><span class="variable other identifier raku"><span>numbers</span></span></span><span>;</span></span></div><div class="line"><span class="source raku"><span>&nbsp;</span></span></div><div class="line"><span class="source raku"><span class="keyword control repeat raku"><span>for</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>@</span></span><span class="variable other identifier raku"><span>numbers</span></span></span><span>&nbsp;</span><span class="support type exception raku"><span>X</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>@</span></span><span class="variable other identifier raku"><span>numbers</span></span></span><span>&nbsp;</span><span class="keyword operator multi-symbol raku"><span>-&gt;</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>@</span></span><span class="variable other identifier raku"><span>pair</span></span></span><span>&nbsp;</span><span class="meta block raku"><span class="punctuation definition block raku"><span>{</span></span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support function raku"><span>say</span></span><span>&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span class="variable other identifier interpolated raku"><span class="variable other identifier sigil raku"><span>@</span></span><span>pair</span><span class="keyword operator bracket open raku"><span>[</span></span><span class="constant numeric raku"><span>0</span></span><span class="keyword operator bracket close raku"><span>]</span></span><span>&nbsp;and&nbsp;@pair</span><span class="keyword operator bracket open raku"><span>[</span></span><span class="constant numeric raku"><span>1</span></span><span class="keyword operator bracket close raku"><span>]</span></span></span><span>&nbsp;are&nbsp;</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>,</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>@</span></span><span class="variable other identifier raku"><span>pair</span></span></span><span>[</span><span class="constant numeric raku"><span>0</span></span><span>]&nbsp;</span><span class="routine name raku"><span>amic</span></span><span>&nbsp;</span><span class="meta variable container raku"><span class="variable other identifier sigil raku"><span>@</span></span><span class="variable other identifier raku"><span>pair</span></span></span><span>[</span><span class="constant numeric raku"><span>1</span></span><span>]</span><span class="keyword operator multi-symbol raku"><span>??</span></span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>&nbsp;</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span class="keyword operator multi-symbol raku"><span>!!</span></span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>not&nbsp;</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>,&nbsp;</span><span class="string quoted double raku"><span class="punctuation definition string begin raku"><span>&quot;</span></span><span>amicable</span><span class="punctuation definition string end raku"><span>&quot;</span></span></span><span>;</span></span></span></div><div class="line"><span class="source raku"><span class="meta block raku"><span class="punctuation definition block raku"><span>}</span></span></span></span></div></pre><p>This code caches the computation of the <em>aliquot parts</em>, so that when the <code>amic</code> operator is called, it&#39;s only computed once; as a matter of fact, the first loop which prints these aliquot parts will be the only one that actually perform the computation.</p>
<p>See also <a href="https://docs.raku.org/routine/is%20cached">the description of the trait</a> for additional information and examples.</p>

        </div>
    </div>

    

    <footer class="pretty-box yellow">
        <p style="display:;">
            Generated from <a href="https://github.com/Raku/doc/edit/master/doc//Language/experimental.pod6">https://github.com/Raku/doc/edit/master/doc//Language/experimental.pod6</a>.
        </p>
        <p>
            This is a work in progress to document Raku (formerly known as Perl 6), and
            known to be incomplete.
        </p>
        <p>
            <a href="https://github.com/Raku/doc/blob/master/CONTRIBUTING.md#reporting-bugs">
                Please report any issues
            </a>
            Your contribution is appreciated.
        </p>
        <p>
            This documentation is provided under the terms of the
            <a href="https://raw.githubusercontent.com/Raku/doc/master/LICENSE">
                Artistic License 2.0
            </a>. The Camelia image is
            <a href="https://raw.githubusercontent.com/Raku/mu/master/misc/camelia.txt">
                copyright © 2009 by Larry Wall.
            </a>
            <!-- CREDITS -->
            <!--External Link Image by Zapyon, CCA-SA 4.0. Derived from Wikimedia Foundation https://commons.wikimedia.org/wiki/File:External-link-04-bold-12x12.svg -->
        </p>
    </footer>

    <script type="text/javascript" src="../js/app.js%3Fv=1"></script>
    <script type="text/javascript" src="../js/search.js%3Fv=3"></script>
</body>
</html>
